"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)}function _taggedTemplateLiteral(n,t){return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function findHandle(n){var r=!0,u=!1,f=undefined,t,e,i;try{for(t=n.childNodes[Symbol.iterator]();!(r=(e=t.next()).done);r=!0)if(i=e.value,i.nodeType===Node.ELEMENT_NODE&&i.classList.contains("drag-handle"))return i}catch(o){u=!0;f=o}finally{try{!r&&t["return"]&&t["return"]()}finally{if(u)throw f;}}return null}var _templateObject=_taggedTemplateLiteral(["There is no method 'exec' in command '","'"],["There is no method 'exec' in command '","'"]);(function(){function t(n,t){if(n in app.modules){var i=app.modules[n];return typeof i=="function"&&(i=i(),app.modules[n]=i),i}if(t)return null;throw new Error('module "'+n+'" not found');}function r(n,t){if(n in app.components)return app.components[n];if(t)return{};throw new Error('component "'+n+'" not found');}function u(){return""+i++}function f(n,i){var r={"default":undefined};return i(t,r),r["default"]}var n,i;window.app={modules:{},components:{},nextToken:u};window.require=t;window.component=r;window.define=f;n=document.querySelector("meta[name=rootUrl]");window.$$rootUrl=n?n.content||"":"";i=1603})();app.modules["std:locale"]=function(){return window.$$locale},function(n){n.closest=n.closest||function(n){for(var t=this;t;){if(t.matches(n))return t;t=t.parentElement}return null};n.scrollIntoViewCheck=n.scrollIntoViewCheck||function(){for(var t=this,r=t.getBoundingClientRect(),n=t.parentElement,i;n;){if(n.offsetHeight<n.scrollHeight)break;n=n.parentElement}n&&(i=n.getBoundingClientRect(),r.top<i.top?t.scrollIntoView({block:"nearest"}):r.bottom>i.bottom&&t.scrollIntoView({block:"nearest"}))}}(Element.prototype),function(n){n.isZero=n.isZero||function(){var n=new Date(0,0,1,0,0,0,0);return n.setHours(0,-n.getTimezoneOffset(),0,0),this.getTime()===n.getTime()}}(Date.prototype),function(){function n(n,t,i){Vue.set(n,t,i)}function t(n){Vue.nextTick(n)}app.modules["std:platform"]={set:n,defer:t,File:File,performance:performance};app.modules["std:eventBus"]=new Vue({})}();app.modules["std:const"]=function(){return{SEVERITY:{ERROR:"error",WARNING:"warning",INFO:"info"}}};app.modules["std:utils"]=function(){function vt(n){return typeof n=="function"}function f(n){return typeof n!="undefined"}function e(n){return n!==null&&typeof n=="object"}function n(n){return n instanceof Date}function l(n){return typeof n=="string"}function o(n){return typeof n=="number"}function yt(n){return typeof n=="boolean"}function d(n){return e(n)&&!Array.isArray(n)}function pt(n){return n===String||n===Number||n===Boolean||n===Date||n===st.File||n===Object}function wt(n){return n===Date}function bt(n){return!n||Object.keys(n).length===0&&n.constructor===Object}function kt(t,i){return t===i?!0:n(t)&&n(i)?t.getTime()===i.getTime():!1}function dt(t){if(!t)return!1;if(n(t))return!i(t);switch(typeof t){case"string":return t!=="";case"date":return!1;case"object":if("$id"in t)return!!t.$id}return(t||"")!==""}function a(n){return JSON.stringify(n,function(n,t){return i(this[n])?undefined:n[0]==="$"||n[0]==="_"?undefined:t},2)}function gt(n){if(f(n)){if(n===null)return"";if(e(n))return a(n)}else return"";return""+n}function ni(n){switch(n){case undefined:return undefined;case Number:return 0;case String:return"";case Boolean:return!1;case Date:return t();case Object:return null;default:if(typeof n=="function")return null;throw new Error("There is no default value for type "+n);}}function g(n,t){var u,i,r,f;if(!t||!n)return"";for(u=(t||"").split("."),i=n,r=0;r<u.length;r++){if(f=u[r],!(f in i))throw new Error("Property '"+f+"' not found in "+i.constructor.name+" object");i=i[u[r]]}return i}function ti(t,i,r,u,f){var o=g(t,i);return f?o:n(o)?v(o,r):e(o)?a(o):v(o,r,u)}function nt(n){return n<10?"0"+n:""+n}function ii(n,t){switch(t){case"Currency":case"Number":return s(n);case"Date":return rt(n)}return n}function tt(n,t){function r(n){return n?n.length:0}var u,i;if(!t)return lt(n);if(c[t])return c[t](n);if(u=/^([#][,\s])?(#*)?(0*)?\.?(0*)?(#*)?$/,i=t.match(u),!i)return console.error("Invalid number format: '"+t+"'"),n;var o=!!i[1],a=r(i[2]),s=r(i[3]),f=r(i[4]),l=r(i[5]),e=Intl.NumberFormat(h,{minimumFractionDigits:f,maximumFractionDigits:f+l,minimumIntegerDigits:s,useGrouping:o}).format;return c[t]=e,e(n)}function v(t,r,e){if(e=e||{},!r)return t;if(!f(t))return"";switch(r){case"DateTime":return n(t)?i(t)?"":u(t)+" "+b(t):(console.error("Invalid Date for utils.format ("+t+")"),t);case"Date":return(l(t)&&(t=fi(t)),!n(t))?(console.error("Invalid Date for utils.format ("+t+")"),t):i(t)?"":u(t);case"DateUrl":return i(t)?"":oi(t)?t.toISOString():""+t.getFullYear()+nt(t.getMonth()+1)+nt(t.getDate());case"Time":return n(t)?i(t)?"":b(t):(console.error("Invalid Date for utils.format ("+t+")"),t);case"Period":return t.format?t.format("Date"):(console.error("Invalid Period for utils.format ("+t+")"),t);case"Currency":return(o(t)||(t=s(t)),e.hideZeros&&t===0)?"":e.format?tt(t,e.format):k(t);case"Number":return(o(t)||(t=s(t)),e.hideZeros&&t===0)?"":tt(t,e.format);default:console.error("Invalid DataType for utils.format ("+r+")")}return t}function ri(n){if(!n)return"0";if(o(n))return n;if(d(n)){if("$id"in n)return n.$id||0;if("Id"in n)return n.Id||0;console.error("Id or @id not found in object")}return"0"}function s(n){return l(n)&&(n=n.replace(/\s/g,"").replace(",",".")),isFinite(n)?+n:0}function it(){var n=new Date;return n.setHours(0,0,0,0),n.setHours(0,-n.getTimezoneOffset(),0,0),n}function t(){var n=new Date(0,0,1,0,0,0,0);return n.setHours(0,-n.getTimezoneOffset(),0,0),n}function ui(i){if(!i)return t();if(n(i))return i;var r=undefined;return(r=i.length===8?new Date(+i.substring(0,4),+i.substring(4,6)-1,+i.substring(6,8),0,0,0,0):i.startsWith('"\\/"')?new Date(i.substring(4,i.length-4)):new Date(i),!isNaN(r.getTime()))?(r.setHours(0,0,0,0),r.setHours(0,-r.getTimezoneOffset(),0,0),r):i}function fi(n){try{var t=new Date(n);return t.setHours(0,-t.getTimezoneOffset(),0,0),t}catch(i){return n}}function ei(n){var i;if(n=n||"",!n)return t();i=n.split(/[^\d]/).filter(function(n){return n});i.length===1&&i.push("0");var r=Math.min(+i[0],23),u=Math.min(+i[1],59);return new Date(0,0,1,r,u,0,0)}function rt(n){var r,i,f,u;return(n=n||"",at.test(n))?new Date(n):n?(r=it(),i=n.split(/[^\d]/).filter(function(n){return n}),i.length===1?(i.push(""+(r.getMonth()+1)),i.push(""+r.getFullYear())):i.length===2&&i.push(""+r.getFullYear()),f=function(n){n=""+n;switch(n.length){case 2:n="20"+n;break;case 4:break;default:n=r.getFullYear()}return+n},u=new Date(+f(i[2]),+((i[1]?i[1]:1)-1),+i[0],0,0,0,0),isNaN(u.getDate()))?t():(u.setHours(0,-u.getTimezoneOffset(),0,0),u):t()}function ut(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}function i(i){return n(i)?ut(i,t()):!1}function oi(t){return n(t)?t.getUTCHours()!==0||t.getUTCMinutes()!==0&&t.getUTCSeconds()!==0:!1}function ft(n){var t=new Date(n.getFullYear(),n.getMonth()+1,0,0,0,0);return t.setHours(0,-t.getTimezoneOffset(),0,0),t}function y(n,t,i){var r=new Date(n,t-1,i,0,0,0,0);return r.setHours(0,-r.getTimezoneOffset(),0,0),r}function si(n,t,i){var o,u,f,r,e,s,h,c,l;t.getTime()>i.getTime()&&(o=[i,t],t=o[0],i=o[1]);switch(n){case"month":if(u=0,i.getDate()<t.getDate()&&(u=-1),t.getFullYear()===i.getFullYear())return i.getMonth()-t.getMonth()+u;for(f=0,r=t.getFullYear();r<i.getFullYear();)e=i.getDate(),s=ft(new Date(r+1,t.getMonth(),1,0,0,0,0)).getDate(),e>s&&(e=s),t=new Date(r+1,t.getMonth(),e,0,0,0,0),r=t.getFullYear(),f+=12;return f+=i.getMonth()-t.getMonth(),f+u;case"day":return h=864e5,Math.floor((i-t)/h);case"year":return c=new Date(t.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),l=c<t?i>t?-1:0:i<t?1:0,i.getFullYear()-t.getFullYear()+l}throw new Error("Invalid unit value for utils.date.diff");}function hi(n){var t=new Date(1900,0,n,0,0,0,0);return t.setHours(0,-t.getTimezoneOffset(),0,0),t}function ci(t,i,r){var u,f;if(!n(t))return null;u=0;switch(r){case"year":return new Date(t.getFullYear()+i,t.getMonth(),t.getDate(),0,0,0,0);case"month":var o=t.getMonth()+i,e=t.getDate(),s=new Date(t.getFullYear(),o+1,0).getDate();return e>s&&(e=s),f=new Date(t.getFullYear(),o,e),f.setHours(0,-f.getTimezoneOffset(),0,0),f;case"day":u=864e5;break;case"hour":u=36e5;break;case"minute":u=6e4;break;case"second":u=1e3;break;default:throw new Error("Invalid unit value for utils.date.add");}return new Date(t.getTime()+i*u)}function li(t,i){if(!n(t)||!n(i))return null;var r=t.getTime(),u=i.getTime();return r-u}function ai(n){var t=""+n||"";return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"")}function vi(n){var t=n.lastIndexOf(".");return{obj:n.substring(0,t),prop:n.substring(t+1)}}function yi(n){return n?n.charAt(0).toUpperCase()+n.slice(1):""}function pi(n,t){return(n=""+n||"",n.length<t)?n:n.substring(0,t-1)+"…"}function et(n,t){return t?n?(n||"").toString().toLowerCase().indexOf(t.toLowerCase())!==-1:!1:!0}function wi(n,t,i){var r,o,s;if(!i)return!0;if(!n)return!1;var u=!0,f=!1,e=undefined;try{for(r=t.split(",")[Symbol.iterator]();!(u=(o=r.next()).done);u=!0)if(s=o.value,et(n[s],i))return!0}catch(h){f=!0;e=h}finally{try{!u&&r["return"]&&r["return"]()}finally{if(f)throw e;}}return!1}function bi(n,t,i){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:i})}function ot(n,t){var i=null;return function(){clearTimeout(i);i=setTimeout(function(){n.call()},t)}}function ki(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return function(){for(var i=arguments.length,u=Array(i),t=0;t<i;t++)u[t]=arguments[t];return n.apply(undefined,r.concat(u))}}function di(n,t){var i,r;return isNaN(n)?Nan:(f(t)||(t=2),i=!1,n<0&&(n=-n,i=!0),r=Number(Math.round(n.toFixed(12)+("e"+t))+("e-"+t)),i?-r:r)}var p=require("std:locale"),st=require("std:platform"),w=p.$Locale,h=p.$Locale,r="2-digit",ht={timeZone:"UTC",year:"numeric",month:r,day:r},ct={timeZone:"UTC",hour:r,minute:r},u=new Intl.DateTimeFormat(w,ht).format,b=new Intl.DateTimeFormat(w,ct).format,k=new Intl.NumberFormat(h,{minimumFractionDigits:2,maximumFractionDigits:6,useGrouping:!0}).format,lt=new Intl.NumberFormat(h,{minimumFractionDigits:0,maximumFractionDigits:6,useGrouping:!0}).format,at=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/,c={};return{isArray:Array.isArray,isFunction:vt,isDefined:f,isObject:e,isObjectExact:d,isDate:n,isString:l,isNumber:o,isBoolean:yt,toString:gt,defaultValue:ni,notBlank:dt,toJson:a,fromJson:JSON.parse,isPrimitiveCtor:pt,isDateCtor:wt,isEmptyObject:bt,defineProperty:bi,eval:ti,simpleEval:g,format:v,toNumber:s,parse:ii,getStringId:ri,isEqual:kt,date:{today:it,zero:t,parse:rt,tryParse:ui,equal:ut,isZero:i,formatDate:u,format:u,add:ci,diff:si,create:y,compare:li,endOfMonth:ft,minDate:y(1901,1,1),maxDate:y(2999,12,31),fromDays:hi,parseTime:ei},text:{contains:et,containsText:wi,sanitize:ai,splitPath:vi,capitalize:yi,maxChars:pi},currency:{round:di,format:k},func:{curry:ki,debounce:ot},debounce:ot}};app.modules["std:url"]=function(){function s(n){return n=""+n||"",n=n.replace(/\\/g,"/"),n.startsWith("/")&&(n=n.substring(1)),n.endsWith("/")&&(n=n.substring(0,n.length-1)),n}function h(n){var t=window.$$rootUrl;return t&&n.startsWith(t)?n.substring(t.length):n}function c(n){return n&&n.startsWith&&n.startsWith("/")?n.substring(1):n}function r(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return"/"+i.map(s).filter(function(n){return!!n}).join("/")}function t(t){return!n.isDefined(t)||t===null?"":n.isDate(t)?n.format(t,"DateUrl"):o.isPeriod(t)?t.format("DateUrl"):n.isObjectExact(t)?t.constructor.name==="Object"?(n.isDefined(t.Id)||console.error("Id is not defined for Filter object"),""+(t.Id||"")):(n.isDefined(t.$id)||console.error("$id is not defined for "+t.constructor.name),""+(t.$id||"0")):""+t}function l(n){if(!n)return!0;var i=t(n);return i?i==="0"?!0:!1:!0}function i(i){if(!i||!n.isObjectExact(i))return"";var r=encodeURIComponent,u=Object.keys(i).filter(function(n){return!n.startsWith("_")&&!n.startsWith("$")&&!l(i[n])}).map(function(n){return r(n)+"="+r(t(i[n]))}).join("&");return u?"?"+u:""}function u(n){var t={};return n.replace(/\??([^=&]+)=([^&]*)/g,function(n,i,r){t[decodeURIComponent(i)]=""+decodeURIComponent(r)}),t}function a(n,t){function u(n){var t=n[n.length-1];return t==="new"||t==="0"}var f=(n||"").split("?")[0],e=(t||"").split("?")[0],i=f.split("/"),r=e.split("/");return i.length!==r.length?!1:u(r)&&!u(i)&&i.slice(0,i.length-1).join("/")===r.slice(0,r.length-1).join("/")?!0:!1}function v(n,t){var u=(n||"").split("?")[0],f=(t||"").split("?")[0],i=u.split("/"),r=f.split("/");return i.length!==r.length?!1:(i.pop(),r.pop(),i.pop()==="edit"&&r.pop()==="copy")?i.join("/")===r.join("/"):!1}function y(n){var t=(n||"").split("/"),i=t.length;return i>=6?t.slice(2,i-2).join("/"):n}function f(n,i){var e={},r,f,o;for(r in i)r.startsWith("_")||(e[r]=t(i[r]));return f={url:n,query:e},n.indexOf("?")!==-1&&(o=n.split("?"),f.url=o[0],f.query=Object.assign({},u(o[1]),e)),f}function p(n,t){n||(n=window.location.pathname+window.location.search);var r=f(n,t);return r.url+i(r.query)}function w(t,u){var f=u||"new",e="";return n.isDefined(f.$id)?f=f.$id:n.isObjectExact(f)&&(f=u.Id,delete u.Id,e=i(u),n.isDefined(f)||(f="new")),t.endsWith("new")&&f==="new"&&(f=""),r(t,f)+e}function b(n){var t=document.querySelector("meta[name=helpUrl]");return!t||!t.content?(console.warn("help url is not specified"),""):t.content+(n||"")}function e(n){return n.startsWith("/_dialog/")}function k(n,t,i){var r=n.split("/");return e(n)?(r.pop(),t&&r.push(t)):(i&&r.pop(),t&&r.pop(),i&&r.push(i),t&&r.push(t)),r.join("/")}function d(n){return(n=n.split("?")[0],!n)?!1:n.indexOf("/new")!==-1?!0:e(n)&&n.endsWith("/0")?!0:!1}var n=require("std:utils"),o=require("std:period");return{combine:r,makeQueryString:i,parseQueryString:u,normalizeRoot:h,idChangedOnly:a,idOrCopyChanged:v,makeBaseUrl:y,parseUrlAndQuery:f,replaceUrlQuery:p,createUrlForNavigate:w,firstUrl:"",encodeUrl:encodeURIComponent,helpHref:b,replaceSegment:k,removeFirstSlash:c,isNewPath:d}};app.modules["std:period"]=function(){function i(t){t&&"From"in t?t.From||t.To?(this.From=n.tryParse(t.From),this.To=n.tryParse(t.To)):(this.From=n.minDate,this.To=n.maxDate):(this.From=n.minDate,this.To=n.maxDate);Object.defineProperty(this,"Name",{enumerable:!0,get:function(){return this.format("Date")}})}function f(n){return n instanceof i}function s(n){return n?Object.getOwnPropertyNames(n).length!==2?!1:n.hasOwnProperty("From")&&n.hasOwnProperty("To")?!0:!1:!1}function e(){return new i}function h(){return u("allData")}function o(n){var i=[{name:t.$Today,key:"today"},{name:t.$Yesterday,key:"yesterday"},{name:t.$Last7Days,key:"last7"},{name:t.$CurrMonth,key:"currMonth"},{name:t.$PrevMonth,key:"prevMonth"},{name:t.$CurrQuart,key:"currQuart"},{name:t.$PrevQuart,key:"prevQuart"},{name:t.$CurrYear,key:"currYear"},{name:t.$PrevYear,key:"prevYear"}];return n&&i.push({name:t.$AllPeriodData,key:"allData"}),i}function u(t,i,r){var u=n.today(),f=e(),l,a,v,y,p,w,s,h,o,d,g,nt,c;switch(t){case"today":f.set(u,u);break;case"yesterday":l=n.add(u,-1,"day");f.set(l,l);break;case"last7":a=n.add(u,-6,"day");f.set(a,u);break;case"last30":v=n.add(u,-29,"day");f.set(v,u);break;case"startMonth":y=n.create(u.getFullYear(),u.getMonth()+1,1);f.set(y,u);break;case"prevMonth":p=n.create(u.getFullYear(),u.getMonth(),1);s=n.create(u.getFullYear(),u.getMonth()+1,1);f.set(p,n.add(s,-1,"day"));break;case"currMonth":w=n.create(u.getFullYear(),u.getMonth()+1,1);s=n.create(u.getFullYear(),u.getMonth()+2,1);f.set(w,n.add(s,-1,"day"));break;case"startQuart":var o=Math.floor(u.getMonth()/3),tt=o*3,it=n.create(u.getFullYear(),tt+1,1);f.set(it,u);break;case"currQuart":var h=u.getFullYear(),o=Math.floor(u.getMonth()/3),b=o*3,k=(o+1)*3,rt=n.create(h,b+1,1),s=n.add(n.create(h,k+1,1),-1,"day");f.set(rt,s);break;case"prevQuart":h=u.getFullYear();o=Math.floor(u.getMonth()/3)-1;o<0&&(h-=1,o=3);var b=o*3,k=(o+1)*3,ut=n.create(h,b+1,1),s=n.add(n.create(h,k+1,1),-1,"day");f.set(ut,s);break;case"startYear":d=n.create(u.getFullYear(),1,1);f.set(d,u);break;case"currYear":g=n.create(u.getFullYear(),1,1);c=n.create(u.getFullYear(),12,31);f.set(g,c);break;case"prevYear":nt=n.create(u.getFullYear()-1,1,1);c=n.create(u.getFullYear()-1,12,31);f.set(nt,c);break;case"allData":f.set(n.minDate,n.maxDate);break;case"custom":f.set(i,r);break;default:console.error("invalid menu key: "+t)}return f}var r=require("std:utils"),n=r.date,t=window.$$locale;return i.prototype.assign=function(t){return f(t)?(this.From=t.From,this.To=t.To):t.From===null&&t.To===null?(this.From=n.minDate,this.To=n.maxDate):(this.From=n.tryParse(t.From),this.To=n.tryParse(t.To)),this.normalize(),this},i.prototype.equal=function(t){return n.equal(this.From,t.From)&&n.equal(this.To,t.To)},i.prototype.fromUrl=function(t){var i,u,f;return r.isObject(t)&&"From"in t?(this.From=n.tryParse(t.From),this.To=n.tryParse(t.To),this.normalize(),this):(i=(t||"").split("-"),i[0].toLowerCase()==="all")?(this.From=n.minDate,this.To=n.maxDate,this):(u=i[0],f=i.length>1?i[1]:i[0],this.From=n.tryParse(u),this.To=n.tryParse(f),this)},i.prototype.isAllData=function(){return this.From.getTime()===n.minDate.getTime()&&this.To.getTime()===n.maxDate.getTime()},i.prototype.format=function(n){if(this.isAllData())return n==="DateUrl"?"All":t.$AllPeriodData;var i=this.From,u=this.To;return i.getTime()===u.getTime()?r.format(i,n):n==="DateUrl"?r.format(i,n)+"-"+r.format(u,n):r.format(i,n)+" - "+(r.format(u,n)||"???")},i.prototype.text=function(n){var i,c,e,l,a,v;if(this.isAllData())return t.$AllPeriodData;var y=o(!1),f=!0,s=!1,h=undefined;try{for(i=y[Symbol.iterator]();!(f=(c=i.next()).done);f=!0)if(e=c.value,l=u(e.key),this.equal(l))return e.name}catch(p){s=!0;h=p}finally{try{!f&&i["return"]&&i["return"]()}finally{if(s)throw h;}}return n?t.$CustomPeriod:(a=this.From,v=this.To,r.format(a,"Date")+" - "+(r.format(v,"Date")||"???"))},i.prototype["in"]=function(n){var t=n.getTime(),i=r.date.zero().getTime();if(this.From.getTime()!==i&&this.To.getTime()!==i)return t>=this.From.getTime()&&t<=this.To.getTime()},i.prototype.normalize=function(){if(this.From.getTime()>this.To.getTime()){var n=[this.To,this.From];this.From=n[0];this.To=n[1]}return this},i.prototype.set=function(n,t){return this.From=n,this.To=t,this.normalize()},i.prototype.toJson=function(){return JSON.stringify(this)},{isPeriod:f,like:s,constructor:i,zero:e,all:h,create:u,predefined:o}};app.modules["std:modelInfo"]=function(){function n(n,t){var r={PageSize:t.pageSize,Offset:t.offset,SortDir:t.dir,SortOrder:t.order,GroupBy:t.group};for(var i in r)n[i]=r[i];if(n.Filter)for(i in n.Filter)n.Filter[i]=t[i]}function t(n){var t,i;if(!n)return undefined;if(t={pageSize:n.PageSize,offset:n.Offset,dir:n.SortDir,order:n.SortOrder,group:n.GroupBy},n.Filter)for(i in n.Filter)t[i]=n.Filter[i];return t}function i(n){var i,t,r;if(n&&n.Filter)for(i in n.Filter)t=n.Filter[i],typeof t=="string"&&t.startsWith('"\\/"')&&(r=new Date(t.substring(4,t.length-4)),n.Filter[i]=r)}return{copyfromQuery:n,get:t,reconcile:i}};app.modules["std:http"]=function(){function r(n,t){var i=new FileReader;i.addEventListener("loadend",function(){var n=i.result;t(n)});i.readAsText(n)}function t(t,i,u,f){return new Promise(function(e,o){var s=new XMLHttpRequest;s.onload=function(){if(n.$emit("endRequest",i),s.status===200){if(f){e(s.response);return}var t=s.getResponseHeader("content-type")||"",u=s.responseText;t&&t.indexOf("application/json")!==-1&&(u=s.responseText?JSON.parse(s.responseText):"");e(u)}else s.status===255?f?s.response instanceof Blob?r(s.response,function(n){return o("server error: "+n)}):o(s.statusText):o(s.responseText||s.statusText):s.status===473?s.statusText==="Unauthorized"&&window.location.assign("/"):o(s.statusText)};s.onerror=function(){n.$emit("endRequest",i);o(s.statusText)};s.open(t,i,!0);s.setRequestHeader("X-Requested-With","XMLHttpRequest");s.setRequestHeader("Accept","application/json, text/html");f&&(s.responseType="blob");n.$emit("beginRequest",i);s.send(u)})}function u(n,i){return t("GET",n,null,i)}function f(n,i,r){return t("POST",n,i,r)}function e(t,i){return new Promise(function(r,u){var f=new XMLHttpRequest;f.onload=function(){if(n.$emit("endRequest",t),f.status===200){var i=f.responseText?JSON.parse(f.responseText):"";r(i)}else f.status===255&&u(f.responseText||f.statusText)};f.onerror=function(){alert("Error")};f.open("POST",t,!0);f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.setRequestHeader("Accept","application/json");n.$emit("beginRequest",t);f.send(i)})}function o(r,u,f){var e,o;return u&&(e=u.firstElementChild,e&&e.__vue__&&(o=e.__vue__,o.$destroy(),o.$el.remove(),o.$el=null,e.__vue__=null),u.innerHTML=""),new Promise(function(e,o){n.$emit("beginLoad");t("GET",r).then(function(t){var c,o,s,l,a,y;if(t.startsWith("<!DOCTYPE")){window.location.assign("/");return}var w=new DOMParser,h=w.parseFromString(t,"text/html"),v=h.body.firstElementChild,p=v.id||null;if(u.innerHTML=v?v.outerHTML:"",p&&!document.getElementById(p)){u.innerHTML="";e(!1);return}for(c=0;c<h.scripts.length;c++)o=h.scripts[c],o.type==="text/javascript"&&(s=document.createElement("script"),o.src?s.src=o.src:s.text=o.text,document.body.appendChild(s).parentNode.removeChild(s));u.firstElementChild&&u.firstElementChild.__vue__&&(l=u.firstElementChild,a=l.__vue__,a.$data.__baseUrl__=f||i.normalizeRoot(r),a.$data.__baseQuery__=i.parseUrlAndQuery(r).query,l.classList.contains("modal")&&(y=l.getAttribute("data-controller-attr"),y&&n.$emit("modalSetAttribites",y,a)));h.body.remove();e(!0);n.$emit("endLoad")})["catch"](function(t){o(t);n.$emit("endLoad")})})}function s(n,t){return new Promise(function(i,r){var u=new XMLHttpRequest,f;u.onload=function(){if(u.status===200){var t=u.getResponseHeader("content-type"),n=u.responseText;t.indexOf("application/json")!==-1&&(n=JSON.parse(u.responseText));i(n)}else u.status===255?r(u.responseText||u.statusText):r(u.statusText)};u.onerror=function(n){r(n)};f="http://127.0.0.1:64031/"+n;u.open("POST",f,!0);u.setRequestHeader("X-Requested-With","XMLHttpRequest");u.setRequestHeader("Accept","text/plain");u.setRequestHeader("Content-Type","text/plain");u.send(t)})}var n=require("std:eventBus"),i=require("std:url");return{get:u,post:f,load:o,upload:e,localpost:s}},function(){function u(n){n.title&&(document.title=n.title,i[n.url]=n.title)}function o(n){var t=n.split("/");return t.length===5?t.slice(0,3).join("/"):n.length===4?t.slice(0,2).join("/"):n}function r(){var t=window.location.pathname;return n.normalizeRoot(t)}function f(n,t){var i=n.split("?");return i[0]+(t||"")}function s(t,i){return f(t,n.makeQueryString(i))}var e=require("std:eventBus"),n=require("std:url"),i={},t=new Vuex.Store({strict:!0,state:{route:r(),query:n.parseQueryString(window.location.search)},getters:{seg0:function(n){return n.route.split("/")[1]},seg1:function(n){return n.route.split("/")[2]},len:function(n){return n.route.split("/").length},url:function(n){return n.route},query:function(n){return n.query},route:function(n){var t=n.route.split("/");return{len:t.length,seg0:t[1],seg1:t[2]}},baseUrl:function(t){return t.route+n.makeQueryString(t.query)},search:function(t){return n.makeQueryString(t.query)}},mutations:{navigate:function(t,i){var e=window.$$rootUrl,r=e+t.route+n.makeQueryString(t.query),o,f;t.route=i.url.toLowerCase();t.query=Object.assign({},i.query);o=e+t.route+n.makeQueryString(i.query);f=window.history;u(i);f.replaceState(r,null,r);f.pushState(r,null,o)},query:function(t,i){var u=window.$$rootUrl,r;t.query=Object.assign({},i);r=u+t.route+n.makeQueryString(t.query);window.history.replaceState(null,null,r)},setquery:function(n,t){var r=window.$$rootUrl,u=r+this.getters.baseUrl,i;(n.query=Object.assign({},n.query,t),i=r+this.getters.baseUrl,i!==u)&&(window.history.replaceState(null,null,i),e.$emit("queryChange",n.query))},popstate:function(t){t.route=r();t.query=n.parseQueryString(window.location.search);t.route in i&&(document.title=i[t.route])},setstate:function(t,i){window.history.replaceState(null,null,window.$$rootUrl+i.url);t.route=r();t.query=n.parseQueryString(window.location.search);u(i)},setnewid:function(t,i){var f=window.$$rootUrl,e=t.route,r=n.replaceSegment(e,i.id,i.action),u;t.route=r;u=f+r+n.makeQueryString(t.query);window.history.replaceState(null,null,u)},close:function(){function n(){window.close()}window.history.length>1?function(){var t=window.location.pathname;window.history.back();setTimeout(function(){window.location.pathname===t&&n()},300)}():n()}}});t.parseQueryString=n.parseQueryString;t.makeQueryString=n.makeQueryString;t.replaceUrlSearch=f;t.replaceUrlQuery=s;t.makeBackUrl=o;app.components["std:store"]=t}();app.modules["std:log"]=function(){function r(t){n&&console.info(t)}function u(t){n&&console.warn(t)}function f(n){console.error(n)}function e(t,i,r){(n||r)&&console.warn(t+" "+(performance.now()-i).toFixed(2)+" ms")}function o(){var r=window.sessionStorage.getItem(i);r!==null&&(n=r==="true",n&&console.warn("tracing is enabled"));t=!0}var n=!1,t=!1,i="traceEnabled";return{info:r,warn:u,error:f,time:e,traceEnabled:function(){return t||o(),n},enableTrace:function(t){if(window.$$debug){n=t;console.warn("tracing is "+(n?"enabled":"disabled"));try{window.sessionStorage.setItem(i,t)}catch(r){}}}}};app.modules["std:validators"]=function(){function u(t,i){switch(t.valid){case"notBlank":return n.notBlank(i);case"email":return i===""||e.test(i);case"url":return i===""||o.test(i);case"isTrue":return i===!0;case"regExp":return(t.regExp instanceof RegExp)?i===""||t.regExp.test(i):(console.error("rule.regExp is undefined or is not an regular expression"),!1)}return console.error("invalid std rule: '"+t+"'"),!0}function s(){t=new WeakMap}function i(i,r,u){var f=undefined,e;return t.has(i)?f=t.get(i):(f=new WeakMap,t.set(i,f)),n.isObjectExact(u)&&"$id"in u&&(u=u.$id),e={val:u,result:null},f.set(r,e),e}function h(t){return n.isObjectExact(t)&&"$id"in t?t.$id:t}function c(e,o,s,c){var l=[];return l.pending=0,e.forEach(function(e){var v=e.severity||r,p,y,a,w;if(!n.isFunction(e.applyIf)||e.applyIf(o,s))if(n.isString(e))u({valid:"notBlank"},s)||l.push({msg:e,severity:r});else if(n.isFunction(e))a=e(o,s),n.isString(a)&&a?l.push({msg:a,severity:v}):n.isObject(a)&&l.push({msg:a.msg,severity:a.severity||v});else if(n.isString(e.valid))u(e,s)||l.push({msg:e.msg,severity:v});else if(n.isFunction(e.valid)){if(e.async)if(t.has(e))if(p=t.get(e),p.has(o)){if(y=p.get(o),y.val===h(s)){y.result&&l.push(y.result);return}}else{i(e,o,s);return}else{i(e,o,s);return}if(a=e.valid(o,s),a&&a.then){if(w=function(){if(l.pending+=1,!e.async)return console.error("Async rules should be marked async:true"),{v:undefined};var t=i(e,o,s);a.then(function(i){var r={severity:v,msg:e.msg},u=!1;n.isString(i)?(r.msg=i,t.result=r,l.push(r),u=!0):i||(l.push(r),t.result=r,u=!0);o._root_._needValidate_=!0;u&&c&&c();l.pending-=1;f.$emit("pendingValidate")})}(),typeof w=="object")return w.v}else n.isString(a)?l.push({msg:a,severity:v}):a||l.push({msg:e.msg,severity:v})}else console.error("invalid valid element type for rule")}),l}function l(t,i,r,u){var f=[];return n.isArray(t)?f=t:n.isObject(t)?f.push(t):n.isFunction(t)?f.push(t):n.isString(t)&&f.push({valid:"notBlank",msg:t}),c(f,i,r,u)}var n=require("std:utils"),f=require("std:eventBus"),r="error",e=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,o=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,t=new WeakMap;return{validate:l,removeWeak:s}},function(){function f(n){o&&o.info(n)}function k(n,t){o&&o.time(n,t)}function u(n,t,i,r){Object.defineProperty(n,t,{writable:r||!1,enumerable:!1,configurable:!1,value:i})}function t(n,t,i){Object.defineProperty(n,t,{enumerable:!1,configurable:!1,get:i})}function i(n,t,i){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:i})}function pt(t,i){return(n.isDefined(i)||(i=n.defaultValue(t)),t===Number)?n.toNumber(i):t===String?n.toString(i):t===Date&&!n.isDate(i)?n.date.parse(""+i):i}function s(n){if(!n)return"";var t=n.lastIndexOf(".");return n.substring(t+1)}function wt(t,i,u){var f=t._meta_.props[u],h,o,s,c;if(f.type&&(f=f.type),h=t._path_?t._path_+".":"",o=t._src_,i=i||{},n.isObjectExact(f))if("type"in f)f=f.type;else throw new Error("Invalid _meta_ for '"+u+"'");switch(f){case Number:o[u]=i[u]||0;break;case String:o[u]=i[u]||"";break;case Boolean:o[u]=i[u]||!1;break;case Date:s=i[u]||null;o[u]=s?new Date(s):n.date.zero();break;case r.File:case Object:o[u]=null;break;case d:c=t._meta_.markerProps[u];o[u]=c;break;case e.constructor:o[u]=new f(i[u]);break;default:o[u]=new f(i[u]||null,h+u,t)}Object.defineProperty(t,u,{enumerable:!0,configurable:!0,get:function(){return this._src_[u]},set:function(n){var r=!1,h=u.startsWith("$$"),t=this._meta_.props[u],f=!1,i,e,o,s;(t.type&&(f=!!t.json,t=t.type),f||(n=pt(t,n)),n!==this._src_[u])&&(i=this._src_[u],this._lockEvents_||(e=(this._path_||"Root")+"."+u+".changing",o=this._root_.$emit(e,this,n,i,u),o!==!1))&&((this._src_[u]&&this._src_[u].$set?(this._src_[u].$set(n),r=!0):this._src_[u]=n,h||this._root_.$setDirty(!0,this._path_,u),this._lockEvents_)||r||(s=(this._path_||"Root")+"."+u+".change",this._root_.$emit(s,this,n,i,u)))}})}function d(){}function bt(t,i){var s=t._root_.$template,o,u,r,e;if(s&&(o=s._props_,o)&&(u=i.name,u in o))for(r in o[u])e=o[u][r],n.isPrimitiveCtor(e)?(f("create scalar property: "+u+"."+r),t._meta_.props[r]=e):n.isObjectExact(e)&&(e.get||(f("create object property: "+u+"."+r),t._meta_.props[r]=d,t._meta_.markerProps||(t._meta_.markerProps={}),t._meta_.markerProps[r]=e))}function g(t,i){var s=t._root_.$template,o,u,e,r;if(s&&(o=s._props_,o)&&(u=i.name,u in o))for(e in o[u])if(r=o[u][e],n.isPrimitiveCtor(r))continue;else n.isFunction(r)?(f("create property: "+u+"."+e),Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})):n.isObjectExact(r)?r.get&&(f("create property: "+u+"."+e),Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r.get,set:r.set})):alert("todo: invalid property type")}function kt(f,e,o,h){var tt=f.constructor.name,a=null,c,v,it,d,nt,ut;tt==="TRoot"&&(a=r.performance.now());h=h||f;u(f,et,{});u(f,p,o||"");u(f,w,h._root_||h);u(f,y,h);u(f,ot,null,!0);u(f,"_lockEvents_",0,!0);f._uiprops_={};c=!1;v=f._root_.$template;v&&!n.isEmptyObject(v._props_)&&(c=!0);c&&bt(f,f.constructor);for(it in f._meta_.props)wt(f,e,it,h);c&&g(f,f.constructor);o&&o.endsWith("]")&&(f.$selected=!1);f._meta_.$items&&(f.$expanded=!1,f.$collapsed=!1,f.$level=0);f.$lockEvents=function(){this._lockEvents_+=1};f.$unlockEvents=function(){this._lockEvents_-=1};t(f,"$eventsLocked",function(){return this._lockEvents_>0});i(f,"$valid",function(){var i,t,r,u;if(this._root_._needValidate_&&this._root_._validateAll_(),this._errors_)return!1;for(i in this)if(i[0]!=="$"&&i[0]!=="_")if(t=this[i],n.isArray(t)){for(r=0;r<t.length;r++)if(u=t[r],n.isObject(u)&&"$valid"in u&&!u.$valid)return!1}else if(n.isObject(t)&&"$valid"in t&&!t.$valid)return!1;return!0});i(f,"$invalid",function(){return!this.$valid});f.$errors=function(n){var t,r,i;return this?(t=this._root_,!t)?null:t._validate_?(r=this._path_+"."+n,i=t._validate_(this,r,this[n]),i&&i.length===0)?null:i:null:null};f._meta_.$group===!0&&i(f,"$groupName",function(){var i,t;return n.isDefined(this.$level)?(i=this._root_.__modelInfo.Levels,i&&(t=i[this.constructor.name],t&&this.$level<=t.length))?this[t[this.$level-1]]:(console.error("invalid data for $groupName"),b):b});f._meta_.$itemType&&(f.$setProperty=function(n,t){var u=o+"."+n,i=new f._meta_.$itemType(t,u,f);return r.set(this,n,i),this._root_.$setDirty(!0),i});var ft=tt+".construct",rt=null,st=o?s(o):"";if(f._root_.$emit(ft,f,st),f._root_===f){f._root_ctor_=f.constructor;f.$dirty=!1;f._query_={};for(d in f._meta_.props)nt=d+".$RowCount",e&&nt in e&&(ut=e[nt]||0,f[d].$RowCount=ut);f._setModelInfo_=er;f._findRootModelInfo=dt;f._saveSelections=rr;f._restoreSelections=ur;f._enableValidate_=!0;f._needValidate_=!1;f._modelLoad_=function(n){rt=n;f._fireLoad_();yt=!0};f._fireLoad_=function(){r.defer(function(){var n=f.$vm.__isModalRequery();f.$emit("Model.load",f,rt,n);f._root_.$setDirty(f._root_.$isCopy?!0:!1)})};f._fireUnload_=function(){f.$emit("Model.unload",f)};t(f,"$readOnly",gt);t(f,"$stateReadOnly",ni);t(f,"$isCopy",ii);t(f,"$mainObject",ti);f._seal_=l;f._fireGlobalPeriodChanged_=function(n){f.$emit("GlobalPeriod.change",f,n)}}return a&&k("create root time:",a,!1),f}function l(t){var u,i,r;if(Object.seal(t),t._meta_)for(u in t._meta_.props)(i=t._meta_.props[u],i.type&&(i=i.type),n.isPrimitiveCtor(i))||i!==e.constructor&&(r=t[u],n.isArray(r)?r.forEach(function(n){return l(n)}):n.isObjectExact(r)&&l(r))}function dt(){var t,n;for(t in this._meta_.props)if(n=this[t],n.$ModelInfo)return n.$ModelInfo;return null}function gt(){if("__modelInfo"in this){var t=this.__modelInfo;if(n.isDefined(t.ReadOnly)&&t.ReadOnly||n.isDefined(t.StateReadOnly)&&t.StateReadOnly)return!0}return!1}function ni(){if("__modelInfo"in this){var t=this.__modelInfo;if(n.isDefined(t.StateReadOnly)&&t.StateReadOnly)return!0}return!1}function ti(){if("$main"in this._meta_){var n=this._meta_.$main;return this[n]}return null}function ii(){if("__modelInfo"in this){var t=this.__modelInfo;if(n.isDefined(t.Copy))return t.Copy}return!1}function ri(n,t,r,f,e){var o=new ui(n?n.length:0),c=t+"[]",h,s;if(u(o,"_elem_",r),u(o,p,t),u(o,y,e),u(o,w,e._root_||e),i(o,"$valid",function(){var n,u,f;if(this._errors_)return!1;var t=!0,i=!1,r=undefined;try{for(n=this[Symbol.iterator]();!(t=(u=n.next()).done);t=!0)if(f=u.value,f._errors_)return!1}catch(e){i=!0;r=e}finally{try{!t&&n["return"]&&n["return"]()}finally{if(i)throw r;}}return!0}),i(o,"$invalid",function(){return!this.$valid}),r.prototype._meta_.$cross&&i(o,"$cross",function(){return r.prototype._meta_.$cross}),g(o,f),h=f.name+".construct",o._root_.$emit(h,o),!n)return o;for(s=0;s<n.length;s++)o[s]=new o._elem_(n[s],c,o),o[s].__checked=!1;return o}function ui(n){var t=new Array(n||0);return fi(t),t}function fi(t){nt(t);t.$new=function(n){var t=new this._elem_(n||null,this._path_+"[]",this);return t.__checked=!1,t};i(t,"$selected",function(){var t=!0,r=!1,u=undefined,n,f,i;try{for(n=this.$elements[Symbol.iterator]();!(t=(f=n.next()).done);t=!0)if(i=f.value,i.$selected)return i}catch(e){r=!0;u=e}finally{try{!t&&n["return"]&&n["return"]()}finally{if(r)throw u;}}return undefined});i(t,"$selectedIndex",function(){for(var n=0;n<this.length;n++)if(this[n].$selected)return n;return-1});i(t,"$elements",function(){function n(i){var r,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<i.length)){t.next=10;break}return u=i[r],t.next=5,u;case 5:if(!u.$items){t.next=7;break}return t.delegateYield(n(u.$items),"t0",7);case 7:r++;t.next=1;break;case 10:case"end":return t.stop()}},t[0],this)}var t=[n].map(regeneratorRuntime.mark);return n(this)});i(t,"Count",function(){return this.length});i(t,"$isEmpty",function(){return!this.length});i(t,"$checked",function(){return this.filter(function(n){return n.$checked})});i(t,"$hasSelected",function(){return!!this.$selected});t.Selected=function(n){var t=this.$selected;return t?t[n]:null};t.$isLazy=function(){var n=this.$parent._meta_,t;return n.$lazy?(t=s(this._path_),n.$lazy.indexOf(t)!==-1):!1};t.$load=function(){var n=this;this.$isLazy()&&r.defer(function(){return n.$loadLazy()})};t.$resetLazy=function(){return this.$empty(),this.$loaded&&(this.$loaded=!1),this};t.$loadLazy=function(){var n=this;return new Promise(function(t){var i,r;if(n.$loaded){t(n);return}if(!n.$parent){t(n);return}if(i=n.$parent._meta_,!i.$lazy){t(n);return}if(r=s(n._path_),!1){t(n);return}n.$vm.$loadLazy(n.$parent,r).then(function(){return t(n)})})};t.$append=function(n){return this.$insert(n,"end")};t.$prepend=function(n){return this.$insert(n,"start")};t.$insert=function(t,i,r){function e(n,t){var v=u._path_+"[].adding",o=u.$new(n),y=u._root_.$emit(v,u,o),c,l,h;if(y===!1)return null;var s=u.length,f=null,e=undefined;switch(i){case"end":s=u.push(o);f=u[s-1];break;case"start":u.unshift(o);f=u[0];s=1;break;case"above":e=u.indexOf(r);u.splice(e,0,o);f=u[e];s=e+1;break;case"below":e=u.indexOf(r)+1;u.splice(e,0,o);f=u[e];s=e+1}if("$RowCount"in u&&(u.$RowCount+=1),c=u._path_+"[].add",u._root_.$setDirty(!0),u._root_.$emit(c,u,f,s-1),t&&(f.$select(),a(u,f)),"$rowNo"in o._meta_)for(l=o._meta_.$rowNo,h=0;h<u.length;h++)u[h][l]=h+1;return f}var u=this,f;if(n.isArray(t)){if(f=function(){var i=[],n=null;return t.forEach(function(t){n=e(t,!1);i.push(n)}),n&&n.$select(),{v:i}}(),typeof f=="object")return f.v}else return e(t,!0)};t.$empty=function(){return this.$root.isReadOnly?this:(this.splice(0,this.length),"$RowCount"in this&&(this.$RowCount=0),this)};t.$renumberRows=function(){var t,i,n;if(!this.length)return this;if(t=this[0],"$rowNo"in t._meta_)for(i=t._meta_.$rowNo,n=0;n<this.length;n++)this[n][i]=n+1;return this};t.$sort=function(n){return this.sort(n),this.$renumberRows(),this};t.$clearSelected=function(){var n=this.$selected;return n?(n.$selected=!1,a(this,null),this):this};t.$remove=function(n){var t,i;return this.$root.isReadOnly?this:n?(t=this.indexOf(n),t===-1)?this:(this.splice(t,1),"$RowCount"in this&&(this.$RowCount-=1),i=this._path_+"[].remove",this._root_.$setDirty(!0),this._root_.$emit(i,this,n,t),!this.length)?this:(t>=this.length&&(t-=1),this.$renumberRows(),this.length>t&&this[t].$select(),this):this};t.$copy=function(t){if(this.$root.isReadOnly)return this;if(this.$empty(),n.isArray(t))for(var i=0;i<t.length;i++)this.push(this.$new(t[i]));return this};t.__fireChange__=function(n){var i=this.$root,t=this;n==="selected"&&(t=this.$selected);i.$emit(this._path_+"[].change",this,t)}}function nt(n){t(n,"$host",function(){return this._root_._host_});t(n,"$root",function(){return this._root_});t(n,"$parent",function(){return this._parent_});t(n,"$vm",function(){return this._root_&&this._root_._host_?this._root_._host_.$viewModel:null});t(n,"$ctrl",function(){return this._root_&&this._root_._host_?this._root_._host_.$ctrl:null});t(n,"$ready",function(){return this.$vm?!this.$vm.$isLoading:!0});n.$isValid=function(){return!0}}function ei(i,r,f){u(i.prototype,ft,r);i.prototype.$merge=rt;i.prototype.$empty=ki;i.prototype.$set=di;i.prototype.$maxLength=gi;nt(i.prototype);t(i.prototype,"$isNew",function(){return!this.$id});t(i.prototype,"$isEmpty",function(){return!this.$id});t(i.prototype,"$id",function(){var n=this._meta_.$id,t;if(!n){t=this.constructor.name;throw new Error(t+" object does not have an Id property");}return this[n]});t(i.prototype,"$id__",function(){var n=this._meta_.$id;return n?this[n]:undefined});t(i.prototype,"$name",function(){var n=this._meta_.$name,t;if(!n){t=this.constructor.name;throw new Error(t+" object does not have a Name property");}return this[n]});f&&oi(i);r.$hasChildren&&t(i.prototype,"$hasChildren",function(){var n=this._meta_.$hasChildren;return n?this[n]:undefined});r.$items&&t(i.prototype,"$items",function(){var n=this._meta_.$items;return n?this[n]:undefined});r.$permissions&&t(i.prototype,"$permissions",function(){var r=this._meta_.$permissions,t,i;return r?(t=this[r],this.$isNew&&t===0&&(i=this.$ModelInfo,i&&n.isDefined(i.Permissions)&&(t=i.Permissions)),Object.freeze({canView:!!(t&st),canEdit:!!(t&ht),canDelete:!!(t&ct),canApply:!!(t&lt),canUnapply:!!(t&at)})):undefined})}function a(n,t){var i=n._path_+"[].select",r=n._root_.$emit(i,n,t)}function oi(n){n.prototype.$remove=function(){var n=this._parent_;n.$remove(this)};n.prototype.$select=function(n){var r=n||this._parent_,i=r.$selected,t;if(i!==this&&(i&&(i.$selected=!1),this.$selected=!0,a(r,this),this._meta_.$items))for(t=this._parent_._parent_;t;)if(t.$expanded=!0,t=t._parent_._parent_,!t||t===this.$root)break};Object.defineProperty(n.prototype,"$checked",{enumerable:!0,configurable:!0,get:function(){return this.__checked},set:function(n){this.__checked=n;var t=this.$parent,i=t._path_+"[].check";t._root_.$emit(i,t,this)}})}function si(n){var r,t,u,o;if((this._enableValidate_&&(this._needValidate_||(this._needValidate_=!0)),f("emit: "+n),r=this.$template,r)&&(t=r.events,t)&&n in t){f("handle: "+n);u=t[n];for(var e=arguments.length,s=Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return o=u.call.apply(u,[this].concat(s)),o===!1&&f(n+" returns false"),o}}function hi(n){var t=this.$template;if(!t.delegates)return console.error("There are no delegates in the template"),null;if(n in t.delegates)return t.delegates[n].bind(this.$root);console.error('Delegate "'+n+'" not found in the template')}function ci(t,i,r){var f=this.$template,u;if(!f||!f.commands||(u=f.commands[t],!u))return!1;var e=r&&r.validRequired===!0,o=r&&r.checkReadOnly===!0,s=r&&r.checkArgument===!0;return s&&!i?!1:(u.checkReadOnly===!0||o)&&this.$root.$readOnly?!1:(u.validRequired===!0||e)&&!this.$root.$valid?!1:n.isFunction(u.canExec)?u.canExec.call(this,i):n.isBoolean(u.canExec)?u.canExec:n.isDefined(u.canExec)?(console.error(t+".canExec should be a function"),!1):!0}function li(t,i,r,u){var f=this,e;try{if(e=function(){var o,s,e,h,c;if(f._root_._enableValidate_=!1,o=f.$vm,s=f.$template,!s)return{v:undefined};if(!s.commands)return{v:undefined};if(e=s.commands[t],!e)return console.error('Command "'+t+'" not found'),{v:undefined};var l=e.confirm||r,a=e.saveRequired||u&&u.saveRequired,v=e.validRequired||u&&u.validRequired;if(v&&!o.$data.$valid)return{v:undefined};if(n.isFunction(e.canExec)&&!e.canExec.call(f,i))return{v:undefined};if(h=f,c=function(){var r=function(){if(n.isFunction(e))return e.call(h,i);if(n.isFunction(e.exec))return e.exec.call(h,i);console.error($(_templateObject,t))};if(l)o.$confirm(l).then(r);else return r()},a&&o.$isDirty)o.$save().then(c);else return{v:c()}}(),typeof e=="object")return e.v}finally{this._root_._enableValidate_=!0;this._root_._needValidate_=!0}}function ai(n,t,i,r){var u,f,e;return n?(u=n._root_.$template,!u)?null:(f=u.validators,!f)?null:(e=f[t],!e)?null:c.validate(e,n,i,r):null}function tt(t,i,r){if(t._errors_||r)!t._errors_&&r&&(t._errors_={});else return;return r&&r.length>0?t._errors_[i]=r:i in t._errors_&&delete t._errors_[i],n.isEmptyObject(t._errors_)&&(t._errors_=null),r}function vi(n,t,i,r){if(!n._root_._needValidate_)return n._errors_?t in n._errors_?n._errors_[t]:null:null;var u=ai(n,t,i,r);return tt(n,t,u)}function h(n,t,i,r){var c,f,o,y,e,l,u,s,a,p;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r=r||"",t){v.next=5;break}return v.next=4,{item:n,val:n[i],ix:r};case 4:return v.abrupt("return");case 5:c=t.split(".");f=n;o=0;case 8:if(!(o<c.length)){v.next=46;break}if(y=o===c.length-1,e=c[o],!e.endsWith("[]")){v.next=33;break}if(l=e.substring(0,e.length-2),l in f||console.error("Invalid validator key. Property '"+l+"' not found in '"+f.constructor.name+"'"),u=f[l],u){v.next=17;break}return v.abrupt("continue",43);case 17:s=0;case 18:if(!(s<u.length)){v.next=30;break}if(a=u[s],!y){v.next=25;break}return v.next=23,{item:a,val:a[i],ix:r+":"+s};case 23:v.next=27;break;case 25:return p=c.slice(o+1).join("."),v.delegateYield(h(a,p,i,r+":"+s),"t0",27);case 27:s++;v.next=18;break;case 30:return v.abrupt("return");case 33:if(e in f||console.error("Invalid Validator key. property '"+e+"' not found in '"+f.constructor.name+"'"),u=f[e],!y){v.next=42;break}if(!u){v.next=39;break}return v.next=39,{item:u,val:u[i],ix:r};case 39:return v.abrupt("return");case 42:f=u;case 43:o++;v.next=8;break;case 46:case"end":return v.stop()}},v[0],this)}function it(n,t){var i,r,u;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=t.lastIndexOf("."),r="",u=t,i!==-1&&(r=t.substring(0,i),u=t.substring(i+1)),f.delegateYield(h(n,r,u,""),"t0",5);case 5:case"end":return f.stop()}},v[1],this)}function yi(n,t,i){var f,l,e,r;if(i){var u=[],o=!0,s=!1,h=undefined;try{for(f=it(n,t)[Symbol.iterator]();!(o=(l=f.next()).done);o=!0)e=l.value,r=c.validate(i,e.item,e.val),tt(e.item,t,r),r&&r.length&&u.push.apply(u,_toConsumableArray(r))}catch(a){s=!0;h=a}finally{try{!o&&f["return"]&&f["return"]()}finally{if(s)throw h;}}return u.length?u:null}}function pi(){var n=this,t;return n._needValidate_=!0,t=n._validateAll_(!1),n._validateAll_(!0),t}function wi(n){var t=this,s,f,i,e,u,o;if(t._host_&&t._needValidate_&&(t._needValidate_=!1,n&&c.removeWeak(),s=r.performance.now(),f=t.$template,f)&&(i=f.validators,i)){e=[];for(u in i)o=yi(t,u,i[u]),o&&e.push({x:u,e:o});return k("validation time:",s),e}}function bi(n,t,i){this.$root.$readOnly||t&&t.toLowerCase().startsWith("query")||tr(this.$root)||t&&i&&ir(this.$root,t+"."+i)||(this.$dirty=n)}function ki(){return this.$set({}),this}function di(n){this.$root.isReadOnly||this.$merge(n)}function gi(t){var r=this._meta_.props,i;return r?(i=r[t],n.isObjectExact(i))?i.len:undefined:undefined}function nr(n,t){var i=n.$template,r=i&&i.options,u=r&&r.bindOnce;return u?u.indexOf(t)!==-1:!1}function tr(n){var t=n.$template,i=t&&t.options;return i&&i.noDirty}function ir(t,i){var u=t.$template,f=u&&u.options,r;return f?(r=f.skipDirty,!r||!n.isArray(r))?!1:r.indexOf(i)!==-1:!1}function rr(){var e=this,o=e.$template,s=o&&o.options,t,i,a,u,f;if(s&&(t=s.persistSelect,t&&t.length)){var h={},r=!0,c=!1,l=undefined;try{for(i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0)u=a.value,f=n.simpleEval(e,u),n.isArray(f)&&(h[u]=f.$selectedIndex)}catch(v){c=!0;l=v}finally{try{!r&&i["return"]&&i["return"]()}finally{if(c)throw l;}}return h}}function ur(t){var f,u,i,r;if(t){f=this;for(u in t)i=n.simpleEval(f,u),r=t[u],n.isArray(i)&&r>=0&&r<i.length&&i[r].$select()}}function rt(t,i,u){var a=this.$id__,f,e,o,h,v,y,c,l,p;try{t===null&&(t={});this._root_._enableValidate_=!1;this._lockEvents_+=1;for(f in this._meta_.props)if(!f.startsWith("$$")&&(!i||!nr(this._root_,f)))if(e=this._meta_.props[f],e.type&&(e=e.type),o=this[f],Array.isArray(o))o.$loaded&&(o.$loaded=!1),o.$copy(t[f]),"$RowCount"in o&&(h=f+".$RowCount",o.$RowCount=h in t?t[h]||0:0);else if(n.isDateCtor(e))v=t[f],v?r.set(this,f,new Date(t[f])):r.set(this,f,n.date.zero());else if(n.isPrimitiveCtor(e))r.set(this,f,t[f]);else{if(u&&!(f in t))continue;y=new e(t[f],f,this);r.set(this,f,y)}}finally{this._root_._enableValidate_=!0;this._root_._needValidate_=!0;this._lockEvents_-=1}return this.$parent._lockEvents_?this:(c=this.$id__,l=!1,n.isDefined(c)&&n.isDefined(a)&&(l=c!==a),l&&(p=this._path_+".change",this._root_.$emit(p,this.$parent,this,this,s(this._path_))),this)}function fr(n,t){var i,u,f;if(n.prototype.$emit=si,n.prototype.$setDirty=bi,n.prototype.$defer=r.defer,n.prototype.$merge=rt,n.prototype.$template=t,n.prototype._exec_=li,n.prototype._canExec_=ci,n.prototype._delegate_=hi,n.prototype._validate_=vi,n.prototype._validateAll_=wi,n.prototype.$forceValidate=pi,n.prototype.$destroy=sr,t){i={};for(u in t.properties){if(f=u.split("."),f.length!==2){console.error("invalid propery name '"+u+"'");continue}var e=f[0],o=f[1],s=t.properties[u];e in i||(i[e]={});i[e][o]=s}t._props_=i}}function ut(n){var t=n.Filter,i;return t?("Period"in t)?(i=t.Period,e.like(i)&&(t.Period=new e.constructor(i)),n):n:n}function er(n,t){if(t.$ModelInfo)for(var i in t.$ModelInfo){n||(n=this[i]);n.$ModelInfo=ut(t.$ModelInfo[i]);n.$ModelInfo.$setFilter=function(n,t){e.isPeriod(t)?this.Filter[n].assign(t):this.Filter[n]=t};return}}function or(n,t,i){var r,u;if(n.__modelInfo=t?t:{PageSize:vt},r=i.$ModelInfo,r)for(u in r)n[u].$ModelInfo=ut(r[u])}function sr(){this._host_.$viewModel=null;this._host_=null}var v=[h,it].map(regeneratorRuntime.mark),ft="_meta_",y="_parent_",et="_src_",p="_path_",w="_root_",ot="_errors_",b="#err#",st=1,ht=2,ct=4,lt=8,at=16,vt=20,r=require("std:platform"),c=require("std:validators"),n=require("std:utils"),o=require("std:log",!0),e=require("std:period"),yt=!1;app.modules["std:datamodel"]={createObject:kt,createArray:ri,defineObject:ei,implementRoot:fr,setModelInfo:or,enumData:h}}(),function(){function t(t,i,r){return n.post(t,i,r)}function i(t){return n.get(t)}var n=require("std:http"),r=require("std:utils");app.modules["std:dataservice"]={post:t,get:i}}();app.modules["std:popup"]=function(){function f(t){n.push(t)}function e(t){var i=n.indexOf(t);i!==-1&&n.splice(i,1);delete t._close}function o(){i||(i=!0,document.body.addEventListener("click",u),document.body.addEventListener("contextmenu",u),document.body.addEventListener("keydown",c))}function t(n,t){return n?n.closest(t):null}function s(){n.forEach(function(n){n._close&&n._close(document)})}function h(n){var i,t,r;if(n)for(i=n.querySelectorAll(".popover-wrapper"),t=0;t<i.length;t++)r=i[t],r._close&&r._close()}function u(i){var u,f;if(n.length!==0)for(u=0;u<n.length;u++)if(f=n[u],t(i.target,".dropdown-item")||i.target.hasAttribute("close-dropdown")||t(i.target,"[dropdown-top]")!==f){if(!f._close)throw new Error(r);f._close(i.target)}}function c(t){var i,u;if(t.which===27)for(i=0;i<n.length;i++){if(u=n[i],!u._close)throw new Error(r);u._close(t.target)}}var n=[],i=!1,r="Perhaps you forgot to create a _close function for popup element";return{startService:o,registerPopup:f,unregisterPopup:e,closeAll:s,closest:t,closeInside:h}};app.modules["std:mask"]=function(){function i(n){return n==="#"||n==="@"}function e(n){return"- ()".indexOf(n)!==-1}function w(n,i){return n==="#"?i>="0"&&i<="9"||i===t:!1}function r(n,r){for(var f,e,u="",o=0,s=0;s<n.length;s++)f=n[s],e=r[o],f===e?(u+=e,o++):i(f)?(u+=e||t,o++):u+=f;return u}function b(n,r){function s(){for(var n=undefined;;){if(n=r[c],!n)return t;if(c++,n>="0"&&n<="9")return n}}for(var u,f="",c=0,o=s(),h=0;h<n.length;h++)u=n[h],e(u)?f+=u:i(u)?(f+=o,o=s()):(f+=u,u===o&&(o=s()));return f}function k(n,r){for(var f,o,s="",u=0;u<n.length;u++)if(f=n[u],o=r[u],!e(f))if(i(f))if(o&&o!==t)s+=o;else return"";else s+=f;return s}function o(n,t){n&&(n.__opts={mask:t},n.addEventListener("keydown",l,!1),n.addEventListener("blur",a,!1),n.addEventListener("focus",v,!1),n.addEventListener("paste",y,!1))}function s(n){n&&(delete n.__opts,n.removeEventListener("keydown",l),n.removeEventListener("blur",a),n.removeEventListener("focus",v),n.removeEventListener("paste",y))}function d(n,t){n&&(t?n.__opts?(n.__opts.mask=t,n.value=r(t,"")):(o(n,t),n.value=r(t,"")):(s(n,t),n.value=""))}function h(n){return n?n.selectionStart!==undefined?(n.selectionStart!==n.selectionEnd&&n.setSelectionRange(n.selectionStart,n.selectionStart),n.selectionStart):0:0}function u(n,t,r){var o=!0,h,u;n:while(o){var f=n,e=t,s=r;if(o=!1,e>=f.length)return e+1;if(h=f[e],i(h))return e;if(s==="r"){for(u=e+1;u<f.length;u++)if(i(f[u]))return u;return f.length+1}if(s==="l"){for(u=e-1;u>=0;u--)if(i(f[u]))return u;n=f;t=0;r="r";o=!0;h=u=u=undefined;continue n}throw new Error("mask.fitCaret. Invalid fit value '"+s+"'");}}function n(n,t,i){if(n&&n.offsetWidth!==0&&n.offsetHeight!==0&&n.setSelectionRange){var r=n.__opts.mask;t=u(r,t,i);n.setSelectionRange(t,t)}}function c(n,t,i,r){if(n.setRangeText){n.setRangeText(t,i,r);return}var f=n.value,u=f.substring(0,i);u+=t;u+=f.substring(r);n.value=u}function g(t,i){if(t.which!==46)return!1;var u=i.selectionStart,f=i.selectionEnd,e=i.value.length;return u===0&&f===e?(i.value=r(i.__opts.mask,""),n(i,0,"r"),t.preventDefault(),t.stopPropagation(),!0):!1}function f(n,t){var i=h(n),r=n.__opts.mask,e,f;i=u(r,i,"r");e=r[i];w(e,t)&&(c(n,t,i,i+1),f=u(r,i+1,"r"),n.setSelectionRange(f,f))}function nt(t,i){if(t.which>=112&&t.which<=123||t.which===16||t.which===17||t.which>=112&&t.which<=123||t.which===9)return!0;if(t.which===13)return p(i),setTimeout(function(){var t="l";i.value||(i.value=r(i.__opts.mask,""),t="r");n(i,t==="r"?0:32768,t)},10),!0;if(t.ctrlKey)switch(t.which){case 86:case 67:case 65:case 88:case 90:case 45:return!0}else if(t.shiftKey)switch(t.which){case 45:case 46:case 37:case 39:case 36:case 35:return!0}return!1}function l(i){var r,u,e;if(!nt(i,this)&&(r=!1,!g(i,this))){u=h(this);e=i.which;e===229&&(e=i.target.value.charAt(i.target.selectionStart-1).charCodeAt());switch(e){case 37:n(this,u-1,"l");r=!0;break;case 39:n(this,u+1,"r");r=!0;break;case 38:case 40:case 33:case 34:r=!0;break;case 36:n(this,0,"r");r=!0;break;case 35:n(this,this.__opts.mask.length,"l");r=!0;break;case 46:f(this,t);r=!0;break;case 8:n(this,u-1,"l");f(this,t);n(this,u-1,"l");r=!0;break;default:i.key.length===1&&f(this,i.key);r=!0}r&&(i.preventDefault(),i.stopPropagation())}}function a(){p(this)}function v(){var t=this;this.value||(this.value=r(this.__opts.mask,""));setTimeout(function(){n(t,0,"r")},10)}function y(n){n.preventDefault();var t=n.clipboardData.getData("text/plain");t&&(this.value=b(this.__opts.mask,t))}function p(n){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0);n.dispatchEvent(t)}var t="_";return{getMasked:r,getUnmasked:k,mountElement:o,unmountElement:s,setMask:d}};app.modules["std:tools"]=function(){function t(t,i,r){var u={promise:null,data:{message:t,title:i,style:"alert",list:r}};return n.$emit("confirm",u),u.promise}var n=require("std:eventBus");return{alert:t}};app.modules["std:html"]=function(){function i(n){var r=n.getElementsByTagName("col"),u=n.querySelectorAll("tbody.col-shadow")[0],i,f,t,e;for(u.style.display="table-row-group",i=n.querySelectorAll("tbody.col-shadow > tr > td"),f=Math.min(r.length,i.length),t=0;t<f;t++)e=i[t].offsetWidth,r[t].setAttribute("data-col-width",e);u.style.display="none"}function r(n){for(var r,i=n.getElementsByTagName("tr"),t=0;t<i.length;t++)r=i[t].offsetHeight-12,i[t].setAttribute("data-row-height",r)}function u(n){var t=document.createElement("a");t.style="display:none";document.body.appendChild(t);t.href=n;t.setAttribute("target","_blank");t.click();document.body.removeChild(t)}function f(n){var t=document.createElement("a");t.style="display:none";document.body.appendChild(t);t.href=n;t.setAttribute("download","");t.click();document.body.removeChild(t)}function e(n,t,i){var f=URL.createObjectURL(n),r=document.createElement("a"),u;r.style="display:none";document.body.appendChild(r);u=t||"file";i=(i||"").toLowerCase();i==="excel"?u+=".xlsx":i==="pdf"&&(u+=".pdf");r.download=u;r.href=f;r.click();document.body.removeChild(r);URL.revokeObjectURL(f)}function o(i){if(window.cefHost||navigator.userAgent.toLowerCase().indexOf("firefox")>-1){window.open(i);return}t();var r=document.createElement("iframe");document.body.classList.add("waiting");r.id=n;r.style.cssText="display:none;width:0;height:0;border:none;position:absolute;left:-10000,top:-100000";document.body.appendChild(r);document.activeElement&&document.activeElement.blur();r.setAttribute("src",i);r.onload=function(){var t=r.contentWindow,n;t.document.body&&(n=t.document.createElement("input"),n.setAttribute("id","dummy-focus"),n.cssText="width:0;height:0;border:none;position:absolute;left:-10000,top:-100000",t.document.body.appendChild(n),n.focus(),t.document.body.removeChild(n));document.body.classList.remove("waiting");t.print()}}function t(){var t=window.frames[n];t&&document.body.removeChild(t)}function s(n){document.title!==n&&(document.title=n)}var n="print-direct-frame";return{getColumnsWidth:i,getRowHeight:r,downloadBlob:e,downloadUrl:f,openUrl:u,printDirect:o,removePrintFrame:t,updateDocTitle:s}};app.modules["std:routing"]=function(){function n(){return"_data"}return{dataUrl:n}};app.modules["std:accel"]=function(){function i(t){var r=""+(t.ctrlKey?"C":"_")+(t.altKey?"A":"_")+(t.shiftKey?"S":"_")+(t.metaKey?"M":"_")+":"+t.code,i=n.find(function(n){return n.accel===r});i&&i.action==="focus"&&Vue.nextTick(function(){i.elem.focus()})}function r(){if(n.length>0){if(t)return;document.addEventListener("keydown",i,!1);t=!0}else{if(!t)return;document.removeEventListener("keydown",i,!1)}}function u(t,i,u){var f=n.findIndex(function(n){return n.elem===i});f===-1&&n.push({elem:i,accel:t,action:u});r()}function f(t){var i=n.findIndex(function(n){return n.elem===t});i!==-1&&n.splice(i)}var n=[],t=!1;return{registerControl:u,unregisterControl:f}},function(){function r(n){var i=n.firstElementChild,t;i&&(t=i.__vue__,t&&!t.$marker&&(t=t.$parent),t&&t.$marker()&&t.$destroy(),n.__vue__=null)}var n=require("std:http"),t=require("std:url"),i=require("std:eventBus");Vue.component("include",{template:'<div :class="implClass"><\/div>',props:{src:String,cssClass:String,needReload:Boolean,insideDialog:Boolean,done:Function},data:function(){return{loading:!0,currentUrl:"",_needReload:!0}},methods:{loaded:function(){this.loading=!1;this.insideDialog&&i.$emit("modalCreated",this);this.done&&this.done()},requery:function(){this.currentUrl&&(this.__destroy(),n.load(this.currentUrl,this.$el).then(this.loaded)["catch"](this.error))},__destroy:function(){r(this.$el)},modalRequery:function(){var n=this;this.insideDialog&&setTimeout(function(){n.requery()},1)},error:function(n){if(n=n||"",this.insideDialog&&i.$emit("modalClose",!1),n.indexOf("UI:")===0){var t={promise:null,data:{message:n.substring(3).replace("\\n","\n"),style:"alert"}};i.$emit("confirm",t)}else alert(n)}},computed:{implClass:function(){return"include "+(this.cssClass||"")+" "+(this.loading?"loading":"")}},mounted:function(){this.src&&(this.currentUrl=this.src,n.load(this.src,this.$el).then(this.loaded)["catch"](this.error))},destroyed:function(){this.__destroy()},watch:{src:function(i,r){this.insideDialog?this.currentUrl=i:i.split("?")[0]===r.split("?")[0]?this.currentUrl=i:t.idChangedOnly(i,r)?this.currentUrl=i:t.idOrCopyChanged(i,r)?this.currentUrl=i:(this.loading=!0,this.currentUrl=i,this.__destroy(),n.load(i,this.$el).then(this.loaded)["catch"](this.error))},needReload:function(n){n&&this.requery()}}});Vue.component("a2-include",{template:'<div class="a2-include"><\/div>',props:{source:String,arg:undefined},data:function(){return{needLoad:0}},methods:{__destroy:function(){r(this.$el)},loaded:function(){},makeUrl:function(){var n=this.arg||"0";return t.combine("_page",this.source,n)},load:function(){var t=this.makeUrl();this.__destroy();n.load(t,this.$el).then(this.loaded)["catch"](this.error)}},watch:{source:function(){this.needLoad+=1},arg:function(){this.needLoad+=1},needLoad:function(){this.load()}},mounted:function(){this.source&&(this.currentUrl=this.makeUrl(this.source),n.load(this.currentUrl,this.$el).then(this.loaded)["catch"](this.error))},destroyed:function(){this.__destroy()}})}(),function(){var i=require("std:utils"),n=require("std:mask"),t=require("std:accel"),r={props:{label:String,required:Boolean,align:{type:String,"default":"left"},description:String,disabled:Boolean,tabIndex:Number,dataType:String,format:String,validatorOptions:Object,updateTrigger:String,mask:String,hideZeros:Boolean,testId:String,accel:String},computed:{path:function(){return this.item._path_+"."+this.prop},pathToValidate:function(){return this.itemToValidate._path_+"."+this.propToValidate},modelValue:function(){if(!this.item)return null;var t=this.item[this.prop];return this.dataType?i.format(t,this.dataType,{hideZeros:this.hideZeros,format:this.format}):this.mask&&t?n.getMasked(this.mask,t):t},modelValueRaw:function(){if(!this.item)return null;return this.item[this.prop]},errors:function(){var n,t;return this.item?(n=this.item._root_,!n)?null:n._validate_?(t=undefined,this.itemToValidate?n._validate_(this.itemToValidate,this.pathToValidate,this.itemToValidate[this.propToValidate],this.deferUpdate):n._validate_(this.item,this.path,this.modelValueRaw,this.deferUpdate)):null:null},inputClass:function(){var n="";return this.align&&this.align!=="left"&&(n+="text-"+this.align),this.isNegative&&(n+=" negative-red"),this.updateTrigger==="input"&&(n+=" trigger-input"),n},isNegative:function(){return(this.dataType==="Number"||this.dataType==="Currency")&&this.item&&this.modelValue<0?!0:!1},hasLabel:function(){return!!this.label},hasDescr:function(){return!!this.description},maxLength:function(){return this.item?this.item.$maxLength?this.item.$maxLength(this.prop):undefined:undefined}},mounted:function(){(this.$parent.$registerControl&&this.$parent.$registerControl(this),this.accel&&t.registerControl(this.accel,this.$refs.input,"focus"),this.mask)&&n.mountElement(this.$refs.input,this.mask)},beforeDestroy:function(){(this.$parent.$unregisterControl&&this.$parent.$unregisterControl(this),this.accel&&t.unregisterControl(this.$refs.input),this.mask)&&n.unmountElement(this.$refs.input,this.mask)},methods:{valid:function(){return!this.invalid()},invalid:function(n){var t=this.errors;return t?(n&&(n.warn=t.every(function(n){return n.severity==="warning"}),n.info=t.every(function(n){return n.severity==="info"}),n.all=t.length),t.length>0):!1},pending:function(){return this.errors&&this.errors.pending>0},cssClass:function(){var t={},i=this.invalid(t),n="control-group"+(i?" invalid":" valid");return i&&t.warn?n+=" val-warning":i&&t.info&&(n+=" val-info"),this.required&&(n+=" required"),this.disabled&&(n+=" disabled"),n},deferUpdate:function(){this.$children.forEach(function(n){return n.$forceUpdate()});this.$forceUpdate()},test:function(){alert("from base control")}},watch:{mask:function(){n.setMask(this.$refs.input,this.mask);this.updateValue&&this.updateValue(this.$refs.input.value)}}};app.components.control=r}();Vue.component("validator",{props:{invalid:Function,errors:Array,options:Object},template:'<div v-if="invalid()" class="validator" :class="cssClass" :style="cssStyle"><span v-for="err in errors" v-text="err.msg" :class="err.severity"><\/span><\/div>',computed:{cssStyle:function(){var n={};return this.options&&this.options.width&&(n.width=this.options.width),n},cssClass:function(){var n={};return this.options?(this.options.placement&&(n[this.options.placement]=!0),this.options.width&&(n["with-width"]=!0),n):n}}});Vue.component("a2-static-validator",{props:{item:{type:Object,"default":function(){return{}}},prop:String},template:'<div v-if="invalid()" class="static-validator"><span v-for="err in errors" v-text="err.msg" :class="err.severity"><\/span><\/div>',computed:{path:function(){return this.item._path_+"."+this.prop},modelValue:function(){return this.item?this.item[this.prop]:null},errors:function(){var n,t;return this.item?(n=this.item._root_,!n)?null:n._validate_?(t=undefined,n._validate_(this.item,this.path,this.modelValue,this.deferUpdate)):null:null}},methods:{invalid:function(){var n=this.errors;return n?n.length>0:!1}}}),function(){var i=require("std:utils"),t=require("std:mask"),n=component("control");Vue.component("textbox",{"extends":n,template:'<div :class="cssClass()" :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group">\n\t\t<input v-if="password" type="text" class="fake-pwd-field" />\n\t\t<input ref="input" :type="controlType" v-focus :autocomplete="autocompleteText"\n\t\t\tv-bind:value="modelValue" \n\t\t\t\tv-on:change="onChange($event.target.value)" \n\t\t\t\tv-on:input="onInput($event.target.value)"\n\t\t\t\tv-on:keypress="onKey($event)"\n\t\t\t\t:class="inputClass" :placeholder="placeholder" :disabled="disabled" :tabindex="tabIndex" :maxlength="maxLength" :spellcheck="spellCheck"/>\n\t\t<slot><\/slot>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t<\/div>\n\t<slot name="popover"><\/slot>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:{type:[Object,Array],"default":function(){return{}}},prop:String,itemToValidate:Object,propToValidate:String,placeholder:String,password:Boolean,number:Boolean,spellCheck:{type:Boolean,"default":undefined},enterCommand:Function},computed:{controlType:function(){return this.password?"password":"text"},autocompleteText:function(){return this.password?"new-password":"off"}},methods:{updateValue:function(n){this.item[this.prop]=this.mask?t.getUnmasked(this.mask,n):i.parse(n,this.dataType);var r=this.modelValue;this.$refs.input.value!==r&&(this.$refs.input.value=r,this.$emit("change",this.item[this.prop]))},onInput:function(n){this.updateTrigger==="input"&&this.updateValue(n)},onChange:function(n){this.updateTrigger!=="input"&&this.updateValue(n)},onKey:function(n){this.number&&(n.charCode<48||n.charCode>57)&&n.charCode!==45&&(n.preventDefault(),n.stopPropagation())}}});Vue.component("a2-textarea",{"extends":n,template:'<div :class="cssClass()" :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group">\n\t\t<textarea ref="input" v-focus v-auto-size="autoSize" v-bind:value="modelValue2" :style="areaStyle"\n\t\t\tv-on:change="onChange($event.target.value)" \n\t\t\tv-on:input="onInput($event.target.value)"\n\t\t\tv-on:keypress="onKey($event)"\n\t\t\t:rows="rows" :class="inputClass" :placeholder="placeholder" :disabled="disabled" :tabindex="tabIndex" :maxlength="maxLength" :spellcheck="spellCheck"/>\n\t\t<slot><\/slot>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t<\/div>\n\t<slot name="popover"><\/slot>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:{type:[Object,Array],"default":function(){return{}}},prop:String,itemToValidate:Object,propToValidate:String,placeholder:String,autoSize:Boolean,rows:Number,spellCheck:{type:Boolean,"default":undefined},enterCommand:Function,maxHeight:String},computed:{modelValue2:function(){return this.item?this.item[this.prop]:null},areaStyle:function(){return this.maxHeight?{"max-height":this.maxHeight}:undefined}},methods:{updateValue:function(n){this.item[this.prop]!==n&&(this.item[this.prop]=n,this.$emit("change",this.item[this.prop]))},onInput:function(n){this.updateTrigger==="input"&&this.updateValue(n)},onChange:function(n){this.updateTrigger!=="input"&&this.updateValue(n)},onKey:function(n){n.code==="Enter"&&n.ctrlKey&&this.enterCommand&&this.enterCommand()}},watch:{modelValue:function(){var n,t;this.autoSize&&(n=this.$refs.input,n)&&(t=document.createEvent("HTMLEvents"),t.initEvent("autosize",!1,!0),n.dispatchEvent(t))}}});Vue.component("static",{"extends":n,template:'<div :class="cssClass()" :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group static">\n\t\t<span v-focus v-text="textProp" :class="inputClass" :tabindex="tabIndex" class="static-input"/>\n\t\t<slot><\/slot>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t<\/div>\n\t<slot name="popover"><\/slot>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:{type:[Object,Array],"default":function(){return{}}},prop:String,itemToValidate:Object,propToValidate:String,text:[String,Number,Date]},computed:{textProp:function(){return this.mask&&this.text?t.getMasked(this.mask,this.text):this.text}}})}(),function(){var n=require("std:utils"),t=component("control"),i={_validate_:function(){return!0}};Vue.component("combobox",{"extends":t,template:'<div :class="cssClass()" v-lazy="itemsSource" :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group">\n\t\t<div class="select-wrapper">\n\t\t\t<div v-text="getWrapText()" class="select-text" ref="wrap" :class="wrapClass"/>\n\t\t\t<span class="caret"/>\n\t\t<\/div>\n\t\t<select v-focus v-model="cmbValue" :disabled="disabled" :tabindex="tabIndex" ref="sel" :title="getWrapText()">\n\t\t\t<slot>\n\t\t\t\t<option v-for="(cmb, cmbIndex) in itemsSource" :key="cmbIndex" \n\t\t\t\t\tv-text="getName(cmb, true)" :value="getValue(cmb)"><\/option>\n\t\t\t<\/slot>\n\t\t<\/select>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t<\/div>\n\t<slot name="popover"><\/slot>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{prop:String,item:{type:Object,"default":function(){return{}}},itemsSource:{type:Array,"default":function(){return[]}},itemToValidate:Object,propToValidate:String,nameProp:String,valueProp:String,showvalue:Boolean,align:String},computed:{cmbValue:{get:function(){return this.getComboValue()},set:function(n){this.item&&(this.item[this.prop]=n)}},wrapClass:function(){var n="";return this.align&&this.align!=="left"&&(n+="text-"+this.align),n}},methods:{getName:function(t){return this.nameProp?n.eval(t,this.nameProp):t.$name},getValue:function(t){return this.valueProp?n.eval(t,this.valueProp):t},getWrapText:function(){return this.showvalue?this.getComboValue():this.getText()},getComboValue:function(){var t=this.item?this.item[this.prop]:null,i;return n.isObjectExact(t)?(i=this.valueProp||"$id",!(i in t))?t:this.itemsSource.indexOf(t)!==-1?t:this.itemsSource.find(function(n){return n[i]===t[i]}):t},getText:function(){var i=this,t=this.getComboValue(),r;if(n.isObjectExact(t))return this.getName(t);if(this.itemsSource&&this.itemsSource.length){if(r=function(){var r=i.valueProp||"$id",n=i.itemsSource.find(function(n){return n[r]===t});return{v:n?i.getName(n):""}}(),typeof r=="object")return r.v}else return this.getOptionsText(t)},getOptionsText:function(n){var u=this.$refs.sel,t,i,r;if(!u)return"";for(t=u.options,i=0;i<t.length;i++)if(""+t[i].value==""+n)return t[i].text;return(r=u.selectedIndex,r<0||r>=t.length)?"":t[r].text}},mounted:function(){var n=this.getText();n&&(this.$refs.wrap.innerText=n)}})}(),function(){var n=require("std:utils"),t=window.$$locale;Vue.component("a2-calendar",{template:'\n<div @click.stop.prevent="dummy">\n\t<table class="calendar-pane">\n\t\t<thead><tr>\n\t\t\t\t<th class="h-btn"><a v-if="hasPrev" @click.stop.prevent="prevMonth"><i class="ico ico-triangle-left"><\/i><\/a><\/th>\n\t\t\t\t<th :colspan="isDayView ? 5 : 7" class="month-title"><span v-text="title"><\/span><\/th>\n\t\t\t\t<th class="h-btn"><a v-if="hasNext" @click.stop.prevent=\'nextMonth\'><i class="ico ico-triangle-right"><\/i><\/a><\/th>\n\t\t\t<\/tr>\n\t\t\t<tr class="weekdays" v-if="isDayView"><th v-for="d in 7" v-text="wdTitle(d)">Пн<\/th><\/tr>\n\t\t\t<tr class="weekdays" v-else><th colspan="9"><\/th><\/tr>\n\t\t<\/thead>\n\t\t<tbody v-if="isDayView">\n\t\t\t<tr v-for="row in days">\n\t\t\t\t<td v-for="day in row" :class="dayClass(day)"><a @click.stop.prevent="selectDay(day)" \n\t\t\t\t\t@mouseover="mouseOver(day)"\n\t\t\t\t\tv-text="day.getDate()" :title="dayTitle(day)"/><\/td>\n\t\t\t<\/tr>\n\t\t<\/tbody>\n\t\t<tbody v-else>\n\t\t\t<tr v-for="qr in monthes">\n\t\t\t\t<td v-for="m in qr" class="mcell" :class="monthClass(m.date)" colspan="3"><a @click.stop.prevent="selectDay(m.date)" v-text="m.name"/><\/td>\n\t\t\t<\/tr>\n\t\t<\/tbody>\n\t\t<tfoot v-if="showFooter" ><tr><td colspan="7" class="calendar-footer">\n\t\t\t<a class="today" @click.stop.prevent=\'today\' v-text=\'todayText\'><\/a><\/td><\/tr><\/tfoot>\n\t<\/table>\n<\/div>\n',props:{showToday:{type:Boolean,"default":!0},pos:String,model:Date,setMonth:Function,setDay:Function,getDayClass:Function,hover:Function,view:String},computed:{isDayView:function(){return(this.view||"day")==="day"},showFooter:function(){return this.showToday&&this.isDayView},days:function(){var n=new Date(this.model),o,t,r,u,f,e,i;for(n.setHours(0,-n.getTimezoneOffset(),0,0),o=n.getDate(),n.setDate(1),t=n.getDay()-1,t===-1?t=6:t===0&&(t=7),n.setDate(-t+1),r=[],u=0;u<6;u++){for(f=[],e=0;e<7;e++)i=new Date(n),i.setHours(0,-i.getTimezoneOffset(),0,0),f.push(new Date(i)),n.setDate(n.getDate()+1);r.push(f)}return r},monthes:function(){for(var u,i,f=[],r=0;r<4;r++){for(u=[],i=0;i<3;i++){var e=r*3+i,o=n.date.create(this.model.getFullYear(),e+1,1),s=n.text.capitalize(o.toLocaleDateString(t.$Locale,{month:"long"}));u.push({date:o,month:e+1,name:s})}f.push(u)}return f},hasPrev:function(){return this.pos!=="right"},hasNext:function(){return this.pos!=="left"},title:function(){var i=this.model.toLocaleString(t.$Locale,{month:"long",year:"numeric"});return n.text.capitalize(i)},todayText:function(){return t.$Today}},methods:{dummy:function(){},nextMonth:function(){var t=new Date(this.model);this.isDayView?t=n.date.add(t,1,"month"):t.setFullYear(t.getFullYear()+1);this.setMonth(t,this.pos)},prevMonth:function(){var t=new Date(this.model);this.isDayView?t=n.date.add(t,-1,"month"):t.setFullYear(t.getFullYear()-1);this.setMonth(t,this.pos)},wdTitle:function(n){var i=this.days[0][n-1];return i.toLocaleString(t.$Locale,{weekday:"short"})},today:function(){this.setDay(n.date.today())},selectDay:function(n){this.setDay(n,this.pos)},dayClass:function(t){var i="",r;return(t.getMonth()!==this.model.getMonth()&&(i+=" other"),this.getDayClass)?i+this.getDayClass(t):(r=n.date,r.equal(t,r.today())&&(i+=" today"),r.equal(t,this.model)&&(i+=" active"),i)},monthClass:function(n){var t="";return n.getFullYear()===this.model.getFullYear()&&n.getMonth()===this.model.getMonth()&&(t+=" active"),t},dayTitle:function(n){return n.toLocaleString(t.$Locale,{year:"numeric",month:"long",day:"numeric",weekday:"long"})},mouseOver:function(n){this.hover&&this.hover(n)}}})}(),function(){var t=require("std:popup"),n=require("std:utils"),r=require("std:eventBus"),u=component("control"),i=window.$$locale;Vue.component("a2-date-picker",{"extends":u,template:'\n<div :class="cssClass2()" class="date-picker" :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group"  @click="clickInput($event)">\n\t\t<input v-focus v-model.lazy="model" :class="inputClass" :disabled="inputDisabled"/>\n\t\t<a href @click.stop.prevent="toggle($event)"><i class="ico ico-calendar"><\/i><\/a>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t\t<div class="calendar" v-if="isOpen">\t\t\n\t\t\t<a2-calendar :model="modelDate" :view="view"\n\t\t\t\t:set-month="setMonth" :set-day="selectDay" :get-day-class="dayClass"/>\n\t\t<\/div>\n\t<\/div>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:Object,prop:String,itemToValidate:Object,propToValidate:String,align:{type:String,"default":"center"},view:String},data:function(){return{isOpen:!1}},methods:{toggle:function(){this.disabled||(this.isOpen||(r.$emit("closeAllPopups"),n.date.isZero(this.modelDate)&&(this.item[this.prop]=n.date.today())),this.isOpen=!this.isOpen)},clickInput:function(n){this.view==="month"&&(this.toggle(n),n.stopPropagation(),n.preventDefault())},setMonth:function(n){this.setDate(n)},selectDay:function(n){var t=new Date(n);t.setHours(0,-t.getTimezoneOffset(),0,0);this.setDate(t);this.isOpen=!1},setDate:function(n){var t=new Date(this.modelDate),r=t.getUTCHours(),u=t.getUTCMinutes(),i=new Date(n);i.setUTCHours(r,u);this.item[this.prop]=i},dayClass:function(t){var i="",r=n.date;return r.equal(t,r.today())&&(i+=" today"),r.equal(t,this.modelDate)&&(i+=" active"),t.getMonth()!==this.modelDate.getMonth()&&(i+=" other"),i},cssClass2:function(){var n=this.cssClass();return this.isOpen&&(n+=" open"),n},__clickOutside:function(){this.isOpen=!1}},computed:{modelDate:function(){return this.item[this.prop]},inputDisabled:function(){return this.disabled||this.view==="month"},model:{get:function(){return n.date.isZero(this.modelDate)?"":this.view==="month"?n.text.capitalize(this.modelDate.toLocaleString(i.$Locale,{timeZone:"UTC",year:"numeric",month:"long"})):this.modelDate.toLocaleString(i.$Locale,{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit"})},set:function(t){var i=n.date.parse(t);n.date.isZero(i)?(this.item[this.prop]=i,this.isOpen=!1):this.setDate(i)}}},mounted:function(){t.registerPopup(this.$el);this.$el._close=this.__clickOutside},beforeDestroy:function(){t.unregisterPopup(this.$el)}})}(),function(){var t=require("std:popup"),n=require("std:utils"),i=require("std:eventBus"),r=component("control"),u=window.$$locale,f={props:{model:Date,setHour:Function,setMinute:Function,getHourClass:Function,getMinuteClass:Function},template:'\n<div @click.stop.prevent="dummy" class="time-picker-pane calendar-pane">\n<table class="table-hours">\n<thead><tr><th colspan="6">Години<\/th><\/tr><\/thead>\n<tbody>\n\t<tr v-for="row in hours">\n\t\t<td v-for="h in row" :class="getHourClass(h)"><a @click.stop.prevent="clickHours(h)" v-text="h"/><\/td>\n\t<\/tr>\t\n<\/tbody><\/table>\n<div class="divider"/>\n<table class="table-minutes">\n<thead><tr><th colspan="3">Хвилини<\/th><\/tr><\/thead>\n<tbody>\n\t<tr v-for="row in minutes">\n\t\t<td v-for="m in row" :class="getMinuteClass(m)"><a @click.stop.prevent="clickMinutes(m)" v-text="m"/><\/td>\n\t<\/tr>\t\n<\/tbody><\/table>\n<\/div>\n',methods:{clickHours:function(n){this.setHour&&this.setHour(+n)},clickMinutes:function(n){this.setMinute&&this.setMinute(n)},dummy:function(){}},computed:{hours:function(){for(var r,t,n,u=[],i=0;i<4;i++)for(r=[],u.push(r),t=0;t<6;t++)n=i*6+t,n<10&&(n="0"+n),r.push(n);return u},minutes:function(){for(var r,t,n,u=[],i=0;i<4;i++)for(r=[],u.push(r),t=0;t<3;t++)n=(i*3+t)*5,n<10&&(n="0"+n),r.push(n);return u}}};Vue.component("a2-time-picker",{"extends":r,template:'\n<div :class="cssClass2()" class="date-picker">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group">\n\t\t<input v-focus v-model.lazy="model" :class="inputClass" :disabled="inputDisabled"/>\n\t\t<a href @click.stop.prevent="toggle($event)"><i class="ico ico-waiting-outline"><\/i><\/a>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t\t<div class="calendar" v-if="isOpen">\n\t\t\t<a2-time-sheet :model="modelDate" :set-hour="setHour" :set-minute="setMinute" :get-hour-class="hourClass" :get-minute-class="minuteClass"/>\n\t\t<\/div>\n\t<\/div>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',components:{"a2-time-sheet":f},props:{item:Object,prop:String,itemToValidate:Object,propToValidate:String,align:{type:String,"default":"center"}},data:function(){return{isOpen:!1}},methods:{toggle:function(){this.disabled||(this.isOpen||(i.$emit("closeAllPopups"),n.date.isZero(this.modelDate)&&(this.item[this.prop]=n.date.today())),this.isOpen=!this.isOpen)},setHour:function(n){var t=new Date(this.modelDate);t.setUTCHours(n);this.item[this.prop]=t},setMinute:function(n){var t=new Date(this.modelDate);t.setMinutes(n);this.item[this.prop]=t;this.isOpen=!1},hourClass:function(n){var t="";return this.modelDate.getUTCHours()===+n&&(t+=" active"),t},minuteClass:function(n){return this.modelDate.getUTCMinutes()===+n?"active":undefined},cssClass2:function(){var n=this.cssClass();return this.isOpen&&(n+=" open"),n},__clickOutside:function(){this.isOpen=!1}},computed:{modelDate:function(){return this.item[this.prop]},inputDisabled:function(){return this.disabled},model:{get:function(){var t=this.modelDate;return n.date.isZero(t)?"":t.toLocaleTimeString(u.$Locale,{timeZone:"UTC",hour:"2-digit",minute:"2-digit"})},set:function(t){var i=new Date(this.modelDate),r;t?(r=n.date.parseTime(t),i.setUTCHours(r.getHours(),r.getMinutes())):i.setUTCHours(0,0);this.item[this.prop]=i;this.isOpen=!1}}},mounted:function(){t.registerPopup(this.$el);this.$el._close=this.__clickOutside},beforeDestroy:function(){t.unregisterPopup(this.$el)}})}(),function(){var i=require("std:popup"),n=require("std:utils"),r=require("std:eventBus"),t=require("std:period"),u=component("control"),e=window.$$locale,f=150;Vue.component("a2-period-picker",{"extends":u,template:'\n<div class="control-group period-picker" @click.stop.prevent="toggle($event)" :class="{open: isOpen}">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><\/label>\n\t<div class="input-group">\n\t\t<span class="period-text" v-text="text" :class="inputClass" :tabindex="tabIndex"/>\n\t\t<span class="caret"/>\n\t\t<div class="calendar period-pane" v-if="isOpen" @click.stop.prevent="dummy">\n\t\t\t<ul class="period-menu" style="grid-area: 1 / 1 / span 2 / auto">\n\t\t\t\t<li v-for=\'(mi, ix) in menu\' :key="ix" :class="{active: isSelectedMenu(mi.key)}"><a v-text=\'mi.name\' @click.stop.prevent="selectMenu(mi.key)"><\/a><\/li>\n\t\t\t<\/ul>\n\t\t\t<a2-calendar style="grid-area: 1 / 2" :show-today="false" pos="left" :model="prevModelDate" \n\t\t\t\t:set-month="setMonth" :set-day="setDay" :get-day-class="dayClass" :hover="mouseHover"/>\n\t\t\t<a2-calendar style="grid-area: 1 / 3; margin-left:6px":show-today="false" pos="right" :model="modelDate" \n\t\t\t\t:set-month="setMonth" :set-day="setDay" :get-day-class="dayClass" :hover="mouseHover"/>\n\t\t\t<div class="period-footer" style="grid-area: 2 / 2 / auto / span 2">\n\t\t\t\t<span class="current-period" v-text="currentText" :class="{processing: selection}"/>\n\t\t\t\t<span class="aligner"><\/span>\n\t\t\t\t<button class="btn btn-primary" @click.stop.prevent="apply" v-text="locale.$Apply" :disabled="applyDisabled"/>\n\t\t\t\t<button class="btn btn-default" @click.stop.prevent="close" v-text="locale.$Cancel" />\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:Object,prop:String,showAll:{type:Boolean,"default":!0},display:String,callback:Function},data:function(){return{isOpen:!1,selection:"",modelDate:n.date.today(),currentPeriod:t.zero(),selectEnd:n.date.zero(),timerId:null}},computed:{locale:function(){return window.$$locale},text:function(){return this.display==="name"?this.period.text():this.display==="namedate"?this.period.isAllData()?this.period.text(!0):this.period.text(!0)+" ["+this.period.format("Date")+"]":this.period.format("Date")},period:function(){if(!this.item)return this.currentPeriod;var n=this.item[this.prop];return t.isPeriod(n)||console.error("PeriodPicker. Value is not a Period"),n},prevModelDate:function(){return n.date.add(this.modelDate,-1,"month")},currentText:function(){return this.currentPeriod.format("Date")},applyDisabled:function(){return this.selection==="start"},menu:function(){return t.predefined(this.showAll)}},methods:{dummy:function(){},setMonth:function(t,i){this.modelDate=i==="left"?n.date.add(t,1,"month"):t},setDay:function(t){this.selection?this.selection==="start"&&(this.currentPeriod.To=t,this.currentPeriod.normalize(),this.selection=""):(this.selection="start",this.currentPeriod.From=t,this.currentPeriod.To=n.date.zero(),this.selectEnd=n.date.zero())},dayClass:function(n){var i="",r=this.currentPeriod;return this.selection&&(r=t.create("custom",this.currentPeriod.From,this.selectEnd)),r["in"](n)&&(i+=" active"),r.From.getTime()===n.getTime()&&(i+=" period-start"),r.To.getTime()===n.getTime()&&(i+=" period-end"),i},close:function(){this.isOpen=!1},apply:function(){this.period.equal(this.currentPeriod)||(this.period.assign(this.currentPeriod),this.fireEvent());this.isOpen=!1},fireEvent:function(){var n,t;(this.callback&&this.callback(this.period),n=this.item.$root,n)&&(t=this.item._path_+"."+this.prop+".change",n.$emit(t,this.item,this.period,null))},toggle:function(){this.isOpen||(r.$emit("closeAllPopups"),this.modelDate=this.period.To,(this.modelDate.isZero()||this.modelDate.getTime()===n.date.maxDate.getTime())&&(this.modelDate=n.date.today()),this.currentPeriod.assign(this.period),this.selection="",this.selectEnd=n.date.zero());this.isOpen=!this.isOpen},__clickOutside:function(){this.isOpen=!1},isSelectedMenu:function(n){var i=t.create(n);return i.equal(this.currentPeriod)},selectMenu:function(n){var i=t.create(n);this.currentPeriod.assign(i);this.apply()},mouseHover:function(n){var t=this;this.selection&&this.selectEnd.getTime()!==n.getTime()&&(clearTimeout(this.timerId),this.timerId=setTimeout(function(){t.selectEnd=n},f))}},mounted:function(){i.registerPopup(this.$el);this.$el._close=this.__clickOutside},beforeDestroy:function(){i.unregisterPopup(this.$el)}})}(),function(){var t=require("std:popup"),n=require("std:utils"),i=require("std:platform"),r=window.$$locale,u=require("std:eventBus"),f=component("control"),e=300;Vue.component("a2-selector",{"extends":f,template:'\n<div :class="cssClass2()"  :test-id="testId">\n\t<label v-if="hasLabel"><span v-text="label"/><slot name="hint"/><slot name="link"><\/slot><\/label>\n\t<div class="input-group">\n\t\t<div v-if="isCombo" class="selector-combo" @click.stop.prevent="open"><span tabindex="-1" class="select-text" v-text="valueText" @keydown="keyDown" ref="xcombo"/><\/div>\n\t\t<input v-focus v-model="query" :class="inputClass" :placeholder="placeholder" v-else\n\t\t\t@input="debouncedUpdate" @blur.stop="blur" @keydown="keyDown" @keyup="keyUp" ref="input" \n\t\t\t:disabled="disabled" @click="clickInput($event)"/>\n\t\t<slot><\/slot>\n\t\t<a class="selector-open" href="" @click.stop.prevent="open" v-if="caret"><span class="caret"><\/span><\/a>\n\t\t<a class="selector-clear" href="" @click.stop.prevent="clear" v-if="clearVisible">&#x2715<\/a>\n\t\t<validator :invalid="invalid" :errors="errors" :options="validatorOptions"><\/validator>\n\t\t<div class="selector-pane" v-if="isOpen" ref="pane" :class="paneClass">\n\t\t\t<div class="selector-body" :style="bodyStyle">\n\t\t\t\t<slot name="pane" :items="items" :is-item-active="isItemActive" :item-name="itemName" :hit="hit" :slotStyle="slotStyle">\n\t\t\t\t\t<ul class="selector-ul">\n\t\t\t\t\t\t<li @mousedown.prevent="hit(itm)" :class="{active: isItemActive(itmIndex)}"\n\t\t\t\t\t\t\tv-for="(itm, itmIndex) in items" :key="itmIndex" v-text="itemName(itm)">}<\/li>\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/slot>\n\t\t\t<\/div>\n\t\t\t<a v-if=\'canNew\' class="create-elem a2-hyperlink a2-inline" @mousedown.stop.prevent="doNew()"><i class="ico ico-plus"/> <span v-text="newText"><\/span><\/a>\n\t\t<\/div>\n\t\t<div class="selector-pane" v-if="isOpenNew" @click.stop.prevent="dummy">\n\t\t\t<slot name="new-pane"><\/slot>\n\t\t<\/div>\n\t<\/div>\n\t<slot name="popover"><\/slot>\n\t<span class="descr" v-if="hasDescr" v-text="description"><\/span>\n<\/div>\n',props:{item:Object,prop:String,itemsSource:Array,textItem:Object,textProp:String,display:String,itemToValidate:Object,propToValidate:String,placeholder:String,delay:Number,minChars:Number,fetch:Function,hitfunc:Function,listWidth:String,listHeight:String,createNew:Function,placement:String,caret:Boolean,hasClear:Boolean,mode:String},data:function(){return{isOpen:!1,isOpenNew:!1,loading:!1,items:[],query:"",filter:"",current:-1}},computed:{valueText:function(){var i,t;return this.item?this.hasText&&(i=this.item[this.prop],i.$isEmpty)?this.textItem[this.textProp]:(t=this.item[this.prop],n.isNumber(t)&&this.itemsSource&&(t=this.itemsSource.find(function(n){return n.$id===t}),!t))?"":n.simpleEval(t,this.display):""},canNew:function(){return!!this.createNew},clearVisible:function(){if(!this.hasClear)return!1;var t=this.item[this.prop];return t&&n.isDefined(t)&&!t.$isEmpty},hasText:function(){return!!this.textProp},newText:function(){return r.$CreateLC+' "'+this.query+'"'},pane:function(){return{items:this.items,isItemActive:this.isItemActive,itemName:this.itemName,hit:this.hit}},paneClass:function(){if(this.placement)return"panel-"+this.placement},bodyStyle:function(){var n={};return this.listWidth&&(n.minWidth=this.listWidth),this.listHeight&&(n.maxHeight=this.listHeight),n},slotStyle:function(){var n={};return this.listWidth&&(n.width=this.listWidth,n.minWidth=this.listWidth),this.listHeight&&(n.maxHeight=this.maxHeight),n},debouncedUpdate:function(){var t=this,i=this.delay||e;return n.debounce(function(){t.current=-1;t.filter=t.query;t.update()},i)},isCombo:function(){return this.mode==="combo-box"||this.mode==="hyperlink"}},watch:{valueText:function(){if(this.hasText){var n=this.item[this.prop];n.$isEmpty||(this.textItem[this.textProp]="")}this.query=this.valueText}},methods:{dummy:function(){},__clickOutside:function(){this.isOpen=!1;this.isOpenNew=!1},cssClass2:function(){var n=this.cssClass();return(this.isOpen||this.isOpenNew)&&(n+=" open"),this.mode==="hyperlink"?n+=" selector-hyperlink":this.mode==="combo-box"&&(n+=" selector-combobox"),n},isItemActive:function(n){return n===this.current},itemName:function(t){return n.simpleEval(t,this.display)},blur:function(){var t=this.query,n;this.hasText&&t!==this.valueText&&(n=this.item[this.prop],n&&n.$empty&&n.$empty(),this.textItem[this.textProp]=t);this.cancel()},open:function(){var n,t;this.isOpen||(u.$emit("closeAllPopups"),this.doFetch(this.valueText,!0),this.isCombo?(n=this.$refs.xcombo,n&&n.focus()):(t=this.$refs.input,t&&t.focus()));this.isOpen=!this.isOpen},cancel:function(){this.query=this.valueText;this.isOpen=!1},keyUp:function(n){this.isOpen&&n.which===27?(n.preventDefault(),n.stopPropagation(),this.cancel()):n.which===13&&this.hasText&&this.blur()},clickInput:function(n){this.caret&&!this.isOpen&&(n.stopPropagation(),n.preventDefault(),this.open())},keyDown:function(n){if(!this.isOpen){n.which===115&&this.open();return}n.stopPropagation();switch(n.which){case 27:n.preventDefault();break;case 13:if(this.current===-1)return;this.hit(this.items[this.current]);break;case 40:n.preventDefault();this.current+=1;this.current>=this.items.length&&(this.current=0);this.query=this.itemName(this.items[this.current]);this.scrollIntoView();break;case 38:n.preventDefault();this.current-=1;this.current<0&&(this.current=this.items.length-1);this.query=this.itemName(this.items[this.current]);this.scrollIntoView();break;case 115:this.cancel();break;default:return}},hit:function(t){var r=this,u=this.item[this.prop];this.query=this.valueText;this.isOpen=!1;this.isOpenNew=!1;this.$nextTick(function(){if(r.hitfunc){r.hitfunc.call(r.item.$root,t);return}u&&u.$merge?u.$merge(t,!0):n.isNumber(u)?r.item[r.prop]=t.$id:i.set(r.item,r.prop,t)})},clear:function(){this.query="";this.isOpen=!1;this.isOpenNew=!1;var n=this.item[this.prop];n.$empty&&n.$empty()},scrollIntoView:function(){var n=this;this.$nextTick(function(){var i=n.$refs.pane,t;i&&(t=i.querySelector(".active"),t)&&t.scrollIntoView(!1)})},update:function(){var n=this.query||"",t=+(this.minChars||0);if(!t||!(n.length<t)){if(this.isOpen=!0,this.isOpenNew=!1,n===""){this.clear();return}this.doFetch(n,!1)}},doFetch:function(t,i){var r=this,f,u;if(this.itemsSource&&(f=function(){r.items.length||(r.items=r.itemsSource);var t=-1,i=r.item[r.prop];return t=n.isNumber(i)?r.items.findIndex(function(n){return n.Id===i}):r.items.indexOf(i),t!==-1&&(r.current=t,setTimeout(function(){return r.scrollIntoView()},10)),{v:undefined}}(),typeof f=="object"))return f.v;this.loading=!0;u=this.fetchData(t,i);u.then?u.then(function(n){r.loading=!1;var t=Object.keys(n)[0];r.items=n[t]})["catch"](function(){r.items=[]}):n.isArray(u)&&(this.items=u)},fetchData:function(n,t){t=t||!1;var i=this.item[this.prop];return"$vm"in i||(i.$vm=this.$root),this.fetch.call(this.item.$root,i,n,t)},doNew:function(){if(this.isOpen=!1,this.createNew){var n=this.item[this.prop],t={elem:n,text:this.query};this.createNew(t)}}},mounted:function(){t.registerPopup(this.$el);this.query=this.valueText;this.$el._close=this.__clickOutside},beforeDestroy:function(){t.unregisterPopup(this.$el)}})}(),function(){var n=require("std:utils"),t=require("std:log"),i=require("std:eventBus"),r=window.$$locale,u={name:"data-grid-column",template:'\n<th :class="cssClass" @click.prevent="doSort">\n\t<div class="h-fill" v-if="fixedHeader" v-text="headerText">\n\t<\/div><div class="h-holder">\n\t\t<slot>{{headerText}}<\/slot>\n\t<\/div>\n<\/th>\n',props:{header:String,content:String,dataType:String,hideZeros:Boolean,format:String,icon:String,bindIcon:String,id:String,align:{type:String,"default":"left"},editable:{type:Boolean,"default":!1},noPadding:{type:Boolean,"default":!1},validate:String,sort:{type:Boolean,"default":undefined},sortProp:String,small:{type:Boolean,"default":undefined},bold:String,mark:String,controlType:String,width:String,fit:Boolean,wrap:String,command:Object},created:function(){this.$parent.$addColumn(this)},destroyed:function(){this.$parent.$removeColumn(this)},computed:{sortProperty:function(){return this.sortProp||this.content},dir:function(){return this.$parent.sortDir(this.sortProperty)},fixedHeader:function(){return this.$parent.fixedHeader},isSortable:function(){return this.sortProperty?typeof this.sort=="undefined"?this.$parent.isGridSortable:this.sort:!1},isUpdateUrl:function(){return!this.$root.inDialog},template:function(){return this.id?this.$parent.$scopedSlots[this.id]:null},classAlign:function(){return this.align!=="left"?(" text-"+this.align).toLowerCase():""},cssClass:function(){var n=this.classAlign;return this.isSortable&&(n+=" sort",this.dir&&(n+=" "+this.dir)),n},headerText:function(){return this.header||" "},evalOpts:function(){return{hideZeros:this.hideZeros,format:this.format}}},methods:{doSort:function(){this.isSortable&&this.$parent.doSort(this.sortProperty)},cellCssClass:function(t,i){function f(i,u){if(i)if(i==="true")r+=u;else if(i.startsWith("{")){var f=i.substring(1,i.length-1);n.simpleEval(t,f)&&(r+=u)}}var r=this.classAlign,u;return this.mark&&(u=t[this.mark],u&&(r+=" "+u)),i&&this.controlType!=="checkbox"&&(r+=" cell-editable"),this.wrap&&(r+=" "+this.wrap),this.small&&(r+=" small"),f(this.bold," bold"),r.trim()}}};Vue.component("data-grid-column",u);var f={functional:!0,name:"data-grid-cell",props:{row:Object,col:Object,index:Number},render:function(t,i){function s(t,i){if(n.isBoolean(t)||n.isNumber(t)||n.isObjectExact(t))return t;if(t=t||"",t==="this")t=u;else if(t.startsWith("{"))if(t=t.substring(1,t.length-1),t.indexOf(".")!==-1)t=n.eval(u,t);else{if(!(t in u))throw new Error("Property '"+t+"' not found in "+u.constructor.name+" object");t=u[t]}else t&&i&&(t=n.eval(u,t,r.dataType,r.evalOpts));return t}function b(t){if(t.dataType==="Number"||t.dataType==="Currency"){var i=n.eval(u,t.content,t.dataType,t.evalOpts,!0);if(i<0)return!0}return!1}var e="td",u=i.props.row,r=i.props.col,w=i.props.index,f={"class":r.cellCssClass(u,r.editable||r.noPadding)},c={props:{row:u,col:r}},l,a,v,y,h;if(r.template)return l=r.template(c.props),t(e,f,[l]);if(r.controlType==="validator")return a={props:["item","col"],template:'<span><i v-if="item.$invalid" class="ico ico-error"><\/i><\/span>'},f["class"]={"cell-validator":!0},t(e,f,[t(a,{props:{item:u,col:r}})]);if(!r.content&&!r.icon&&!r.bindIcon)return t(e,f);if(v={props:["path","item"],template:'<validator :path="path" :item="item"><\/validator>'},y={props:{path:r.validate,item:u}},r.command&&(h=function(){var o=s(r.command.arg1,!1),i=s(r.command.arg2,r.command.eval),h=s(r.command.arg3,!1),l=r.command.arg4,a={props:["row","col"],template:'<a @click.prevent="doCommand($event)" :href="getHref()"><i v-if="hasIcon" :class="iconClass" class="ico"><\/i><span v-text="eval(row, col.content, col.dataType, col.evalOpts)"><\/span><\/a>',computed:{hasIcon:function(){return r.icon||r.bindIcon},iconClass:function(){var t=r.content?"":" ico-single";return r.bindIcon?"ico-"+n.eval(u,r.bindIcon)+t:r.icon?"ico-"+r.icon+t:null}},methods:{doCommand:function(){r.command.cmd(o,i,h,l)},eval:n.eval,getHref:function(){if(!r.command||r.command.isDialog||r.command.cmd.name.indexOf("$exec")!==-1)return null;var t=i;return n.isObjectExact(i)&&(t=i.$id),o+"/"+t}}};return{v:t(e,f,[t(a,c)])}}(),typeof h=="object"))return h.v;if(r.content==="$index")return t(e,f,[w+1]);var k=n.eval(u,r.content,r.dataType,r.evalOpts),o=[t("span",{"class":{"dg-cell":!0,"negative-red":b(r)}},k)],p=r.content?"":" ico-single";return r.icon?o.unshift(t("i",{"class":"ico ico-"+r.icon+p})):r.bindIcon&&o.unshift(t("i",{"class":"ico ico-"+n.eval(u,r.bindIcon)+p})),r.validate&&o.push(t(v,y)),t(e,f,o)}},e={name:"data-grid-row",template:'\n<tr @click="rowSelect(row)" :class="rowClass()" v-on:dblclick.prevent="doDblClick" ref="tr" @mousedown="mouseDown(row)">\n\t<td v-if="isMarkCell" class="marker">\n\t\t<div :class="markClass"><\/div>\n\t<\/td>\n\t<td v-if="detailsMarker" class="details-marker" @click.prevent="toggleDetails">\n\t\t<i v-if="detailsIcon" class="ico" :class="detailsExpandClass" />\n\t<\/td>\n\t<data-grid-cell v-for="(col, colIndex) in cols" :key="colIndex" :row="row" :col="col" :index="index" />\n<\/tr>',components:{"data-grid-cell":f},props:{row:Object,cols:Array,index:Number,mark:String,group:Boolean,level:Number,isItemActive:Function,hitItem:Function},computed:{isMarkCell:function(){return this.$parent.isMarkCell},detailsMarker:function(){return this.$parent.isRowDetailsCell},detailsIcon:function(){if(!this.detailsMarker)return!1;var n=this.$parent.rowDetailsVisible;return n===!1?!0:n&&this.row[n]},detailsExpandClass:function(){return this.row._uiprops_.$details?"ico-minus-circle":"ico-plus-circle"},totalColumns:function(){console.error("implement me")},markClass:function(){return this.mark?this.row[this.mark]:""}},methods:{rowClass:function(){var n="dg-row",t=this.isItemActive?this.isItemActive(this.index):!!this.row.$selected;return t&&(n+=" active"),this.$parent.isMarkRow&&this.mark&&(n+=" "+this.row[this.mark]),(this.index+1)%2&&(n+=" even"),this.$parent.rowBold&&this.row[this.$parent.rowBold]&&(n+=" bold"),this.level&&(n+=" lev-"+this.level),n.trim()},rowSelect:function(n){n.$select&&n.$select()},mouseDown:function(n){this.hitItem&&this.hitItem(n)},doDblClick:function(n){(n.stopImmediatePropagation(),this.$parent.doubleclick)&&(window.getSelection().removeAllRanges(),this.$parent.doubleclick())},toggleDetails:function(){this.detailsIcon&&Vue.set(this.row._uiprops_,"$details",!this.row._uiprops_.$details)}}},o={name:"data-grid-row-details",template:'\n<tr v-if="visible()" class="row-details">\n\t<td v-if="isMarkCell" class="marker">\n\t\t<div :class="markClass"><\/div>\n\t<\/td>\n\t<td :colspan=\'totalCols\' class="details-cell">\n\t\t<div class="details-wrapper"><slot><\/slot><\/div>\n\t<\/td>\n<\/tr>\n',props:{cols:Number,row:Object,mark:String},computed:{isMarkCell:function(){return this.$parent.isMarkCell},markClass:function(){return this.mark?this.row[this.mark]:""},detailsMarker:function(){return this.$parent.isRowDetailsCell},totalCols:function(){return this.cols+(this.isMarkCell?1:0)+(this.detailsMarker?1:0)}},methods:{visible:function(){return this.$parent.isRowDetailsCell?this.row._uiprops_.$details?!0:!1:this.row===this.$parent.selected()}}};Vue.component("data-grid",{props:{"items-source":[Object,Array],border:Boolean,grid:String,striped:Boolean,fixedHeader:Boolean,hideHeader:Boolean,hover:{type:Boolean,"default":!1},compact:Boolean,sort:Boolean,routeQuery:Object,mark:String,filterFields:String,markStyle:String,rowBold:String,doubleclick:Function,groupBy:[Array,Object,String],rowDetails:Boolean,rowDetailsActivate:String,rowDetailsVisible:[String,Boolean],isItemActive:Function,hitItem:Function,emptyPanelCallback:Function,testId:String},template:'\n<div v-lazy="itemsSource" :class="{\'data-grid-container\':true, \'fixed-header\': fixedHeader, \'bordered\': border}" :test-id="testId">\n\t<div class="data-grid-header-border" v-if="fixedHeader" />\n\t<div :class="{\'data-grid-body\': true, \'fixed-header\': fixedHeader}">\n\t<div class="data-grid-empty" v-if="$isEmpty">\n\t\t<slot name="empty" />\n\t<\/div>\n\t<table :class="cssClass">\n\t\t<colgroup>\n\t\t\t<col v-if="isMarkCell" class="fit"/>\n\t\t\t<col v-if="isRowDetailsCell" class="fit" />\n\t\t\t<col v-bind:class="columnClass(col)" v-bind:style="columnStyle(col)" v-for="(col, colIndex) in columns" :key="colIndex"><\/col>\n\t\t<\/colgroup>\n\t\t<thead>\n\t\t\t<tr v-show="isHeaderVisible">\n\t\t\t\t<th v-if="isMarkCell" class="marker"><div v-if="fixedHeader" class="h-holder">&#160;<\/div><\/th>\n\t\t\t\t<th v-if="isRowDetailsCell" class="details-marker"><div v-if="fixedHeader" class="h-holder">&#160;<\/div><\/th>\n\t\t\t\t<slot><\/slot>\n\t\t\t<\/tr>\n\t\t<\/thead>\n\t\t<template v-if="isGrouping">\n\t\t\t<tbody>\n\t\t\t\t<template v-for="(g, gIndex) of $groups">\n\t\t\t\t\t<tr v-if="isGroupGroupVisible(g)" :class="\'group lev-\' + g.level" :key="gIndex">\n\t\t\t\t\t\t<td @click.prevent=\'toggleGroup(g)\' :colspan="groupColumns">\n\t\t\t\t\t\t<span :class="{expmark: true, expanded: g.expanded}" />\n\t\t\t\t\t\t<span class="grtitle" v-text="groupTitle(g)" />\n\t\t\t\t\t\t<span v-if="isGroupCountVisible(g)" class="grcount" v-text="g.count" /><\/td>\n\t\t\t\t\t<\/tr>\n\t\t\t\t\t<template v-for="(row, rowIndex) in g.items">\n\t\t\t\t\t\t<data-grid-row v-show="isGroupBodyVisible(g)" :group="true" :level="g.level" :cols="columns" :row="row" :key="gIndex + \':\' + rowIndex" :index="rowIndex" :mark="mark" ref="row" />\n\t\t\t\t\t\t<data-grid-row-details v-if="rowDetails" v-show="isGroupBodyVisible(g)" :cols="columns.length" :row="row" :key="\'rd:\' + gIndex + \':\' + rowIndex" :mark="mark">\n\t\t\t\t\t\t\t<slot name="row-details" :row="row"><\/slot>\n\t\t\t\t\t\t<\/data-grid-row-details>\n\t\t\t\t\t<\/template>\n\t\t\t\t<\/template>\n\t\t\t<\/tbody>\n\t\t<\/template>\n\t\t<template v-else>\n\t\t\t<tbody>\n\t\t\t\t<template v-for="(item, rowIndex) in $items">\n\t\t\t\t\t<data-grid-row :cols="columns" :row="item" :key="rowIndex" :index="rowIndex" :mark="mark" ref="row" :is-item-active="isItemActive" :hit-item="hitItem"/>\n\t\t\t\t\t<data-grid-row-details v-if="rowDetails" :cols="columns.length" :row="item" :key="\'rd:\' + rowIndex" :mark="mark">\n\t\t\t\t\t\t<slot name="row-details" :row="item"><\/slot>\n\t\t\t\t\t<\/data-grid-row-details>\n\t\t\t\t<\/template>\n\t\t\t<\/tbody>\n\t\t<\/template>\n\t\t<slot name="footer"><\/slot>\n\t<\/table>\n\t<\/div>\n<\/div>\n',components:{"data-grid-row":e,"data-grid-row-details":o},data:function(){return{columns:[],clientItems:null,clientGroups:null,localSort:{dir:"asc",order:""}}},computed:{$items:function(){return this.clientItems?this.clientItems:this.itemsSource},isMarkCell:function(){return this.markStyle==="marker"||this.markStyle==="both"},isRowDetailsCell:function(){return this.rowDetails&&this.rowDetailsActivate==="cell"},isMarkRow:function(){return this.markStyle==="row"||this.markStyle==="both"},isHeaderVisible:function(){return!this.hideHeader},cssClass:function(){var n="data-grid";return this.grid&&(n+=" grid-"+this.grid.toLowerCase()),this.striped&&(n+=" striped"),this.hover&&(n+=" hover"),this.compact&&(n+=" compact"),n},isGridSortable:function(){return!!this.sort},isLocal:function(){return!this.$parent.sortDir},isGrouping:function(){return this.groupBy},groupColumns:function(){return this.columns.length+(this.isMarkCell?1:0)+(this.isRowDetailsCell?1:0)},$groupCount:function(){return n.isString(this.groupBy)?this.groupBy.split("-").length:n.isObjectExact(this.groupBy)?1:this.groupBy.length},$groups:function(){function a(n,t,i,r){var f,u,o,e,s;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:h.t0=regeneratorRuntime.keys(n);case 1:if((h.t1=h.t0()).done){h.next=17;break}if(f=h.t1.value,!(f==="items")){h.next=5;break}return h.abrupt("continue",1);case 5:return u=n[f],o=u.items?u.items.length:0,r&&(r.c+=o),e={group:f,p0:t,expanded:!0,level:i,items:u.items||null,count:o},h.next=11,e;case 11:if(n.items){h.next=15;break}return s={c:0},h.delegateYield(a(u,e,i+1,s),"t2",14);case 14:e.count+=s.c;case 15:h.next=1;break;case 17:case"end":return h.stop()}},yt[0],this)}var yt=[a].map(regeneratorRuntime.mark),o,nt,tt,h,ut,c,st,ht,i,l,vt,e;this.doSortLocally();var pt=performance.now(),b={},u=this.groupBy;if(n.isString(u)){var k=[],v=!0,d=!1,g=undefined;try{for(o=u.split("-")[Symbol.iterator]();!(v=(nt=o.next()).done);v=!0)tt=nt.value,k.push({prop:tt.trim(),count:!0})}catch(s){d=!0;g=s}finally{try{!v&&o["return"]&&o["return"]()}finally{if(d)throw g;}}u=k}else n.isObjectExact(u)&&(u=[u]);if(!this.$items)return null;var y=!0,it=!1,rt=undefined;try{for(h=this.$items[Symbol.iterator]();!(y=(ut=h.next()).done);y=!0){var ft=ut.value,f=b,p=!0,et=!1,ot=undefined;try{for(c=u[Symbol.iterator]();!(p=(st=c.next()).done);p=!0)ht=st.value,i=n.eval(ft,ht.prop),n.isDate(i)&&(i=n.format(i,"Date")),n.isDefined(i)||(i=""),i===""&&(i=r.$Unknown||"Unknown"),i in f||(f[i]={}),f=f[i]}catch(s){et=!0;ot=s}finally{try{!p&&c["return"]&&c["return"]()}finally{if(et)throw ot;}}f.items||(f.items=[]);f.items.push(ft)}}catch(s){it=!0;rt=s}finally{try{!y&&h["return"]&&h["return"]()}finally{if(it)throw rt;}}var ct=[],w=!0,lt=!1,at=undefined;try{for(l=a(b,null,1)[Symbol.iterator]();!(w=(vt=l.next()).done);w=!0)e=vt.value,e.source=u[e.level-1],e.source.expanded===!1&&(e.expanded=!1),ct.push(e)}catch(s){lt=!0;at=s}finally{try{!w&&l["return"]&&l["return"]()}finally{if(lt)throw at;}}return this.clientGroups=ct,t.time("datagrid grouping time:",pt),this.clientGroups},$isEmpty:function(){if(!this.itemsSource)return!1;var n=this.itemsSource.$ModelInfo;return n?"HasRows"in n?this.itemsSource.length?!1:n.HasRows===!1:this.itemsSource.length===0:!1}},watch:{localSort:{handler:function(){this.handleSort()},deep:!0},"itemsSource.length":function(){this.handleSort()},$isEmpty:function(n){this.emptyPanelCallback&&this.emptyPanelCallback.call(this.$root.$data,n)}},methods:{selected:function(){var n=this.itemsSource;return n.$origin&&(n=n.$origin),n.$selected},$addColumn:function(n){this.columns.push(n)},$removeColumn:function(n){var t=this.columns.indexOf(n);t!==-1&&this.columns.splice(t,1)},columnClass:function(t){var i="";return(t.fit||t.controlType==="validator")&&(i+="fit"),n.isDefined(t.dir)&&(i+=" sorted"),i},columnStyle:function(t){return{width:n.isDefined(t.width)?t.width:undefined}},doSort:function(n){this.isLocal?this.localSort.order===n?this.localSort.dir=this.localSort.dir==="asc"?"desc":"asc":this.localSort={order:n,dir:"asc"}:this.$parent.$emit("sort",n)},sortDir:function(n){return this.isLocal?this.localSort.order===n?this.localSort.dir:undefined:this.$parent.sortDir(n)},doSortLocally:function(){if(this.isLocal&&this.localSort.order){var u=performance.now(),n=this.localSort.dir==="desc",i=this.localSort.order,r=[].concat(this.itemsSource);r.sort(function(t,r){var u=t[i],f=r[i];return u===f?0:u<f?n?1:-1:n?-1:1});t.time("datagrid sorting time:",u);this.clientItems=r}},handleSort:function(){this.isGrouping?this.clientGroups=null:this.doSortLocally()},toggleGroup:function(n){n.expanded=!n.expanded},isGroupCountVisible:function(t){return t&&t.source&&n.isDefined(t.source.count)?t.source.count:!0},isGroupGroupVisible:function(n){if(!n.group)return!1;if(!n.p0)return!0;for(var t=n.p0;t;){if(!t.expanded)return!1;t=t.p0}return!0},isGroupBodyVisible:function(n){if(!n.expanded)return!1;for(var t=n.p0;t;){if(!t.expanded)return!1;t=t.p0}return!0},groupTitle:function(n){return n.source&&n.source.title?n.source.title.replace("{Value}",n.group).replace("{Count}",n.count):n.group},expandGroups:function(n){var i=!0,u=!1,f=undefined,t,e,r;try{for(t=this.$groups[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)r=e.value,r.expanded=r.level<n}catch(o){u=!0;f=o}finally{try{!i&&t["return"]&&t["return"]()}finally{if(u)throw f;}}},__invoke__test__:function(n){if((n=n||{},n.target==="datagrid")&&n.testId===this.testId)switch(n.action){case"selectRow":this.$items.forEach(function(t){t.$id.toString()===n.id&&(t.$select(),n.result="success")})}}},updated:function(){var i=this.itemsSource,n,t,r;i&&(n=i.$selectedIndex,t=this.$refs.row,n!==-1&&t&&n<t.length&&(r=t[n].$refs.tr,r.scrollIntoViewCheck()))},mounted:function(){this.testId&&i.$on("invokeTest",this.__invoke__test__)},beforeDestroy:function(){this.testId&&i.$off("invokeTest",this.__invoke__test__)}})}(),function(){var n=window.$$locale,t=require("std:eventBus");Vue.component("a2-pager",{props:{source:Object,emptyText:String,templateText:String},computed:{pages:function(){return Math.ceil(this.count/this.source.pageSize)},currentPage:function(){return Math.ceil(this.offset/this.source.pageSize)+1},title:function(){return this.count?this.textString:this.emptyString},emptyString:function(){return this.emptyText?this.emptyText:n.$NoElements},textString:function(){var t=Math.min(this.count,this.offset+this.source.pageSize);return this.templateText?this.templateText.replace(/\#\[Start\]/g,this.offset+1).replace(/\#\[End\]/g,t).replace(/\#\[Count\]/g,this.count):n.$PagerElements+": <b>"+(this.offset+1)+"<\/b>-<b>"+t+"<\/b> "+n.$Of+" <b>"+this.count+"<\/b>"},offset:function(){return+this.source.offset},count:function(){return+this.source.sourceCount}},methods:{setOffset:function(n){var i=this;(n=+n,this.offset!==n)&&(t.$emit("closeAllPopups"),this.$nextTick(function(){return i.source.$setOffset(n)}))},isActive:function(n){return n===this.currentPage},click:function(n,t){t.preventDefault();switch(n){case"prev":this.setOffset(this.offset-this.source.pageSize);break;case"next":this.setOffset(this.offset+this.source.pageSize)}},goto:function(n,t){t.preventDefault();var i=(n-1)*this.source.pageSize;this.setOffset(i)}},render:function(n){var f=this,i,u,e;if(this.source.pageSize!==-1){var t=[],o={"class":"a2-pager-dots"},r=function(t){return n("button",{domProps:{innerText:t},on:{click:function(n){return f.goto(t,n)}},"class":{active:f.isActive(t)}})};for(t.push(n("button",{on:{click:function(n){return f.click("prev",n)}},attrs:{disabled:this.offset===0,"aria-label":"Previous page"}},[n("i",{"class":"ico ico-chevron-left"})])),this.pages>0&&t.push(r(1)),this.pages>1&&t.push(r(2)),i=Math.max(this.currentPage-2,3),u=Math.min(i+5,this.pages-1),u-i<5&&(i=Math.max(u-5,3)),i>3&&t.push(n("span",o,"...")),e=i;e<u;++e)t.push(r(e));return u<this.pages-1&&t.push(n("span",o,"...")),this.pages>3&&t.push(r(this.pages-1)),this.pages>2&&t.push(r(this.pages)),t.push(n("button",{on:{click:function(n){return f.click("next",n)}},attrs:{disabled:this.currentPage>=this.pages,"aria-label":"Next Page"}},[n("i",{"class":"ico ico-chevron-right"})])),t.push(n("span",{"class":"a2-pager-divider"})),t.push(n("span",{"class":"a2-pager-title",domProps:{innerHTML:this.title}})),n("div",{"class":"a2-pager"},t)}}})}();Vue.component("popover",{template:'\n<div v-dropdown class="popover-wrapper" :style="{top: top}" :class="{show: isShowHover}">\n\t<span toggle class="popover-title" v-on:mouseover="mouseover" v-on:mouseout="mouseout"><i v-if="hasIcon" :class="iconClass"><\/i> <span :title="title" v-text="content"><\/span><slot name="badge"><\/slot><\/span>\n\t<div class="popup-body" :style="{width: width, left:offsetLeft}">\n\t\t<div class="arrow" :style="{left:offsetArrowLeft}"/>\n\t\t<div v-if="visible">\n\t\t\t<include :src="popoverUrl"/>\n\t\t<\/div>\n\t\t<slot />\n\t<\/div>\n<\/div>\n',data:function(){return{state:"hidden",hoverstate:!1,popoverUrl:""}},props:{icon:String,url:String,content:[String,Number],title:String,width:String,top:String,hover:Boolean,offsetX:String},computed:{hasIcon:function(){return!!this.icon},offsetLeft:function(){return this.offsetX||undefined},offsetArrowLeft:function(){return this.offsetX&&this.offsetX.indexOf("-")===0?"calc("+this.offsetX.substring(1)+" + 6px)":undefined},iconClass:function(){var n="ico po-ico";return this.icon&&(n+=" ico-"+this.icon),n},visible:function(){return this.url&&this.state==="shown"},isShowHover:function(){return this.hover&&this.hoverstate?"show":undefined}},methods:{mouseover:function(){this.hover&&(this.hoverstate=!0)},mouseout:function(){this.hover&&(this.hoverstate=!1)}},mounted:function(){var n=this;this.$el._show=function(){n.state="shown";n.url&&(n.popoverUrl="/_popup"+n.url)};this.$el._hide=function(){n.state="hidden";n.popoverUrl=""}}}),function(){var n=require("std:utils"),t=require("std:eventBus"),i=require("std:platform"),r={name:"tree-item",template:'\n<li @click.stop.prevent="doClick(item)" :title="title"\n    :class="{expanded: isExpanded, collapsed:isCollapsed, active:isItemSelected, folder:isFolder, group: isItemGroup}" >\n    <div :class="{overlay:true, \'no-icons\': !options.hasIcon}">\n        <a class="toggle" v-if="isFolder" href @click.stop.prevent="toggle"><\/a>\n        <span v-else class="toggle"/>\n        <i v-if="options.hasIcon" :class="iconClass"/>\n        <a v-if="hasLink(item)" :href="dataHref" tabindex="-1" v-text="item[options.label]" :class="{\'no-wrap\':!options.wrapLabel }"/>\n        <span v-else v-text="item[options.label]" :class="{\'tv-folder\':true, \'no-wrap\':!options.wrapLabel}"/>\n    <\/div>\n    <ul v-if="isFolder" v-show="isExpanded">\n        <tree-item v-for="(itm, index) in item[options.subitems]" :options="options"\n            :key="index" :item="itm" :click="click" :get-href="getHref" :is-active="isActive" :expand="expand" :root-items="rootItems"/>\n    <\/ul>   \n<\/li>\n',props:{item:Object,options:Object,rootItems:Array,click:Function,expand:Function,isActive:Function,isGroup:Function,getHref:Function},methods:{isFolderSelect:function(t){var i=this.options.folderSelect;return n.isFunction(i)?i(t):!!this.options.folderSelect},doClick:function(n){t.$emit("closeAllPopups");this.isFolder&&!this.isFolderSelect(n)?this.toggle():this.options.isDynamic?n.$select(this.rootItems):this.click(n)},hasLink:function(n){return!this.isFolder||this.isFolderSelect(n)},toggle:function(){(t.$emit("closeAllPopups"),this.isFolder)&&(this.expandItem(!this.item.$expanded),this.options.isDynamic&&this.expand&&this.expand(this.item,this.options.subitems))},expandItem:function(n){i.set(this.item,"$expanded",n)},openElem:function(){this.isFolder&&(this.expandItem(!0),this.isDynamic&&this.expand&&this.expand(this.item,this.options.subitems))}},computed:{isFolder:function(){if(this.options.isDynamic&&n.isDefined(this.item.$hasChildren)&&this.item.$hasChildren)return!0;if(n.isDefined(this.options.isFolder))return this.item[this.options.isFolder];var t=this.item[this.options.subitems];return t&&t.length},isExpanded:function(){return this.isFolder&&this.item.$expanded},isCollapsed:function(){return this.isFolder&&!this.item.$expanded},title:function(){var n=this.item[this.options.title];return n||(n=this.item[this.options.label]),n},isItemSelected:function(){return this.options.isDynamic?this.item.$selected:this.isActive?this.isActive&&this.isActive(this.item):!1},isItemGroup:function(){var t=this.options?this.options.isGroup:undefined;return t?n.eval(this.item,t):this.isGroup&&this.isGroup(this.item)},iconClass:function(){var n=this.options.staticIcons,t;return n?"ico ico-"+(this.isFolder?n[0]:n[1]):this.options.icon?(t=this.item[this.options.icon],t?"ico ico-"+(t||"empty"):""):undefined},dataHref:function(){return this.getHref?this.getHref(this.item):""}},watch:{isItemSelected:function(n){n&&this.$el.scrollIntoViewCheck&&this.$el.scrollIntoViewCheck()}},updated:function(){if(this.options.isDynamic&&this.item.$expanded&&this.item.$hasChildren){var n=this.item[this.options.subitems];n.$loaded||this.expandItem(!1)}}};Vue.component("tree-view",{components:{"tree-item":r},template:'\n<ul class="tree-view">\n    <tree-item v-for="(itm, index) in items" :options="options" :get-href="getHref"\n        :item="itm" :key="index"\n        :click="click" :is-active="isActive" :is-group="isGroup" :expand="expand" :root-items="items">\n    <\/tree-item>\n<\/ul>\n        ',props:{options:Object,items:Array,isActive:Function,isGroup:Function,click:Function,expand:Function,autoSelect:String,getHref:Function,expandFirstItem:Boolean},computed:{isSelectFirstItem:function(){return this.autoSelect==="first-item"}},watch:{items:function(){this.doExpandFirst()}},methods:{selectFirstItem:function(){var n,t;this.isSelectFirstItem&&(n=this.items,n.length)&&(t=n[0],t.$select&&t.$select(this.items))},doExpandFirst:function(){var n=this;this.expandFirstItem&&this.$nextTick(function(){n.$children&&n.$children.forEach(function(n){n&&n.openElem&&n.openElem()})})}},created:function(){this.selectFirstItem();this.doExpandFirst()},updated:function(){this.options.isDynamic&&this.isSelectFirstItem&&!this.items.$selected&&this.selectFirstItem()}})}(),function(){function t(n,t){if(!n)return undefined;var i=n.$ModelInfo;return i?i[t]:undefined}function i(n,t,i){if(n){var r=n.$ModelInfo;r&&(r[t]=i)}}function o(t){var f={dir:t.dir,order:t.order,offset:t.offset,group:t.GroupBy},u,i;for(u in t.filter)i=t.filter[u],r.isPeriod(i)?f[u]=i.format("DateUrl"):n.isDate(i)?f[u]=n.format(i,"DateUrl"):n.isObjectExact(i)?("Id"in i||console.error("The object in the Filter does not have Id property"),f[u]=i.Id?i.Id:undefined):f[u]=i?i:undefined;return f}function f(t,i){var u,f;if(t)for(u in i)u in t&&(f=i[u],r.isPeriod(f)?i[u]=f.fromUrl(t[u]):n.isDate(f)?i[u]=n.date.tryParse(t[u]):n.isObjectExact(f)?f.Id=t[u]:i[u]=n.isNumber(f)?+t[u]:t[u])}var e=require("std:log",!0),n=require("std:utils"),r=require("std:period"),u=require("std:eventBus"),s=20;Vue.component("collection-view",{template:'\n<div>\n\t<slot :ItemsSource="pagedSource" :Pager="thisPager" :Filter="filter">\n\t<\/slot>\n<\/div>\n',props:{ItemsSource:Array,initialPageSize:Number,initialFilter:Object,initialSort:Object,runAt:String,filterDelegate:Function},data:function(){var n=Object.assign({},{offset:0,dir:"asc",order:""},this.initialFilter);return{filter:this.initialFilter,filteredCount:0,localQuery:n}},computed:{pageSize:function(){return this.initialPageSize>0?this.initialPageSize:-1},dir:function(){return this.localQuery.dir},offset:function(){return this.localQuery.offset},order:function(){return this.localQuery.order},pagedSource:function(){var t=this,i=performance.now(),n=[].concat(this.ItemsSource);return this.filterDelegate&&(n=n.filter(function(n){return t.filterDelegate(n,t.filter)})),this.order&&this.dir&&function(){var i=t.order,r=t.dir==="asc";n.sort(function(n,t){return n[i]===t[i]?0:n[i]<t[i]?r?-1:1:r?1:-1})}(),this.filteredCount=n.length,this.pageSize>0&&(n=n.slice(this.offset,this.offset+this.pageSize)),n.$origin=this.ItemsSource,n.indexOf(n.$origin.$selected)===-1&&n.$origin.$clearSelected(),e&&e.time("get paged source:",i),n},sourceCount:function(){return this.ItemsSource.length},thisPager:function(){return this},pages:function(){var n=this.filteredCount;return Math.ceil(n/this.pageSize)}},methods:{$setOffset:function(n){this.localQuery.offset=n},sortDir:function(n){return n===this.order?this.dir:undefined},doSort:function(n){var t=this.makeNewQuery();t.order===n?t.dir=t.dir==="asc"?"desc":"asc":(t.order=n,t.dir="asc");t.order||(t.dir=null);this.localQuery.dir=t.dir;this.localQuery.order=t.order},makeNewQuery:function(){return o(this)},copyQueryToLocal:function(n){var t,i;for(t in n)i=n[t],this.localQuery[t]=t==="offset"?n[t]:i?i:undefined}},created:function(){this.initialSort&&(this.localQuery.order=this.initialSort.order,this.localQuery.dir=this.initialSort.dir);this.$on("sort",this.doSort)}});Vue.component("collection-view-server",{template:'\n<div>\n\t<slot :ItemsSource="ItemsSource" :Pager="thisPager" :Filter="filter" :ParentCollectionView="parentCw">\n\t<\/slot>\n<\/div>\n',props:{ItemsSource:Array,initialFilter:Object,persistentFilter:Array},data:function(){return{filter:this.initialFilter,lockChange:!0}},watch:{jsonFilter:{handler:function(){this.filterChanged()}}},computed:{jsonFilter:function(){return n.toJson(this.filter)},thisPager:function(){return this},pageSize:function(){return t(this.ItemsSource,"PageSize")},dir:function(){return t(this.ItemsSource,"SortDir")},order:function(){return t(this.ItemsSource,"SortOrder")},offset:function(){return t(this.ItemsSource,"Offset")},pages:function(){return cnt=this.sourceCount,Math.ceil(cnt/this.pageSize)},sourceCount:function(){return this.ItemsSource?this.ItemsSource.$RowCount||0:0},parentCw:function(){for(var n=this.$parent;n&&n.$options&&n.$options._componentTag&&!n.$options._componentTag.startsWith("collection-view-server");)n=n.$parent;return n}},methods:{$setOffset:function(n){this.offset!==n&&(i(this.ItemsSource,"Offset",n),this.reload())},sortDir:function(n){return n===this.order?this.dir:undefined},doSort:function(n){if(n===this.order){var t=this.dir==="asc"?"desc":"asc";i(this.ItemsSource,"SortDir",t)}else i(this.ItemsSource,"SortOrder",n),i(this.ItemsSource,"SortDir","asc");this.reload()},filterChanged:function(){var r,t,c,e,v,u,o,w,f;if(!this.lockChange){if(r=this.ItemsSource.$ModelInfo,r?this.ItemsSource.$ModelInfo.Filter=this.filter:(r={Filter:this.filter},this.ItemsSource.$ModelInfo=r),this.persistentFilter&&this.persistentFilter.length){t=this.ItemsSource._path_;c=t.lastIndexOf(".");t=t.substring(c+1);var s=!0,l=!1,a=undefined;try{for(e=this.ItemsSource.$parent.$parent[Symbol.iterator]();!(s=(v=e.next()).done);s=!0)if(u=v.value,u[t].$ModelInfo){var h=!0,y=!1,p=undefined;try{for(o=this.persistentFilter[Symbol.iterator]();!(h=(w=o.next()).done);h=!0)f=w.value,n.isEqual(u[t].$ModelInfo.Filter[f],this.filter[f])||(u[t].$ModelInfo.Filter[f]=this.filter[f],u[t].$loaded=!1)}catch(b){y=!0;p=b}finally{try{!h&&o["return"]&&o["return"]()}finally{if(y)throw p;}}}else u[t].$ModelInfo=r}catch(b){l=!0;a=b}finally{try{!s&&e["return"]&&e["return"]()}finally{if(l)throw a;}}}"Offset"in r&&i(this.ItemsSource,"Offset",0);this.reload()}},reload:function(){this.$root.$emit("cwChange",this.ItemsSource)},updateFilter:function(){var r=this,i=this.ItemsSource?this.ItemsSource.$ModelInfo:null,n,t;if(i&&(n=i.Filter,n)){this.lockChange=!0;for(t in this.filter)t in n&&(this.filter[t]=n[t]);this.$nextTick(function(){r.lockChange=!1})}},__setFilter:function(n){this.ItemsSource===n.source&&(r.isPeriod(n.value)?this.filter[n.prop].assign(n.value):this.filter[n.prop]=n.value)}},created:function(){var t=this,n=this.ItemsSource?this.ItemsSource.$ModelInfo:null;n&&f(n.Filter,this.filter);this.$nextTick(function(){t.lockChange=!1});this.$on("sort",this.doSort);u.$on("setFilter",this.__setFilter)},updated:function(){this.updateFilter()},beforeDestroy:function(){u.$off("setFilter",this.__setFilter)}});Vue.component("collection-view-server-url",{store:component("std:store"),template:'\n<div>\n\t<slot :ItemsSource="ItemsSource" :Pager="thisPager" :Filter="filter" :Grouping="thisGrouping">\n\t<\/slot>\n<\/div>\n',props:{ItemsSource:Array,initialFilter:Object,initialGroup:Object},data:function(){return{filter:this.initialFilter,GroupBy:"",lockChange:!0}},watch:{jsonFilter:{handler:function(){this.filterChanged()}},GroupBy:{handler:function(){this.filterChanged()}}},computed:{jsonFilter:function(){return n.toJson(this.filter)},pageSize:function(){var n=t(this.ItemsSource,"PageSize");return n?n:s},dir:function(){var n=this.$store.getters.query.dir;return n||(n=t(this.ItemsSource,"SortDir")),n},offset:function(){var i=this.$store.getters.query.offset;return n.isDefined(i)||(i=t(this.ItemsSource,"Offset")),i||0},order:function(){return t(this.ItemsSource,"SortOrder")},sourceCount:function(){return this.ItemsSource?this.ItemsSource.$RowCount||0:0},thisPager:function(){return this},thisGrouping:function(){return this},pages:function(){return cnt=this.sourceCount,Math.ceil(cnt/this.pageSize)},Filter:function(){return this.filter}},methods:{commit:function(n){this.$store.commit("setquery",n)},sortDir:function(n){return n===this.order?this.dir:undefined},$setOffset:function(n){this.offset!==n&&(i(this.ItemsSource,"Offset",n),this.commit({offset:n}))},doSort:function(n){var t=this.makeNewQuery();t.order===n?t.dir=t.dir==="asc"?"desc":"asc":(t.order=n,t.dir="asc");t.order||(t.dir=null);this.commit(t)},makeNewQuery:function(){return o(this)},filterChanged:function(){if(!this.lockChange){var n=this.makeNewQuery();n.offset=0;n.order||(n.dir=undefined);this.commit(n)}},__setFilter:function(n){this.ItemsSource===n.source&&(r.isPeriod(n.value)?this.filter[n.prop].assign(n.value):this.Filter[n.prop]=n.value)}},created:function(){var i=this,n=this.ItemsSource.$ModelInfo,t;n&&(f(n.Filter,this.filter),n.GroupBy&&(this.GroupBy=n.GroupBy));t=this.$store.getters.query;f(t,this.filter);this.$nextTick(function(){i.lockChange=!1});this.$on("sort",this.doSort);u.$on("setFilter",this.__setFilter)},beforeDestroy:function(){u.$off("setFilter",this.__setFilter)}})}(),function(){var i=require("std:url"),r=require("std:http"),n=require("std:tools"),t=window.$$locale;Vue.component("a2-upload",{template:'\n<label :class="cssClass" @dragover="dragOver" @dragleave="dragLeave">\n\t<input v-if=\'canUpload\' type="file" @change="uploadImage" v-bind:multiple="isMultiple" :accept="accept" />\n\t<i class="ico" :class="icoClass"><\/i>\n\t<span class="upload-tip" v-text="tip" v-if="tip"><\/span>\n<\/label>\n\t\t',props:{item:Object,prop:String,base:String,newItem:Boolean,tip:String,readOnly:Boolean,accept:String,limit:Number},data:function(){return{hover:!1}},computed:{cssClass:function(){return"file-upload"+(this.hover?" hover":"")},isMultiple:function(){return!!this.newItem},canUpload:function(){return!this.readOnly},icoClass:function(){return this.accept==="image/*"?"ico-image":"ico-upload"}},methods:{dragOver:function(n){this.hover=!0;n.preventDefault()},dragLeave:function(n){this.hover=!1;n.preventDefault()},checkLimit:function(n){if(!this.limit)return!1;var t=n.size/1024;return t>this.limit},uploadImage:function(u){var f=this,y=window.$$rootUrl,p=this.item[this.prop],w=i.combine(y,"_image",this.base,this.prop,p),h=new FormData,s=!0,c=!1,l=undefined,e,a,o,v;try{for(e=u.target.files[Symbol.iterator]();!(s=(a=e.next()).done);s=!0){if(o=a.value,this.checkLimit(o)){u.target.value="";v=t.$FileTooLarge.replace("{0}",this.limit);n.alert(v);return}h.append("file",o,o.name)}}catch(b){c=!0;l=b}finally{try{!s&&e["return"]&&e["return"]()}finally{if(c)throw l;}}r.upload(w,h).then(function(n){var t,o,s,h;if(u.target.value="",n.status==="OK")if(f.newItem){var c=f.item.$parent,i=!0,r=!1,e=undefined;try{for(t=n.ids[Symbol.iterator]();!(i=(o=t.next()).done);i=!0)s=o.value,h=c.$append(),h[f.prop]=s}catch(l){r=!0;e=l}finally{try{!i&&t["return"]&&t["return"]()}finally{if(r)throw e;}}}else f.item[f.prop]=n.ids[0]})["catch"](function(t){t.indexOf("UI:")===0?n.alert(t.substring(3).replace("\\n","\n")):alert(t)})}}});Vue.component("a2-simple-upload",{template:'\n<label class="a2-simple-upload" :class="labelClass">\n\t<i class="ico" :class=\'icon\'><\/i>\n\t<input type="file" @change="uploadChange" ref="file"/>\n\t<span v-text="labelText" class="upload-text"><\/span>\n\t<button class="btnclose" @click.prevent="clear" v-if="file">&#x2715;<\/button>\n<\/label>\n\t\t',props:{item:Object,prop:String,text:String},data:function(){return{}},computed:{labelText:function(){return this.file?this.file.name:this.text||t.$ChooseFile},icon:function(){return this.file&&this.file.name?"ico-file":"ico-attach"},file:function(){return this.item?this.item[this.prop]:null},labelClass:function(){return this.file?"has-file":undefined}},methods:{fireChange:function(){},clear:function(){this.item&&(this.item[this.prop]=null,this.fireChange(),this.$refs.file.value="")},uploadChange:function(n){var t=n.target.files;this.item[this.prop]=t[0];this.fireChange()}}})}(),function(){var n=require("std:utils");Vue.component("a2-tab-item",{name:"a2-tab-item",template:'\n<div class="tab-item" v-show="isActive">\n\t<slot />\n<\/div>\n',props:{header:String,badge:[String,Number,Object],icon:String,tabStyle:String,show:undefined,itemToValidate:Object,propToValidate:String},data:function(){return{controls:[]}},computed:{hasIcon:function(){return!!this.icon},hasBadge:function(){return!!this.badge},iconCss:function(){return this.icon?"ico ico-"+this.icon:""},isActive:function(){return this===this.$parent.activeTab},tabCssClass:function(){return(this.isActive?"active ":"")+(this.tabStyle||"")},isVisible:function(){return typeof this.show=="boolean"?this.show:!0}},methods:{isInvalid:function(){var n,u,f;if(!this.controls.length)return!1;var t=!0,i=!1,r=undefined;try{for(n=this.controls[Symbol.iterator]();!(t=(u=n.next()).done);t=!0)if(f=u.value,f.invalid())return!0}catch(e){i=!0;r=e}finally{try{!t&&n["return"]&&n["return"]()}finally{if(i)throw r;}}return!1},$registerControl:function(n){this.controls.push(n)},$unregisterControl:function(n){var t=this.controls.indexOf(n);t!==-1&&this.controls.splice(t,1)}},created:function(){this.$parent.$addTab(this)},destroyed:function(){this.$parent.$removeTab(this)}});Vue.component("a2-tab-panel",{template:'\n<div class="tab-panel">\n\t<template v-if="static">\n\t\t<ul class="tab-header">\n\t\t\t<li :class="tab.tabCssClass" v-for="(tab, tabIndex) in tabs" :key="tabIndex" @click.prevent="select(tab)" v-show="tab.isVisible">\n\t\t\t\t<i v-if="tab.hasIcon" :class="tab.iconCss" ><\/i>\n\t\t\t\t<span v-text="tab.header"><\/span><span class="badge" v-if="tab.hasBadge" v-text="tab.badge"><\/span>\n\t\t\t\t<i v-if="tab.isInvalid()" class="ico ico-error-outline"/>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t<slot name="title" />\n\t\t<div class="tab-content" :class="contentCssClass">\n\t\t\t<slot />\n\t\t<\/div>\n\t<\/template>\n\t<template v-else>\n\t\t<ul class="tab-header">\n\t\t\t<li :class="{active: isActiveTab(item)}" v-for="(item, tabIndex) in items" :key="tabIndex" @click.prevent="select(item)" v-show="item.isVisible">\n\t\t\t\t<slot name="header" :item="item" :index="tabIndex" :number="tabIndex + 1">\n\t\t\t\t\t<span v-text="defaultTabHeader(item, tabIndex)"><\/span> \n\t\t\t\t<\/slot>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t<slot name="title" />\n\t\t<div class="tab-content">\n\t\t\t<div class="tab-item" v-if="isActiveTab(item)" v-for="(item, tabIndex) in items" :key="tabIndex">\n\t\t\t\t<slot name="items" :item="item" :index="tabIndex" />\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/template>\n<\/div>\n',props:{items:Array,header:String},data:function(){return{tabs:[],activeTab:null}},computed:{"static":function(){return!this.items},contentCssClass:function(){return this.activeTab?this.activeTab.tabStyle:""}},watch:{items:function(n,t){var i=this.items;n.length<t.length?(this._index>=i.length&&(this._index=i.length-1),this.select(i[this._index])):n.length===t.length?i.length>0&&this.select(i[0]):this.select(i[i.length-1])}},methods:{select:function(n){this.activeTab=n;this.items&&(this._index=this.items.indexOf(n))},nextTab:function(){alert("next")},prevTab:function(){alert("prev")},isActiveTab:function(n){return n===this.activeTab},defaultTabHeader:function(n,t){return"Tab "+(t+1)},$addTab:function(n){this.tabs.push(n)},$removeTab:function(n){var t=this.tabs.indexOf(n);t!==-1&&(this.tabs.splice(t,1),this.tabs.indexOf(this.activeTab)===-1&&this.tabs.length>0&&this.select(this.tabs[0]))}},mounted:function(){this.tabs.length>0?this.activeTab=this.tabs[0]:this.items&&this.items.length&&(this.activeTab=this.items[0]);this._index=0}})}(),function(){var n=require("std:utils"),i=require("std:eventBus"),t=window.$$locale;Vue.component("a2-list",{template:'\n<ul class="a2-list" v-lazy="itemsSource">\n\t<template v-if="itemsSource">\n\t\t<li class="a2-list-item" tabindex="1" :class="cssClass(listItem)" v-for="(listItem, listItemIndex) in source" :key="listItemIndex" \n\t\t\t\t@mousedown.prevent="select(listItem)" @keydown="keyDown" \n\t\t\t\tref="li">\n\t\t\t<span v-if="listItem.__group" v-text="listItem.__group"><\/span>\n\t\t\t<slot name="items" :item="listItem" v-if="!listItem.__group"/>\n\t\t<\/li>\n\t\t<div class="list-empty" v-if="$isEmpty">\n\t\t\t<slot name="empty" />\n\t\t<\/div>\n\t<\/template>\n\t<template v-else>\n\t\t<slot />\n\t<\/template>\n<\/ul>\n',props:{itemsSource:Array,autoSelect:String,mark:String,markStyle:String,command:Function,selectable:{type:Boolean,"default":!0},hover:{type:Boolean,"default":!0},groupBy:String},computed:{selectedSource:function(){var n=this.itemsSource;return n?(n.$origin&&(n=n.$origin),n.$selected):null},source:function(){var f,v,h,e,i,u,o,b,k;if(!this.groupBy)return this.itemsSource;var r={},s=!0,l=!1,a=undefined;try{for(f=this.itemsSource[Symbol.iterator]();!(s=(v=f.next()).done);s=!0)h=v.value,i=n.eval(h,this.groupBy),n.isDate(i)&&(i=n.format(i,"Date")),n.isDefined(i)||(i=""),i===""&&(i=t.$Unknown||"Unknown"),i in r||(r[i]={group:i,items:[]}),r[i].items.push(h)}catch(y){l=!0;a=y}finally{try{!s&&f["return"]&&f["return"]()}finally{if(l)throw a;}}e=[];for(i in r){u=r[i];e.push(Object.assign({},u,{__group:u.group,__count:u.items.length}));var c=!0,p=!1,w=undefined;try{for(o=u.items[Symbol.iterator]();!(c=(b=o.next()).done);c=!0)k=b.value,e.push(k)}catch(y){p=!0;w=y}finally{try{!c&&o["return"]&&o["return"]()}finally{if(p)throw w;}}}return e},$isEmpty:function(){return this.itemsSource&&this.itemsSource.length===0}},methods:{cssClass:function(t){var i=this,r=function(t){if(!i.mark)return"";var r=n.eval(t,i.mark);return i.markStyle==="row"?r+=" no-marker":i.markStyle==="marker"&&(r+=" no-background"),r};return this.groupBy&&t.__group?"group"+(this.mark?" mark":""):(t.$selected?"active ":" ")+r(t)},select:function(n){this.selectable&&n.$select&&n.$select()},selectStatic:function(){alert("yet not implemented");console.dir(this)},selectFirstItem:function(){var u=this,t,i,r;if(this.autoSelect&&this.selectable&&(t=this.itemsSource,!t.$selected)&&t&&t.length){if(this.autoSelect==="first-item"){i=t[0];this.select(i);return}if(this.autoSelect==="last-item"){i=t[t.length-1];this.select(i);return}if(this.autoSelect==="item-id"&&(r=function(){var r=u.$root.$modelInfo.Id,i;if(!n.isDefined(r))return console.error("Id not found in Root.modelInfo"),{v:undefined};i=t.find(function(n){return n.$id===r});i||(console.error("Element with id="+r+" not found"),i=t[0]);i&&u.select(i)}(),typeof r=="object"))return r.v}},keyDown:function(t){var i=this,r=function(n){var t=undefined;(t=i.itemsSource.indexOf(i.selectedSource),t!==-1)&&(t+=n,t!==-1)&&t<i.itemsSource.length&&i.select(i.itemsSource[t])};switch(t.which){case 38:r(-1);break;case 40:r(1);break;case 36:break;case 35:break;case 33:break;case 34:break;case 13:n.isFunction(this.command)&&this.command();break;default:return}t.preventDefault();t.stopPropagation()}},created:function(){this.selectFirstItem()},updated:function(){var t,n;(!this.selectedSource&&this.autoSelect&&this.selectFirstItem(),t=this.itemsSource,t)&&(n=this.$refs.li,n)&&setTimeout(function(){var t=n.findIndex(function(n){return n.classList.contains("active")});t!==-1&&n&&t<n.length&&n[t].scrollIntoViewCheck()},0)}})}(),function(){var t=require("std:eventBus"),n=window.$$locale,r=require("std:utils"),u={inserted:function(n,t){var i=n.closest(".modal-window"),r;if(i){t.value.width&&(i.style.width=t.value.width);r=t.value.cssClass;switch(r){case"modal-large":i.style.width="800px";break;case"modal-small":i.style.width="300px"}t.value.minWidth&&(i.style.minWidth=t.value.minWidth)}}},f={inserted:function(n){function f(n){t.down=!0;t.offset.x=n.pageX;t.offset.y=n.pageY;var f=window.getComputedStyle(i);t.init.x=Number.parseFloat(f.marginLeft);t.init.y=Number.parseFloat(f.marginTop);t.init.cx=Number.parseFloat(f.width);t.init.cy=Number.parseFloat(f.height);document.addEventListener("mouseup",r,!1);document.addEventListener("mousemove",u,!1)}function r(){t.down=!1;document.removeEventListener("mouseup",r);document.removeEventListener("mousemove",u)}function u(n){if(t.down){var e=n.pageX-t.offset.x,o=n.pageY-t.offset.y,r=t.init.x+e,u=t.init.y+o,f=window.innerWidth-t.init.cx,s=window.innerHeight-t.init.cy;u<0&&(u=0);r<0&&(r=0);r>f&&(r=f);i.style.marginLeft=r+"px";i.style.marginTop=u+"px"}}var i=n.closest(".modal-window"),t;i&&(t={down:!1,init:{x:0,y:0,cx:0,cy:0},offset:{x:0,y:0}},n.addEventListener("mousedown",f,!1))}},i;Vue.directive("drag-window",f);Vue.directive("modal-width",u);i={template:'\n<div class="modal-window modal-animation-window" @keydown.tab="tabPress" :class="mwClass">\n\t<include v-if="isInclude" class="modal-body" :src="dialog.url" :done="loaded" :inside-dialog="true"><\/include>\n\t<div v-else class="modal-body">\n\t\t<div class="modal-header" v-drag-window><span v-text="title"><\/span><button ref=\'btnclose\' class="btnclose" @click.prevent="modalClose(false)">&#x2715;<\/button><\/div>\n\t\t<div :class="bodyClass">\n\t\t\t<i v-if="hasIcon" :class="iconClass" />\n\t\t\t<div class="modal-body-content">\n\t\t\t\t<div v-html="messageText()" />\n\t\t\t\t<ul v-if="hasList" class="modal-error-list">\n\t\t\t\t\t<li v-for="(itm, ix) in dialog.list" :key="ix" v-text="itm"/>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class="modal-footer">\n\t\t\t<button class="btn btn-default" v-for="(btn, index) in buttons"  :key="index" @click.prevent="modalClose(btn.result)" v-text="btn.text"/>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n',props:{dialog:Object},data:function(){return{modalCreated:!1,keyUpHandler:function(n){n.which===27&&(t.$emit("modalClose",!1),n.stopPropagation(),n.preventDefault())}}},methods:{modalClose:function(n){t.$emit("modalClose",n)},loaded:function(){},messageText:function(){return r.text.sanitize(this.dialog.message)},tabPress:function(n){function r(){for(var t=document.querySelectorAll(".modal-body [tabindex]"),i=[],n=0;n<t.length;n++)i.push({el:t[n],ti:+t[n].getAttribute("tabindex")});return i.sort(function(n,t){return n.ti>t.ti})}if(this._tabElems===undefined&&(this._tabElems=r()),this._tabElems&&this._tabElems.length){var u=n.shiftKey,i=this._tabElems.length-1,f=this._tabElems[i].ti,e=document.activeElement,t=+e.getAttribute("tabindex");if(t===0){n.preventDefault();return}u?t===1&&(n.preventDefault(),this._tabElems[i].el.focus()):t===f&&(n.preventDefault(),this._tabElems[0].el.focus())}},__modalRequery:function(){alert("requery")}},computed:{isInclude:function(){return!!this.dialog.url},mwClass:function(){return this.modalCreated?"loaded":null},hasIcon:function(){return!!this.dialog.style},title:function(){return this.dialog.title?this.dialog.title:this.dialog.style==="confirm"?n.$Confirm:this.dialog.style==="info"?n.$Message:n.$Error},bodyClass:function(){return"modal-body "+(this.dialog.style||"")},iconClass:function(){var n=this.dialog.style;return n==="info"&&(n="info-blue"),"ico ico-"+n},hasList:function(){return this.dialog.list&&this.dialog.list.length},buttons:function(){var t=this.dialog.okText||n.$Ok,i=this.dialog.cancelText||n.$Cancel;return this.dialog.buttons?this.dialog.buttons:this.dialog.style==="alert"?[{text:t,result:!0,tabindex:1}]:this.dialog.style==="info"?[{text:t,result:!0,tabindex:1}]:[{text:t,result:!0,tabindex:2},{text:i,result:!1,tabindex:1}]}},created:function(){document.addEventListener("keyup",this.keyUpHandler);document.activeElement&&document.activeElement.blur()},mounted:function(){var n=this;setTimeout(function(){n.modalCreated=!0},50)},destroyed:function(){document.removeEventListener("keyup",this.keyUpHandler)}};app.components["std:modal"]=i}(),function(){var n={template:'<div class="wait-cursor" v-if="visible"><div class="spinner"/><\/div>',props:{ready:Boolean},computed:{visible:function(){return!this.ready}}};Vue.component("wait-cursor",n)}(),function(){var n=require("std:eventBus"),t=window.$$locale;Vue.component("a2-wizard-panel",{template:'\n<div class="wizard-panel" :style="panelStyle">\n\t<ul class="wizard-header">\n\t\t<li v-for="(p, px) in pages" :class="pageClass(p)" @click.prevent="selectPage(p)">\n\t\t\t<a><span class="wizard-header-title" v-text="p.header"/><span class="wizard-header-descr" v-text="p.descr"><\/span><i v-if="p.errorIcon" class="ico ico-error-outline"><\/i><\/a>\n\t\t<\/li>\n\t<\/ul>\n\t<div class="wizard-content">\n\t\t<slot />\n\t<\/div>\n\t<div class="modal-footer">\n\t\t<template v-if="helpLink">\n\t\t\t<a class="btn-help" rel="help" :href="helpLink" @click.prevent="$showHelp()"><i class="ico ico-help"/><span v-text="$locale.$Help"/><\/a>\n\t\t\t<div class="aligner"/>\n\t\t<\/template>\n\t\t<button class="btn a2-inline" :disabled="backDisabled" @click.stop="back"><i class="ico ico-chevron-left"/> <span v-text="$locale.$Back"/><\/button>\n\t\t<button class="btn a2-inline btn-primary" @click.stop="nextFinish" :disabled="nextDisabled()"><span v-text="nextFinishText"/> <i class="ico" :class="nextFinishIco""/><\/button>\n\t\t<button class="btn a2-inline" @click.prevent="close" v-text="$locale.$Cancel" style="margin-left:2rem"/>\n\t<\/div>\n<\/div>\n',props:{finish:Function,helpLink:String,minHeight:String},data:function(){return{pages:[],activePage:null}},computed:{$locale:function(){return t},nextFinishText:function(){var n=this.pages;return this.activePage===n[n.length-1]?t.$Finish:t.$Next},nextFinishIco:function(){var n=this.pages;return this.activePage===n[n.length-1]?"ico-chevron-right-end":"ico-chevron-right"},backDisabled:function(){return this.activePage===this.pages[0]},panelStyle:function(){return this.minHeight?{"min-height":this.minHeight}:undefined}},methods:{nextDisabled:function(){return this.activePage?this.activePage.$invalid()?!0:!1:!1},setActivePage:function(n){this.activePage&&(this.activePage.visit=!0);this.activePage=n;this.activePage.state="edit"},selectPage:function(n){if(this.$nextPage(n)&&!this.nextDisabled()){this.setActivePage(n);return}n.visit&&this.setActivePage(n)},pageClass:function(n){var t="";if(!n.visit){if(this.$nextPage(n)&&!this.nextDisabled())return t;t="disabled"}return n===this.activePage?t="active":n.wasInvalid&&(t="invalid"),t},close:function(){n.$emit("modalClose")},back:function(){var n=this.pages,t=n.indexOf(this.activePage);t<=0||this.setActivePage(n[t-1])},nextFinish:function(){if(!this.nextDisabled()){var n=this.pages,t=n.indexOf(this.activePage);t===n.length-1?this.finish?this.finish():console.error("The FinishCommand is not specified"):this.setActivePage(n[t+1])}},$nextPage:function(n){var t=this.pages.indexOf(this.activePage),i=this.pages.indexOf(n);return i===t+1},$addPage:function(n){this.pages.push(n)},$removePage:function(n){var t=this.pages.indexOf(n);t!==-1&&this.pages.splice(t,1)},$showHelp:function(){this.helpLink&&window.open(this.helpLink,"_blank")},_pendingValidate:function(){this.$forceUpdate()}},mounted:function(){this.pages.length>0&&(this.activePage=this.pages[0],this.activePage.state="edit")},created:function(){n.$on("pendingValidate",this._pendingValidate)},beforeDestroy:function(){n.$off("pendingValidate",this._pendingValidate)}});Vue.component("a2-wizard-page",{template:'\n<div class="wizard-page" v-if="isActive">\n\t<slot />\n<\/div>\n',props:{header:String,descr:String},data:function(){return{controls:[],state:"init",wasInvalid:!1,visit:!1}},computed:{isActive:function(){return this===this.$parent.activePage},isNextPage:function(){return $parent.$nextPage(this)},errorIcon:function(){return this.visit?this.wasInvalid:!1}},methods:{$invalid:function(){var n,u,f;if(!this.controls.length)return this.wasInvalid=!1,!1;var t=!0,i=!1,r=undefined;try{for(n=this.controls[Symbol.iterator]();!(t=(u=n.next()).done);t=!0)if(f=u.value,f.invalid())return this.wasInvalid=!0,!0}catch(e){i=!0;r=e}finally{try{!t&&n["return"]&&n["return"]()}finally{if(i)throw r;}}return this.wasInvalid=!1,!1},$registerControl:function(n){this.controls.push(n)},$unregisterControl:function(n){var t=this.controls.indexOf(n);t!==-1&&this.controls.splice(t,1)}},created:function(){this.$parent.$addPage(this)},beforeDestroy:function(){this.controls.splice(0,this.controls.length)},destroyed:function(){this.$parent.$removePage(this)}})}(),function(){var r=window.$$locale,n=require("std:eventBus"),t={template:'\n<li class="toast" :class="toast.style">\n\t<i class="ico" :class="icoCssClass"><\/i>\n\t<span v-text="toast.text" />\n<\/li>\n',props:{toast:Object},computed:{icoCssClass:function(){switch(this.toast.style){case"success":return"ico-check";case"danger":case"error":return"ico-error-outline-nocolor";case"warning":return"ico-warning-outline";case"info":return"ico-info-outline"}return"ico-dot"}}},i={template:'\n<div class="toastr-stack" >\n\t<transition-group name="list" tag="ul">\n\t\t<a2-toast v-for="(t, k) in items":toast="t" :key="t.$index"><\/a2-toast>\n\t<\/transition-group>\n<\/div>\n',components:{"a2-toast":t},props:{},data:function(){return{items:[],currentIndex:0}},methods:{showToast:function(n){var t=this;n.$index=++this.currentIndex;this.items.unshift(n);setTimeout(function(){t.removeToast(n.$index)},2e3)},removeToast:function(n){var t=this.items.findIndex(function(t){return t.$index===n});t!==-1&&this.items.splice(t,1)}},created:function(){n.$on("toast",this.showToast)}};app.components["std:toastr"]=i}(),function(){var n=require("std:url"),t=window.$$locale;Vue.component("a2-image",{template:'\n<div class="a2-image">\n\t<img v-if="hasImage" :src="href" :style="cssStyle" @click.prevent="clickOnImage"/>\n\t<a class="remove-image" v-if="hasRemove" @click.prevent="removeImage">&#x2715;<\/a>\n\t<a2-upload v-if="isUploadVisible" :style="uploadStyle" accept="image/*"\n\t\t:item="itemForUpload" :base="base" :prop="prop" :new-item="newItem" :tip="tip" :read-only=\'readOnly\' :limit="limit"/>\n<\/div>\n',props:{base:String,item:Object,prop:String,newItem:Boolean,inArray:Boolean,source:Array,width:String,height:String,readOnly:Boolean,limit:Number},data:function(){return{newElem:{}}},computed:{href:function(){if(this.newItem)return undefined;var i=window.$$rootUrl,t=this.item[this.prop];return t?n.combine(i,"_image",this.base,this.prop,t):undefined},tip:function(){return this.readOnly?"":t.$ClickToDownloadPicture},cssStyle:function(){return{maxWidth:this.width,maxHeight:this.height}},uploadStyle:function(){var n={width:this.width,height:this.height};return n.width||(n.width=n.height),n.height||(n.height=n.width),n},hasImage:function(){return!!this.href},hasRemove:function(){return this.readOnly?!1:this.hasImage},isUploadVisible:function(){return this.newItem?!0:this.readOnly?!1:!this.inArray&&!this.item[this.prop]},itemForUpload:function(){return this.newItem?this.newElem:this.item}},methods:{removeImage:function(){this.inArray?this.item.$remove():this.item[this.prop]=undefined},clickOnImage:function(){}},created:function(){this.newItem&&this.source&&this.source.$new&&(this.newElem=this.source.$new())}});Vue.component("a2-static-image",{template:'<img :src="href" :alt="alt"/>',props:{url:String,alt:String},computed:{href:function(){var t=window.$$rootUrl;return n.combine(t,"_static_image",this.url.replace(/\./g,"-"))}}});Vue.component("a2-file-image",{template:'<img :src="href" :style="cssStyle" />',props:{url:String,width:String,height:String,value:[String,Number]},computed:{href:function(){var t=window.$$rootUrl;return n.combine(t,"_file",this.url,this.value)},cssStyle:function(){var n={};return this.width&&(n.maxWidth=this.width),this.height&&(n.maxHeight=this.height),n}}})}(),function(){var n=require("std:url"),r=require("std:http"),t=window.$$locale,i=require("std:tools");Vue.component("a2-file-upload",{template:'\n<div class="a2-file-upload">\n<label :class="cssClass" @dragover.prevent="dragOver" @dragleave.prevent="dragLeave">\n\t<input v-if=\'canUpload\' type="file" @change="uploadFile" v-bind:multiple="isMultiple" :accept="accept" ref="inputFile"/>\n\t<i class="ico ico-upload"><\/i>\n\t<span class="upload-tip" v-text="tip" v-if="tip"><\/span>\n<\/label>\n<\/div>\n',data:function(){return{hover:!1}},props:{accept:String,url:String,source:Object,delegate:Function,errorDelegate:Function,argument:[Object,String,Number],limit:Number},computed:{cssClass:function(){return"file-upload"+(this.hover?" hover":"")},canUpload:function(){return!0},isMultiple:function(){return!1},tip:function(){return this.readOnly?"":t.$ClickToDownloadFile}},methods:{dragOver:function(){this.hover=!0},dragLeave:function(){this.hover=!1},checkLimit:function(n){if(!this.limit)return!1;var t=n.size/1024;return t>this.limit},uploadFile:function(u){var f=this,p=window.$$rootUrl,s=n.combine(p,"_file",this.url),w=this.argument?Object.assign({},this.argument):{Id:1},e,v,o,y;s=n.createUrlForNavigate(s,w);var c=new FormData,h=!0,l=!1,a=undefined;try{for(e=u.target.files[Symbol.iterator]();!(h=(v=e.next()).done);h=!0){if(o=v.value,this.checkLimit(o)){u.target.value="";y=t.$FileTooLarge.replace("{0}",this.limit);i.alert(y);return}c.append("file",o,o.name)}}catch(b){l=!0;a=b}finally{try{!h&&e["return"]&&e["return"]()}finally{if(l)throw a;}}this.$refs.inputFile.value="";r.upload(s,c).then(function(n){u.target.value="";f.delegate&&f.delegate(n)})["catch"](function(n){f.errorDelegate?f.errorDelegate(n):n.indexOf("UI:")===0?i.alert(n.substring(3).replace("\\n","\n")):alert(n)})}}})}();Vue.component("a2-taskpad",{template:'<div :class="cssClass">\n\t<a class="ico taskpad-collapse-handle" @click.stop="toggle"><\/a>\n\t<div v-if="expanded" class="taskpad-body">\n\t\t<slot>\n\t\t<\/slot>\n\t<\/div>\n\t<div v-else class="taskpad-title" @click.prevent="toggle">\n\t\t<span class="taskpad-label" v-text="tasksText"><\/span>\n\t<\/div>\n<\/div>\n',props:{title:String,initialCollapsed:Boolean},data:function(){return{expanded:!0,__savedCols:""}},computed:{cssClass:function(){return"taskpad"+(this.expanded?" expanded":" collapsed")},tasksText:function(){return this.title||window.$$locale.$Tasks}},methods:{setExpanded:function(n){this.expanded=n;var t=this.$el.parentElement.style;t.gridTemplateColumns=this.expanded?this.__savedCols:"1fr 36px"},toggle:function(){this.setExpanded(!this.expanded)}},mounted:function(){var n=this.$el.parentElement.style;this.__savedCols=n.gridTemplateColumns;this.initialCollapsed&&this.setExpanded(!1)}});Vue.component("a2-panel",{template:'<div :class="cssClass" :test-id="testId">\n\t<div class="panel-header" @click.prevent="toggle" v-if="!noHeader">\n\t\t<slot name=\'header\'><\/slot>\n\t\t<span v-if="collapsible" class="ico panel-collapse-handle"><\/span>\n\t<\/div>\n\t<slot v-if="expanded"><\/slot>\n<\/div>\n',props:{initialCollapsed:Boolean,collapsible:Boolean,panelStyle:String,noHeader:Boolean,testId:String},data:function(){return{collapsed:this.initialCollapsed}},computed:{cssClass:function(){var n="panel",t;if(n+=this.collapsed?" collapsed":" expanded",this.panelStyle){t=this.panelStyle.toLowerCase();switch(t){case"red":case"danger":case"error":n+=" panel-red";break;case"info":case"cyan":n+=" panel-cyan";break;case"green":case"success":n+=" panel-green";break;case"warning":case"yellow":n+=" panel-yellow";break;default:n+=" panel-"+t}}return n},expanded:function(){return!this.collapsed}},methods:{toggle:function(){this.collapsible&&(this.collapsed=!this.collapsed)}}}),function(){var n=require("std:eventBus");Vue.component("a2-inline-dialog",{template:'<div class="inline-modal-wrapper modal-animation-frame" v-if="visible" :class="{show: open}" v-cloak>\n\t<div class="modal-window modal-animation-window" :class="{loaded: open}" :style="dlgStyle">\n\t\t<slot><\/slot>\n\t<\/div>\n<\/div>\n',props:{dialogId:String,dialogTitle:String,width:String},data:function(){return{visible:!1,open:!1}},computed:{dlgStyle:function(){return this.width?{width:this.width}:undefined}},methods:{__keyUp:function(t){t.which===27&&(n.$emit("inlineDialog",{cmd:"close",id:this.dialogId}),t.stopPropagation(),t.preventDefault())},__inlineEvent:function(n){var t=this;if(n&&n.id===this.dialogId)switch(n.cmd){case"close":this.open=!1;this.visible=!1;document.removeEventListener("keyup",this.__keyUp);break;case"open":this.visible=!0;document.addEventListener("keyup",this.__keyUp);setTimeout(function(){t.open=!0},50);break;default:console.error("invalid inline command '"+n.cmd+"'")}}},created:function(){n.$on("inlineDialog",this.__inlineEvent)},beforeDestroy:function(){n.$off("inlineDialog",this.__inlineEvent)}})}();
/*! Copyright © 2015-2020 Alex Kukhtin. All rights reserved.*/
(function(){function n(i,r,u){var o,e,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r in i)){t.next=13;break}o=i[r];e=0;case 3:if(!(e<o.length)){t.next=13;break}return f=o[e],f.$level=u,t.next=8,f;case 8:if(f.$collapsed){t.next=10;break}return t.delegateYield(n(f,r,u+1),"t0",10);case 10:e++;t.next=3;break;case 13:case"end":return t.stop()}},t[0],this)}var t=[n].map(regeneratorRuntime.mark);Vue.component("a2-sheet",{template:'\n<table class="sheet">\n\t<slot name="columns"><\/slot>\n\t<thead>\n\t\t<slot name="header"><\/slot>\n\t<\/thead>\n\t<slot name="col-shadow"><\/slot>\n\t<slot name="body"><\/slot>\n\t<tfoot>\n\t\t<slot name="footer"><\/slot>\n\t<\/tfoot>\n<\/table>\n'});Vue.component("a2-sheet-section",{template:"\n<tbody>\n\t<slot><\/slot>\n<\/tbody>\n"});Vue.component("a2-sheet-section-tree",{functional:!0,name:"a2-sheet-section",props:{itemsSource:Object,propName:String},render:function(t,i){function v(){var n=this.item.$collapsed||!1;Vue.set(this.item,"$collapsed",!n)}function y(){var n="";return this.hasChildren()&&(n+="has-children"),this.item.$collapsed&&(n+=" collapsed"),n+(" lev-"+this.item.$level)}function p(){var n="";return this.hasChildren()&&(n+=" group"),this.item.$collapsed&&(n+=" collapsed"),n}function w(){return"indent lev-"+this.item.$level}function b(){var n=this.item[f];return n&&n.length>0}var f=i.props.propName,o=i.props.itemsSource,r,l,a,u;if(o&&f){var k=i.data.scopedSlots["default"],s=[],e=!0,h=!1,c=undefined;try{for(r=n(o,f,1)[Symbol.iterator]();!(e=(l=r.next()).done);e=!0)a=l.value,u=k({item:a,toggle:v,cssClass:y,hasChildren:b,rowCssClass:p,indentCssClass:w})[0],s.push(t(u.tag,u.data,u.children))}catch(d){h=!0;c=d}finally{try{!e&&r["return"]&&r["return"]()}finally{if(h)throw c;}}return t("tbody",{},s)}}})})(),function(){var t=component("std:store"),i=require("std:url"),n=require("std:eventBus");Vue.component("a2-new-button",{template:'<div class="dropdown dir-down a2-new-btn separate" v-dropdown v-if="isVisible">\n\t<button class="btn btn-icon" :class="btnClass" toggle aria-label="New"><i class="ico" :class="iconClass"><\/i><\/button>\n\t<div class="dropdown-menu menu down-left">\n\t\t<div class="super-menu" :class="cssClass">\n\t\t\t<div v-for="(m, mx) in topMenu" :key="mx" class="menu-group">\n\t\t\t\t<div class="group-title" v-text="m.Name"><\/div>\n\t\t\t\t<template v-for="(itm, ix) in m.Menu">\n\t\t\t\t\t<div class="divider" v-if=isDivider(itm)><\/div>\n\t\t\t\t\t<a v-else @click.prevent=\'doCommand(itm.Url, itm.Params)\' \n\t\t\t\t\t\tclass="dropdown-item" tabindex="-1"><i class="ico" :class="\'ico-\' + itm.Icon"><\/i><span v-text="itm.Name"><\/span><\/a>\n\t\t\t\t<\/template>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n',store:t,props:{menu:Array,icon:String,btnStyle:String},computed:{isVisible:function(){return!!this.menu},topMenu:function(){return this.menu?this.menu[0].Menu:null},iconClass:function(){return this.icon?"ico-"+this.icon:""},btnClass:function(){return this.btnStyle?"btn-"+this.btnStyle:""},columns:function(){var n=this.menu?this.menu[0].Params:"";if(!n)return 1;try{return+JSON.parse(n).columns||1}catch(t){return 1}},cssClass:function(){return"cols-"+this.columns}},created:function(){},methods:{isDivider:function(n){return n.Name==="-"},doCommand:function(n,t){var i=!1;if(t)try{i=JSON.parse(t).requeryAfter}catch(r){i=!1}n=n||"";n.startsWith("navigate:")?this.navigate(n.substring(9)):n.startsWith("dialog:")?this.dialog(n.substring(7),i):alert("invalid command:"+n)},navigate:function(n){this.$store.commit("navigate",{url:n})},dialog:function(t,i){var r={promise:null};n.$emit("modaldirect",t,r);r.promise.then(function(){i&&n.$emit("requery",t,r)})}}})}(),function(){Vue.component("a2-company-button",{template:'<div class="a2-company-btn"><div class="dropdown dir-down separate" v-dropdown v-if="isVisible">\n\t<button class="btn btn-companyname" toggle aria-label="Company">\n\t\t<i class="ico ico-home"><\/i>\n\t\t<span class="company-name" v-text=companyName><\/span>\n\t\t<span class="caret"/>\n\t<\/button>\n\t<div class="dropdown-menu menu down-left">\n\t\t<a v-for="comp in source" @click.prevent="selectCompany(comp)" href="" tabindex="-1" class="dropdown-item">\n\t\t\t<i class="ico" :class="icoClass(comp)"/><span class="company-menu-name" v-text="comp.Name"/>\n\t\t<\/a>\n\t\t<template v-if="hasLinks">\n\t\t\t<div class="divider"/>\n\t\t\t<a v-for="link in links" @click.prevent="gotoLink(link)" href="" tabindex="-1" class="dropdown-item">\n\t\t\t\t<i class="ico" :class="linkClass(link)"/><span v-text="link.Name" />\n\t\t\t<\/a>\n\t\t<\/template>\n\t<\/div>\n<\/div><\/div>\n',props:{source:Array,links:Array},computed:{isVisible:function(){return this.source.length>0},hasLinks:function(){return this.links&&this.links.length},companyName:function(){if(this.source.length===0)return"";var n=this.source.find(function(n){return n.Current});return n?n.Name:"*** UNSELECTED ***"}},methods:{selectCompany:function(n){var r=require("std:http"),t=require("std:url"),i=window.$$rootUrl,u=JSON.stringify({company:n.Id});r.post(t.combine(i,"_application/switchtocompany"),u).then(function(){window.location.assign(t.combine(i,"/"))})["catch"](function(n){alert(n)})},gotoLink:function(n){var t=component("std:store");t&&t.commit("navigate",{url:n.Url})},icoClass:function(n){return n.Current?"ico-check":"ico-none"},linkClass:function(n){return"ico-"+(n.Icon||"none")}}})}(),function(){function t(){return n+=1,"el-gr-"+n}var n=1237;Vue.component("a2-graphics",{template:'<div :id="id" class="a2-graphics"><\/div>',props:{render:Function,arg:[Object,String,Number,Array],watchmode:String},data:function(){return{unwatch:null,id:t()}},computed:{controller:function(){return this.$root}},methods:{draw:function(){var n=d3.select("#"+this.id);n.selectAll("*").remove();this.render.call(this.controller.$data,n,this.arg)}},mounted:function(){var n=this,t;(this.$nextTick(function(){return n.draw()}),this.watchmode!=="none")&&(t=this.watchmode==="deep",this.unwatch=this.$watch("arg",function(){return n.draw()},{deep:t}))},beforeDestroy:function(){this.unwatch&&this.unwatch();var n=d3.select("#"+this.id);n.selectAll("*").remove();this.$el.remove()}})}(),function(){function o(n){return JSON.stringify(n,function(n,t){return n[0]==="$"?(n in e)?undefined:t:n[0]==="_"?undefined:f(this[n])?null:t},2)}var t=require("std:dataservice"),i=require("std:url"),r=require("std:eventBus"),n=window.$$locale,u=require("std:utils"),f=u.date.isZero,e={$vm:null,$ctrl:null,$host:null,$root:null,$parent:null,$items:null},s={name:"a2-trace-item",template:'\n<div v-if="hasElem" class="trace-item-body">\n\t<span class="title" v-text="name"/><span class="badge" v-text="elem.length"/>\n\t<ul class="a2-debug-trace-item">\n\t\t<li v-for="itm in elem">\n\t\t\t<div class="rq-title"><span class="elapsed" v-text="itm.elapsed + \' ms\'"/> <span v-text="itm.text"/><\/div>\n\t\t<\/li>\n\t<\/ul>\n<\/div>',props:{name:String,elem:Array},computed:{hasElem:function(){return this.elem&&this.elem.length}}};Vue.component("a2-debug",{template:'\n<div class="debug-panel" v-if="paneVisible" :class="panelClass">\n\t<div class="debug-pane-header">\n\t\t<span class="debug-pane-title" v-text="title"><\/span>\n\t\t<a class="btn btn-close" @click.prevent="close">&#x2715<\/a>\n\t<\/div>\n\t<div class="toolbar">\n\t\t<button class="btn btn-tb" @click.prevent="refresh"><i class="ico ico-reload"><\/i> {{text(\'$Refresh\')}}<\/button>\n\t\t<div class="aligner"><\/div>\n\t\t<button class="btn btn-tb" @click.prevent="toggle"><i class="ico" :class="toggleIcon"><\/i><\/button>\n\t<\/div>\n\t<div class="debug-model debug-body" v-if="modelVisible">\n\t\t<pre class="a2-code" v-text="modelJson()"><\/pre>\n\t<\/div>\n\t<div class="debug-trace debug-body" v-if="traceVisible">\n\t\t<ul class="a2-debug-trace">\n\t\t\t<li v-for="r in trace">\n\t\t\t\t<div class="rq-title"><span class="elapsed" v-text="r.elapsed + \' ms\'"/> <span v-text="r.url" /><\/div>\n\t\t\t\t<a2-trace-item name="Sql" :elem="r.items.Sql"><\/a2-trace-item>\n\t\t\t\t<a2-trace-item name="Render" :elem="r.items.Render"><\/a2-trace-item>\n\t\t\t\t<a2-trace-item name="Report" :elem="r.items.Report"><\/a2-trace-item>\n\t\t\t\t<a2-trace-item name="Workflow" :elem="r.items.Workflow"><\/a2-trace-item>\n\t\t\t\t<a2-trace-item class="exception" name="Exceptions" :elem="r.items.Exception"><\/a2-trace-item>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/div>\n<\/div>\n',components:{"a2-trace-item":s},props:{modelVisible:Boolean,traceVisible:Boolean,modelStack:Array,counter:Number,close:Function},data:function(){return{trace:[],left:!1}},computed:{refreshCount:function(){return this.counter},paneVisible:function(){return this.modelVisible||this.traceVisible},title:function(){return this.modelVisible?n.$DataModel:this.traceVisible?n.$Profiling:""},traceView:function(){return this.traceVisible},toggleIcon:function(){return this.left?"ico-pane-right":"ico-pane-left"},panelClass:function(){return this.left?"left":"right"}},methods:{modelJson:function(){if(this.modelVisible)return this.modelStack.length?o(this.modelStack[0].$data):""},refresh:function(){this.modelVisible?this.$forceUpdate():this.traceVisible&&this.loadTrace()},toggle:function(){this.left=!this.left},loadTrace:function(){var r=window.$$rootUrl,u=i.combine(r,"shell/trace"),n=this;t.post(u).then(function(t){(n.trace.splice(0,n.trace.length),t)&&t.forEach(function(t){n.trace.push(t)})})},text:function(t){return n[t]}},watch:{refreshCount:function(){this.$forceUpdate()},traceView:function(n){n&&this.loadTrace()}},created:function(){var n=this;r.$on("endRequest",function(t){t.indexOf("/shell/trace")===-1&&n.traceVisible&&n.loadTrace()})}})}(),function(){var t=require("std:dataservice"),i=require("std:url"),n=window.$$locale,r=require("std:utils");Vue.component("a2-feedback",{template:'\n<div class="feedback-panel" v-if="visible">\n    <div class="feedback-pane-header">\n        <span class="feedback-pane-title" v-text="source.title"><\/span>\n        <a class="btn btn-close" @click.prevent="close">&#x2715<\/a>\n    <\/div>\n    <div class="feedback-body">\n\t\t<template v-if="shown">\n\t\t\t<div v-html="source.promptText"><\/div>\n\t\t\t<div style="margin-bottom:20px" />\n\t\t\t<div class="control-group" style="">\n\t\t\t\t<label v-html="source.labelText" /> \n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<textarea rows="5" maxlength="2048" v-model="value" style="height: 92px;max-height:400px" v-auto-size="true" />\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<button class="btn btn-primary" :disabled="noValue" @click.prevent="submit" v-text="source.buttonText" />\n\t\t\t<include v-if="source.externalFragment" :src="source.externalFragment"/>\n\t\t\t\n\t\t<\/template>\n\t\t<template v-else>\n\t\t\t<div class="thanks" v-html="source.thanks" />\n\t\t\t<button class="btn btn-primary" @click.prevent="close" v-text="closeText" />\n\t\t<\/template>\n\t<\/div>\n<\/div>\n',components:{},props:{visible:Boolean,modelStack:Array,close:Function,source:Object},data:function(){return{value:"",shown:!0}},computed:{noValue:function(){return!this.value},closeText:function(){return n.$Close}},methods:{text:function(t){return n[t]},refresh:function(){},loadfeedbacks:function(){},submit:function(){var u=window.$$rootUrl,f=i.combine(u,"shell/savefeedback"),n=this,e=r.toJson({text:this.value});t.post(f,e).then(function(){n.shown=!1;n.value=""})["catch"](function(t){console.dir(t);n.$parent.$alert(n.source.alert);n.close()})}},watch:{visible:function(n){n&&(this.shown=!0,this.value="",this.loadfeedbacks())}},created:function(){}})}(),function(){var n={render:function(){return null},props:["page-title"],watch:{pageTitle:function(){this.setTitle()}},methods:{setTitle:function(){this.pageTitle&&(document.title=this.pageTitle)}},created:function(){this.setTitle()}};app.components["std:doctitle"]=n}(),function(){Vue.component("a2-span-sum",{props:{content:[String,Number],dir:Number},render:function(n){var t=[],i;return t.push(n("span",{domProps:{innerText:this.content}})),i="span-sum ",this.dir>0?(t.push(n("i",{"class":"ico ico-arrow-up-green"})),i+="in"):this.dir<0?(t.push(n("i",{"class":"ico ico-arrow-down-red"})),i+="out"):this.dir===0&&(t.push(n("i",{"class":"ico ico-arrow-sort"})),i+="inout"),n("span",{"class":i},t)}})}(),function(){Vue.component("mega-menu",{template:'<div class="dropdown-menu menu" role="menu">\n\t<div class="super-menu" :class="cssClass" :style="cssStyle">\n\t\t<div v-for="(m, mx) of topMenu" :key="mx" class="menu-group">\n\t\t\t<div class="group-title" v-text="m.Name"><\/div>\n\t\t\t<template v-for="(itm, ix) in m.menu">\n\t\t\t\t<div class="divider" v-if=isDivider(itm) ><\/div>\n\t\t\t\t<slot name="item" :menuItem="itm" v-else><\/slot>\n\t\t\t<\/template>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n',props:{itemsSource:Array,groupBy:String,columns:Number,width:String},data:function(){return{}},computed:{cssClass:function(){var n="cols-"+(this.columns||1);return this.width&&(n+=" with-width"),n},cssStyle:function(){return this.width?{width:this.width}:undefined},topMenu:function(){var n=this;return this.itemsSource?this.itemsSource.reduce(function(t,i){var r=i[n.groupBy]||"",u=t[r];return u?u.menu.push(i):t[r]={Name:r,menu:[i]},t},{}):{}}},methods:{isDivider:function(n){return n.Name==="-"}}})}(),function(){var n=require("std:eventBus");Vue.component("a2-iframe-target",{template:'\n<div class="frame-stack" v-if="visible">\n\t<iframe width="100%" height="100%" :src="iFrameUrl" frameborder="0" />\n<\/div>\n',data:function(){return{iFrameUrl:""}},computed:{visible:function(){return!!this.iFrameUrl}},created:function(){var t=this;n.$on("openframe",function(n){alert(n);t.iFrameUrl=n})}})}();Vue.directive("autoSize",{bind:function(n,t){function i(){n._autosize()}function r(){Vue.nextTick(function(){return n._autosize()})}t.value&&(n.style.overflowY=!1,n._ops={initHeight:-1,extraSpace:0},n._autosize=function(){var t,i;n.offsetHeight&&(t=n._ops,t.initHeight===-1&&(t.initHeight=n.offsetHeight),n.style.height=t.initHeight+"px",i=n.scrollHeight+t.extraSpace,i>t.initHeight&&(n.style.height=i+"px"))},n.addEventListener("input",i),n.addEventListener("autosize",r))},inserted:function(n,t){if(t.value){var i=window.getComputedStyle(n),r=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth);n._ops.extraSpace=r;setTimeout(function(){return n._autosize()},1)}}});Vue.directive("disable",{bind:function(n){function t(n){if(this.getAttribute("disabled"))return n.preventDefault(),n.stopImmediatePropagation(),!1}n.addEventListener("click",t,!0)}});Vue.directive("dropdown",{bind:function(n){var t=require("std:popup"),i=this;n._btn=n.querySelector("[toggle]");n.setAttribute("dropdown-top","");n._btn||console.error("DropDown does not have a toggle element");t.registerPopup(n);n._close=function(){n._hide&&n._hide();n.classList.remove("show")};n.addEventListener("click",function(i){for(var r=i.target,f,u;r;){if(r===n._btn)break;if(r===n)return;r=r.parentElement}r===n._btn&&(i.preventDefault(),i.stopPropagation(),f=n.classList.contains("show"),f?(n._hide&&n._hide(),n.classList.remove("show")):(u=t.closest(n,".popup-body"),u?t.closeInside(u):t.closeAll(),n._show&&n._show(),n.classList.add("show")))})},unbind:function(n){var t=require("std:popup");t.unregisterPopup(n)}});Vue.directive("focus",{bind:function(n){function t(n){n.select&&(n._selectDone||(n.select(),n._selectDone=!0))}n.addEventListener("focus",function(i){if(i.target.parentElement.classList.add("focus"),!n.__opts||!n.__opts.mask){var r=i.target;r._selectDone=!1;setTimeout(function(){t(r)},0)}},!1);n.addEventListener("blur",function(n){var t=n.target;t._selectDone=!0;t.parentElement.classList.remove("focus")},!1);n.addEventListener("click",function(i){n.__opts&&n.__opts.mask||t(i.target)},!1)},inserted:function(n){n._selectDone=!1;n.tabIndex===1&&setTimeout(function(){n.focus&&n.focus();n.select&&n.select()},0)}});Vue.directive("settabindex",{inserted:function(n){n.tabIndex===1&&setTimeout(function(){n.focus&&n.focus()},0)}}),function(){function n(n){n&&n.$loadLazy&&n.$loadLazy()}Vue.directive("lazy",{componentUpdated:function(t,i){n(i.value)},inserted:function(t,i){n(i.value)}})}(),function(){var n=Symbol();Vue.directive("page-orientation",{bind:function(t,i){var r=document.createElement("style");r.innerHTML="@page {size: A4 "+i.value+"; margin:1cm;}";document.head.appendChild(r);t[n]=r},unbind:function(t){var i=t[n];i&&document.head.removeChild(i)}})}();Vue.directive("resize",{unbind:function(n){var t=n._parts;t.mouseDown&&n.removeEventListener("mousedown",t.mouseDown,!1)},update:function(n){function i(n,t){var i,u;return(t=t||"",t.indexOf("px")!==-1)?Number.parseFloat(t):(i=document.createElement("div"),i.style.width=t,i.style.position="absolute",i.style.visibility="hidden",document.body.appendChild(i),u=i.clientWidth,i.remove(),!u)?r:isNaN(u)?r:u}var r=20,t,u;if(n._parts&&(t=n._parts,!t.init)){t.init=!0;var f=n.getAttribute("data-min-width"),e=n.getAttribute("second-min-width"),o=n.getAttribute("first-pane-width");t.minWidth=i(t.grid,f);t.minWidth2=i(t.grid,e);t.firstWidth=i(t.grid,o);u=Math.max(t.minWidth,t.firstWidth);t.grid.style.gridTemplateColumns=u+"px "+t.handleWidth+"px 1fr";t.grid.style.visibility="visible"}},inserted:function(n){function i(t){var u=n._parts,f;u.resizing&&(t.preventDefault(),u.handle.style.display="none",u.grid.style.cursor="default",f=u.offsetX(t,!1),f=u.fitX(f),u.grid.style.gridTemplateColumns=f+"px "+u.handleWidth+"px 1fr",document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",r),u.resizing=!1)}function r(t){var i=n._parts,r;i.resizing&&(t.preventDefault(),r=i.offsetX(t,!1),r=i.fitX(r),i.handle.style.left=r+"px")}function u(t){var u=n._parts,f,e;if(!u.resizing&&u.handle){if(f=t.target,!f.classList.contains("spl-handle")){console.error("click out of splitter handle");return}t.preventDefault();e=u.offsetX(t,!0);u.handle.style.left=e+"px";u.handle.style.display="block";u.grid.style.cursor="w-resize";document.addEventListener("mouseup",i,!1);document.addEventListener("mousemove",r,!1);u.resizing=!0}}var t=n.parentElement,f={handleWidth:6,grid:t,handle:findHandle(t),resizing:!1,firstWidth:0,minWidth:0,minWidth2:0,delta:0,mouseDown:u,init:!1,offsetX:function(n,t){var i=this.delta,u=this.grid.getBoundingClientRect(),r;return t&&(r=n.target.getBoundingClientRect(),i=n.clientX-r.left,this.delta=i),n.clientX-u.left-i},fitX:function(n){n<this.minWidth&&(n=this.minWidth);var t=this.grid.clientWidth;return n+this.handleWidth+this.minWidth2>t&&(n=t-this.minWidth2-this.handleWidth),n}};n._parts=f;n.addEventListener("mousedown",u,!1)}}),function(){function e(n,i,r,u){return new Promise(function(f){var e={promise:null,data:i,query:r,rd:!0};t.$emit("modal",n,e);e.promise.then(function(n){u(n);f(n)})})}function v(n){var r=[],u=!0,e=!1,o=undefined,t,s,i,l,a;try{for(t=n[Symbol.iterator]();!(u=(s=t.next()).done);u=!0){var y=s.value,f=!0,h=!1,c=undefined;try{for(i=y.e[Symbol.iterator]();!(f=(l=i.next()).done);f=!0)a=l.value,r.push(a.msg)}catch(v){h=!0;c=v}finally{try{!f&&i["return"]&&i["return"]()}finally{if(h)throw c;}}}}catch(v){e=!0;o=v}finally{try{!u&&t["return"]&&t["return"]()}finally{if(e)throw o;}}return r.length?r:null}function h(t,i){if(t&&t.checkPermission&&n.isObjectExact(i)&&i.$permissions){var u=i.$permissions,r=t.checkPermission;if(r in u){if(!u[r])return!0}else console.error("invalid permssion name: '"+r+"'")}return!1}var t=require("std:eventBus"),n=require("std:utils"),f=require("std:dataservice"),i=require("std:url"),s=require("std:log",!0),r=window.$$locale,y=require("std:mask"),o=require("std:modelInfo"),c=require("std:platform"),u=require("std:html",!0),p=component("std:store"),w=component("std:doctitle",!0),l=0,a=0,b=Vue.extend({store:p,components:{"a2-document-title":w},data:function(){return{__init__:!0,__baseUrl__:"",__baseQuery__:{},__requestsCount__:0,__lockQuery__:!0,__testId__:null}},computed:{$baseUrl:function(){return this.$data.__baseUrl__},$baseQuery:function(){return this.$data.__baseQuery__},$indirectUrl:function(){return this.$data.__modelInfo.__indirectUrl__||""},$query:function(){return this.$data._query_},$jsonQuery:function(){return n.toJson(this.$data.Query)},$isDirty:function(){return this.$data.$dirty},$isPristine:function(){return!this.$data.$dirty},$isLoading:function(){return this.$data.__requestsCount__>0},$modelInfo:function(){return this.$data.__modelInfo},$canSave:function(){return this.$isDirty&&!this.$isLoading}},watch:{$jsonQuery:function(){var n=this;this.$nextTick(function(){return n.$reload()})}},methods:{$marker:function(){return!0},$exec:function(n,t,i,u){if(!this.$isReadOnly(u)&&!this.$isLoading){if(h(u,t)){this.$alert(r.$PermissionDenied);return}var f=this.$data;return f._exec_(n,t,i,u)}},$toJson:function(t){return n.toJson(t)},$maxChars:function(t,i){return n.text.maxChars(t,i)},$isReadOnly:function(n){return n&&n.checkReadOnly&&this.$data.$readOnly},$execSelected:function(t,i,r){if(!this.$isLoading){var u=this.$data;if(!n.isArray(i)){console.error("Invalid argument for $execSelected");return}r?this.$confirm(r).then(function(){return u._exec_(t,i.$selected)}):u._exec_(t,i.$selected)}},$canExecute:function(n,t,i){if(this.$isReadOnly(i))return!1;var r=this.$data;return r._canExec_(n,t,i)},$setCurrentUrl:function(n){this.inDialog&&(n=i.combine("_dialog",n));this.$data.__baseUrl__=n;t.$emit("modalSetBase",n)},$save:function(t){var e,o;if(!this.$data.$readOnly){var u=this,s=window.$$rootUrl,h=require("std:routing"),c=s+"/"+h.dataUrl()+"/save",l=this.$indirectUrl||this.$baseUrl,a=this.$data.$isCopy,y=!!t&&t.options&&t.options.validRequired;if(y&&this.$data.$invalid){e=v(this.$data.$forceValidate());this.$alert(r.$MakeValidFirst,undefined,e);return}return u.$data.$emit("Model.beforeSave",u.$data),o=u.$data._saveSelections(),new Promise(function(r){var e=n.toJson({baseUrl:l,data:u.$data}),s=i.isNewPath(u.$baseUrl);f.post(c,e).then(function(n){var e,f,c,h;if(!u.__destroyed__){u.$data.$merge(n,!0,!0);u.$data.$emit("Model.saved",u.$data);u.$data.$setDirty(!1);e=undefined;f=undefined;for(c in n)if(e=n[c],f=u.$data[c].$id,e)break;s&&f?(u.inDialog||u.$store.commit("setnewid",{id:f}),u.$data.__baseUrl__=i.replaceSegment(u.$data.__baseUrl__,f)):a&&(u.inDialog||u.$store.commit("setnewid",{id:f,action:"edit"}),u.$data.__baseUrl__=i.replaceSegment(u.$data.__baseUrl__,f,"edit"));u.$data._restoreSelections(o);r(e);h=t&&t.toast?t.toast:null;h&&u.$toast(h);u.$notifyOwner(f,h)}})["catch"](function(n){u.$alertUi(n)})})}},$notifyOwner:function(n,t){var i,r,u;window.opener&&window.$$token&&(i=window.opener.require,i)&&(r=i("std:eventBus"),r)&&(u={token:window.$$token.token,update:window.$$token.update,toast:t||null,id:n},r.$emit("childrenSaved",u))},$invoke:function(t,r,u,e){var o=this,h=window.$$rootUrl,c=require("std:routing"),l=h+"/"+c.dataUrl()+"/invoke",s=o.$indirectUrl||o.$baseUrl;return u&&(s=i.combine("_page",u,"index",0)),new Promise(function(i,u){var h=n.toJson({cmd:t,baseUrl:s,data:r});f.post(l,h).then(function(t){if(!o.__destroyed__)if(n.isObject(t))i(t);else if(n.isString(t))i(t);else throw new Error("Invalid response type for $invoke");})["catch"](function(n){e&&e.catchError?u(n):o.$alertUi(n)})})},$asyncValid:function(n,t){var r=this,u=r.__asyncCache__,f=JSON.stringify(t),i=u[n];return(i||(i={data:"",result:null},u[n]=i),i.data===f)?i.result:(i.data=f,new Promise(function(u){r.__destroyed__||Vue.nextTick(function(){r.$invoke(n,t).then(function(n){r.__destroyed__||(i.result=n.Result.Value,u(i.result))})})}))},$reload:function(t){var u=this,h,c,s,l;if(n.isArray(t)&&t.$isLazy())return h=t._path_.lastIndexOf("."),c=t._path_.substring(h+1),t.$loaded=!1,u.$loadLazy(t.$parent,c);var a=window.$$rootUrl,v=require("std:routing"),y=a+"/"+v.dataUrl()+"/reload",r=u.$data,e=t?o.get(t.$ModelInfo):null;return t||e||(s=this.$data._findRootModelInfo(),s&&(e=o.get(s))),l=r._saveSelections(),new Promise(function(t){var o={baseUrl:i.replaceUrlQuery(u.$baseUrl,e)},s,h;n.isDefined(r.Query)&&(o.baseUrl=i.replaceUrlQuery(u.$baseUrl,r.Query),s=i.replaceUrlQuery(null,r.Query),window.history.replaceState(null,null,s));h=n.toJson(o);f.post(y,h).then(function(i){if(!u.__destroyed__)if(n.isObject(i))r.$merge(i),r._setModelInfo_(undefined,i),r._fireLoad_(),r._restoreSelections(l),t(r);else throw new Error("Invalid response type for $reload");})["catch"](function(n){u.$alertUi(n)})})},$requery:function(){this.inDialog?t.$emit("modalRequery",this.$baseUrl):t.$emit("requery")},$remove:function(n,t){this.$data.$readOnly||this.$isLoading||(t?this.$confirm(t).then(function(){return n.$remove()}):n.$remove())},$removeSelected:function(t,i){if(n.isArray(t)||console.error("$removeSelected. The argument is not an array"),!this.$data.$readOnly){var r=t.$selected;r&&this.$remove(r,i)}},$mailto:function(n,t){var r="mailto:"+n;return t&&(r+="?subject="+i.encodeUrl(t)),r},$href:function(n,t){return i.createUrlForNavigate(n,t)},$navigate:function(n,r,u,f,e){var o,s;this.$isReadOnly(e)||(t.$emit("closeAllPopups"),o=i.createUrlForNavigate(n,r),u===!0?(s=window.open(o,"_blank"),s&&(s.$$token={token:this.__currentToken__,update:f})):this.$store.commit("navigate",{url:o}))},$navigateSimple:function(n,t,i){if(t===!0){var r=window.open(n,"_blank");r&&(r.$$token={token:this.__currentToken__,update:i})}else this.$store.commit("navigate",{url:n})},$navigateExternal:function(n,t){t===!0?window.open(n,"_blank"):window.location.assign(n)},$download:function(n){var t=window.$$rootUrl;n=i.combine("/file",n.replace(".","-"));window.location=t+n},$file:function(t,r,f){var s=window.$$rootUrl,o=r,e;r&&n.isObject(r)&&(o=n.getStringId(r));e=i.combine(s,"_file",t,o);switch((f||{}).action){case"download":u.downloadUrl(e+"?export=1");break;case"print":u.printDirect(e);break;default:window.open(e,"_blank")}},$attachment:function(t,r,u){var s=window.$$rootUrl,h=u&&u["export"]?"export":"show",e=r,f,o;r&&n.isObject(r)&&(e=n.getStringId(r));f=i.combine(s,"attachment",h,e);o={base:t};f=f+i.makeQueryString(o);u&&u.newWindow?window.open(f,"_blank"):window.location.assign(f)},$eusign:function(n,i){function r(r){return new Promise(function(u){var f={promise:null,data:i,query:{base:n},raw:!0};t.$emit("modal",r,f);f.promise.then(function(n){cb(n);u(n)})})}var u=window.$$rootUrl;r("/eusign/index").then(function(){alert("promise resolved")})},$dbRemove:function(t,i,u){function a(n){var t=n.lastIndexOf(".");return t===-1?undefined:n.substring(t+1)}function o(){var u=l+"/_data/dbRemove",i={baseUrl:e.$baseUrl,id:s},r;c&&(i.prop=a(t.$parent._path_));r=n.toJson(i);f.post(u,r).then(function(){e.__destroyed__||t.$remove()})["catch"](function(n){e.$alertUi(n)})}if(t){if(h(u,t)){this.$alert(r.$PermissionDenied);return}if(!this.$isLoading){var s=t.$id,c=t.$parent.$isLazy?t.$parent.$isLazy():!1,l=window.$$rootUrl,e=this;i?this.$confirm(i).then(function(){o()}):o()}}},$dbRemoveSelected:function(n,t,i){if(!this.$isLoading){var r=n.$selected;r&&this.$dbRemove(r,t,i)}},$openSelectedFrame:function(n,r){var u,f;(n=n||"",u=r.$selected,u)&&(f=i.createUrlForNavigate(n,u.$id),t.$emit("openframe",f))},$openSelected:function(t,i,r,u){var f,e;if(t=t||"",f=i.$selected,f){if(t.startsWith("{")){if(t=t.substring(1,t.length-1),e=n.eval(f,t),!e)throw new Error("Property '"+t+"' not found in "+f.constructor.name+" object");t=e}this.$navigate(t,f.$id,r,u)}},$hasSelected:function(n,t){if(t&&t.validRequired){var i=this.$data;if(!i.$valid)return!1}return n&&!!n.$selected},$hasChecked:function(n){return n&&n.$checked&&n.$checked.length},$sanitize:function(t){return n.text.sanitize(t)},$confirm:function(i){n.isString(i)&&(i={message:i});i.style=i.style||"confirm";i.message=i.message||i.msg;var r={promise:null,data:i};return t.$emit("confirm",r),r.promise},$msg:function(n,t,i){var u={message:n,title:t||r.$Message,style:i||"info"};return this.$confirm(u)},$alert:function(i,r,u){var f,e;return!n.isObject(i)||r||u||(f=i,i=f.message||f.msg,r=f.title,u=f.list),e={promise:null,data:{message:i,title:r,style:"alert",list:u}},t.$emit("confirm",e),e.promise},$alertUi:function(n){if(n instanceof Error){alert(n.message);return}n.indexOf("UI:")===0?this.$alert(n.substring(3).replace("\\n","\n")):alert(n)},$toast:function(i,r){i&&(n.isString(i)&&(i={text:i,style:r||"success"}),t.$emit("toast",i))},$showDialog:function(n,t,i,r){return this.$dialog("show",n,t,i,r)},$inlineOpen:function(n){t.$emit("inlineDialog",{cmd:"open",id:n})},$inlineClose:function(n,i){t.$emit("inlineDialog",{cmd:"close",id:n,result:i})},$dialog:function(i,u,f,o,s){function l(){if(!n.isArray(f))return console.error("$dialog."+i+". The argument is not an array"),!0}function y(){if(!n.isObjectExact(f))return console.error("$dialog."+i+". The argument is not an object"),!0}function w(n,t){for(var i in n)n[i]=i in t?t[i]:undefined}function p(){if(h(s,f)){c.$alert(r.$PermissionDenied);return}n.isFunction(o)&&(o=o());switch(i){case"new":return l()?void 0:e(u,0,o,function(n){var t=f.$selected;t&&t.$merge(n)});case"append":return l()?void 0:e(u,0,o,function(n){f.$append(n)});case"browse":if(!n.isObject(f)){console.error("$dialog."+i+". The argument is not an object");return}return e(u,f,o,function(n){f.$merge?f.$merge(n):w(f,n)});case"edit-selected":return l()?void 0:e(u,f.$selected,o,function(n){f.$selected.$merge(n);f.__fireChange__("selected");s&&s.reloadAfter&&c.$reload()});case"edit":return y()?void 0:e(u,f,o,function(t){t==="reload"?c.$reload():f.$merge&&n.isObjectExact(t)?f.$merge(t):s&&s.reloadAfter&&c.$reload()});case"copy":if(y())return;var t=f.$parent;return e(u,f,o,function(n){t.$append(n)});default:return e(u,f,o,function(){s&&s.reloadAfter&&c.$reload()})}}var c,a,v;if(!this.$isReadOnly(s)){if(c=this,t.$emit("closeAllPopups"),s&&s.validRequired&&root.$invalid){this.$alert(r.$MakeValidFirst);return}return(a=this.$data.$mainObject,s&&s.saveRequired&&(this.$isDirty||a&&a.$isNew))?(v=null,this.$save().then(function(){v=p()}),v):p()}},$export:function(t,r,u){var f;if(!this.$isLoading){f=t||"0";t&&n.isObject(t)&&(f=n.getStringId(t));var o=this,s=window.$$rootUrl,e=r?i.combine("/_export",r,f):o.$baseUrl.replace("/_page/","/_export/");e=i.combine(s,e)+i.makeQueryString(u);window.location=e}},$exportTo:function(t,i){var o=window.$$rootUrl,e=this.$el.getElementsByClassName("sheet-page"),r;if(!e.length){console.dir("element not found (.sheet-page)");return}r=e[0];u&&(u.getColumnsWidth(r),u.getRowHeight(r));var s=r.innerHTML,h={format:t,html:s,fileName:i,zoom:+window.devicePixelRatio.toFixed(2)},c=require("std:routing"),l=o+"/"+c.dataUrl()+"/exportTo";f.post(l,n.toJson(h),!0).then(function(n){u&&u.downloadBlob(n,i,t)})["catch"](function(n){alert(n)})},$report:function(t,f,e,o,s){var a=this,h,c,l;if(!this.$isReadOnly(e)&&!this.$isLoading){if(h="show",c="",e&&(e["export"]?(h="export",c=e.format||""):e.attach?h="attach":e.print&&(h="print")),l=function(){var l=f;f&&n.isObject(f)&&(l=n.getStringId(f));var y=window.$$rootUrl,r=y+"/report/"+h+"/"+l,p=i.removeFirstSlash(o)||a.$indirectUrl||a.$baseUrl,w=i.makeBaseUrl(p),v=Object.assign({},{base:w,rep:t},s);if(c&&(v.format=c),r=r+i.makeQueryString(v),!e){window.open(r,"_blank");return}if(e["export"])window.location=r;else if(e.print)u.printDirect(r);else{if(e.attach)return;window.open(r,"_blank")}},e&&e.validRequired&&root.$invalid){this.$alert(r.$MakeValidFirst);return}e&&e.saveRequired&&this.$isDirty?this.$save().then(function(){l()}):l()}},$modalSaveAndClose:function(n,i){var u,f;if(this.$isDirty){if(u=this.$data,i&&i.validRequired&&u.$invalid){f=v(u.$forceValidate());this.$alert(r.$MakeValidFirst,undefined,f);return}this.$save().then(function(n){return t.$emit("modalClose",n)})}else t.$emit("modalClose",n)},$modalClose:function(n){t.$emit("modalClose",n)},$setFilter:function(n,i,r){t.$emit("setFilter",{source:n,prop:i,value:r})},$modalSelect:function(n,t){if(!("$selected"in n)){console.error("Invalid array for $modalSelect");return}if(t&&t.validRequired){var i=this.$data;if(!i.$valid)return}this.$modalClose(n.$selected)},$modalSelectChecked:function(n){if(!("$checked"in n)){console.error("invalid array for $modalSelectChecked");return}var t=n.$checked;t.length>0&&this.$modalClose(t)},$saveAndClose:function(n){var t=this;this.$isDirty?this.$save(n).then(function(){return t.$close()}):this.$close()},$close:function(){this.$saveModified()&&this.$store.commit("close")},$showHelp:function(n){window.open(this.$helpHref(n),"_blank")},$helpHref:function(n){return i.helpHref(n)},$searchChange:function(){var n=this.$store.replaceUrlSearch(this.$baseUrl);this.$data.__baseUrl__=n;this.$reload()},$saveModified:function(n,i){function f(n){u.inDialog?t.$emit("modalClose",n):u.$close()}if(!this.$isDirty)return!0;var u=this,e={message:n||r.$ElementWasChanged,title:i||r.$ConfirmClose,buttons:[{text:r.$Save,result:"save"},{text:r.$NotSave,result:"close"},{text:r.$Cancel,result:!1}]};return this.$confirm(e).then(function(n){n==="close"?(u.$data.$setDirty(!1),f(!1)):n==="save"&&u.$save().then(function(n){f(n)})}),!1},$format:function(t,i){return i?(n.isString(i)&&(i={dataType:i}),!i.format&&!i.dataType&&!i.mask)?t:i.mask?t?y.getMasked(i.mask,t):t:i.dataType?n.format(t,i.dataType,{hideZeros:i.hideZeros,format:i.format}):i.format&&i.format.indexOf("{0}")!==-1?i.format.replace("{0}",t):t:t},$getNegativeRedClass:function(t){return n.isNumber(t)?t<0?"negative-red":"":""},$expand:function(t,i){var r=t[i];if(!r.$loaded&&n.isDefined(t.$hasChildren)){var u=this,e=window.$$rootUrl,o=e+"/_data/expand",s=n.toJson({baseUrl:u.$baseUrl,id:t.$id});f.post(o,s).then(function(n){var e,t,h,c;if(!u.__destroyed__){e=n[i];r.$empty();var f=!0,o=!1,s=undefined;try{for(t=e[Symbol.iterator]();!(f=(h=t.next()).done);f=!0)c=h.value,r.push(r.$new(c))}catch(l){o=!0;s=l}finally{try{!f&&t["return"]&&t["return"]()}finally{if(o)throw s;}}}})["catch"](function(n){u.$alertUi(n)});r.$loaded=!0}},$loadLazy:function(t,r){var s=require("std:routing"),u=this,h=window.$$rootUrl,c=h+"/"+s.dataUrl()+"/loadlazy",l=t[r].$ModelInfo,p=t.$parent.$ModelInfo,e=o.get(l),a=i.parseUrlAndQuery(u.$baseUrl,e),v=a.url+i.makeQueryString(e),y=n.toJson({baseUrl:v,id:t.$id,prop:r});return new Promise(function(n){var i=t[r];if(i.$loaded){n(i);return}f.post(c,y).then(function(t){var f,l,a,s;if(!u.__destroyed__){if(r in t){i.$empty();var e=!0,h=!1,c=undefined;try{for(f=t[r][Symbol.iterator]();!(e=(l=f.next()).done);e=!0)a=l.value,i.push(i.$new(a))}catch(v){h=!0;c=v}finally{try{!e&&f["return"]&&f["return"]()}finally{if(h)throw c;}}s=r+".$RowCount";s in t&&(i.$RowCount=t[s]);t.$ModelInfo&&o.reconcile(t.$ModelInfo[r]);i._root_._setModelInfo_(i,t)}n(i)}})["catch"](function(n){u.$alertUi(n)});i.$loaded=!0})},$delegate:function(n){var t=this.$data;return t._delegate_(n)},$defer:c.defer,$hasError:function(t){var u=n.text.splitPath(t),r=this[u.obj]._errors_,i;return r?(i=r[t],i&&i.length):!1},$errorMessage:function(t){var u=n.text.splitPath(t),r=this[u.obj]._errors_,i;return r?(i=r[t],i&&i.length)?i[0].msg:"":""},$getErrors:function(t){function a(n){return t?t.indexOf(n)!==-1?!0:!1:!0}var e=this.$data.$forceValidate(),r,l,u,i,f;if(!e||!e.length)return null;t&&!n.isArray(t)&&(t=[t]);var o=[],s=!0,h=!1,c=undefined;try{for(r=e[Symbol.iterator]();!(s=(l=r.next()).done);s=!0)for(u=l.value,i=0;i<u.e.length;i++)f=u.e[i],a(f.severity)&&o.push({path:u,msg:f.msg,severity:f.severity,index:i})}catch(v){h=!0;c=v}finally{try{!s&&r["return"]&&r["return"]()}finally{if(h)throw c;}}return o.length?o:null},__beginRequest:function(){this.$data.__requestsCount__+=1},__endRequest:function(){this.$data.__requestsCount__-=1},__cwChange:function(n){this.$reload(n)},__queryChange:function(t,i){var u,r,f;n.isObjectExact(t)||console.error("base.__queryChange. invalid argument type");u=Object.assign({},this.$baseQuery);for(r in t)t[r]?u[r]=t[r]:delete u[r];f=i?i.$ModelInfo:this.$data._findRootModelInfo();o.copyfromQuery(f,u);this.$reload(i)},__doInit__:function(n){var t=this.$data,i;t._modelLoad_&&(i=null,n&&(t.__baseUrl__=n),this.$caller&&(i=this.$caller.$data),this.__createController__(),t._modelLoad_(i),t._seal_(t))},__createController__:function(){var t=this,n={$save:this.$save,$invoke:this.$invoke,$close:this.$close,$modalClose:this.$modalClose,$msg:this.$msg,$alert:this.$alert,$confirm:this.$confirm,$showDialog:this.$showDialog,$inlineOpen:this.$inlineOpen,$inlineClose:this.$inlineClose,$saveModified:this.$saveModified,$asyncValid:this.$asyncValid,$toast:this.$toast,$requery:this.$requery,$reload:this.$reload,$notifyOwner:this.$notifyOwner,$navigate:this.$navigate,$defer:c.defer,$setFilter:this.$setFilter};return Object.defineProperty(n,"$isDirty",{enumerable:!0,configurable:!0,get:function(){return t.$isDirty}}),Object.defineProperty(n,"$isPristine",{enumerable:!0,configurable:!0,get:function(){return t.$isPristine}}),Object.seal(n),n},__notified:function(t){t&&this.__currentToken__===t.token&&(t.toast&&this.$toast(t.toast),this.$reload(t.update||null).then(function(i){if(t.id&&n.isArray(i)){var r=i.find(function(n){return n.$id===t.id});r&&r.$select&&r.$select()}}))},__parseControllerAttributes:function(n){var t,i,r;return n?(t=JSON.parse(n.replace(/\'/g,'"')),i={},t.canClose&&(r=this.$delegate(t.canClose),r&&(i.canClose=r.bind(this.$data))),t.alwaysOk&&(i.alwaysOk=!0),i):null},__isModalRequery:function(){var n={url:this.$baseUrl,result:!1};return t.$emit("isModalRequery",n),n.result},__invoke__test__:function(t){if((t=t||{},t.target==="controller")&&(!this.inDialog||t.testId===this.__testId__)){var i=this.$data;switch(t.action){case"eval":t.result=n.eval(i,t.path)}}},__global_period_changed__:function(n){this.$data._fireGlobalPeriodChanged_(n)}},created:function(){var n={caller:null};t.$emit("registerData",this,n);this.$caller=n.caller;this.__destroyed__=!1;t.$on("beginRequest",this.__beginRequest);t.$on("endRequest",this.__endRequest);t.$on("queryChange",this.__queryChange);t.$on("childrenSaved",this.__notified);t.$on("invokeTest",this.__invoke__test__);t.$on("globalPeriodChanged",this.__global_period_changed__);this.$on("localQueryChange",this.__queryChange);this.$on("cwChange",this.__cwChange);this.__asyncCache__={};this.__currentToken__=window.app.nextToken();s&&s.time("create time:",a,!1)},beforeDestroy:function(){this.$data._fireUnload_()},destroyed:function(){this.$caller=null;t.$emit("registerData",null);t.$off("beginRequest",this.__beginRequest);t.$off("endRequest",this.__endRequest);t.$off("queryChange",this.__queryChange);t.$off("childrenSaved",this.__notified);t.$off("invokeTest",this.__invoke__test__);t.$off("globalPeriodChanged",this.__global_period_changed__);this.$off("localQueryChange",this.__queryChange);this.$off("cwChange",this.__cwChange);u.removePrintFrame();this.$data.$destroy&&this.$data.$destroy();this._data=null;this.__destroyed__=!0},beforeUpdate:function(){l=performance.now()},beforeCreate:function(){a=performance.now()},mounted:function(){var n=this.$el.getAttribute("test-id");n&&(this.__testId__=n)},updated:function(){s&&s.time("update time:",l,!1)}});app.components.baseController=b}(),function(){function r(n,t,i){var f,u,e;if(!n)return null;for(f=0;f<n.length;f++){if(u=n[f],t(u))return u;if(u.Menu&&(i&&(i.Url=u.Url),e=r(u.Menu,t),e))return l.set(u,"$expanded",!0),e}return null}function f(n,t){return!t||!n?!1:n.indexOf(t+",")!==-1}function e(n,i,u){var s,l,o,e,c,h;if((u=u||{},i=t.combine(i).toLowerCase(),s=i.split("/"),s.length>=4)||(l=s.length,o=s[1],o==="app")||u&&f(u.pages,o))return i;if(e=null,o&&(e=n.find(function(n){return n.Url===o})),e){if(e&&!e.Menu)return u.title=e.Name,i}else if(c={Url:""},e=r(n,function(n){return n.Url&&!n.Menu},c),e)return u.title=e.Name,t.combine(i,c.Url,e.Url);return(i=t.combine(o),h=s[2],!h&&u.seg2&&(h=u.seg2),e=h?r(e.Menu,function(n){return n.Url===h}):r(e.Menu,function(n){return n.Url&&!n.Menu}),e)?(u.title=e.Name,t.combine(i,e.Url)):i}var i=component("std:store"),n=require("std:eventBus"),a=component("std:modal"),v=component("std:toastr"),h=require("std:popup"),t=require("std:url"),o=require("std:period"),c=require("std:log"),y=require("std:utils"),u=window.$$locale,l=require("std:platform"),p=require("std:html"),w=require("std:http"),s="unknown title",b={template:'\n<header class="header">\n\t<div class="h-block">\n\t\t<!--<i class="ico-user"><\/i>-->\n\t\t<a class="app-title" href=\'/\' @click.prevent="root" v-text="title" tabindex="-1"><\/a>\n\t\t<span class="app-subtitle" v-text="subtitle"><\/span>\n\t<\/div>\n\t<div class="aligner"><\/div>\n\t<span class="title-notify" v-if="notifyText" v-text="notifyText" :title="notifyText" :class="notifyClass"><\/span>\n\t<div class="aligner"><\/div>\n\t<template v-if="!isSinglePage ">\n\t\t<a2-new-button :menu="newMenu" icon="plus" btn-style="success"><\/a2-new-button>\n\t\t<slot><\/slot>\n\t\t<a2-new-button :menu="settingsMenu" icon="gear-outline" :title="locale.$Settings"><\/a2-new-button>\n\t\t<a class="nav-admin middle" v-if="hasFeedback" tabindex="-1" @click.prevent="showFeedback" :title="locale.$Feedback" :class="{open: feedbackVisible}"><i class="ico ico-comment-outline"><\/i><\/a>\n\t\t<a class="nav-admin" v-if="userIsAdmin" href="/admin/" tabindex="-1"><i class="ico ico-gear-outline"><\/i><\/a>\n\t<\/template>\n\t<div class="dropdown dir-down separate" v-dropdown>\n\t\t<button class="btn user-name" toggle :title="personName"><i class="ico ico-user"><\/i> <span id="layout-person-name" class="person-name" v-text="personName"><\/span><span class="caret"><\/span><\/button>\n\t\t<div class="dropdown-menu menu down-left">\n\t\t\t<a v-if="!isSinglePage " v-for="(itm, itmIndex) in profileItems" @click.prevent="doProfileMenu(itm)" class="dropdown-item" tabindex="-1"><i class="ico" :class="\'ico-\' + itm.icon"><\/i> <span v-text="itm.title" :key="itmIndex"><\/span><\/a>\n\t\t\t<a @click.prevent="changePassword" class="dropdown-item" tabindex="-1"><i class="ico ico-access"><\/i> <span v-text="locale.$ChangePassword"><\/span><\/a>\n\t\t\t<div class="divider"><\/div>\n\t\t\t<form id="logoutForm" method="post" action="/account/logoff">\n\t\t\t\t<a href="javascript:document.getElementById(\'logoutForm\').submit()" tabindex="-1" class="dropdown-item"><i class="ico ico-exit"><\/i> <span v-text="locale.$Quit"><\/span><\/a>\n\t\t\t<\/form>\n\t\t<\/div>\n\t<\/div>\n<\/header>\n',props:{title:String,subtitle:String,userState:Object,personName:String,userIsAdmin:Boolean,menu:Array,newMenu:Array,settingsMenu:Array,appData:Object,showFeedback:Function,feedbackVisible:Boolean,singlePage:String,changePassword:Function},computed:{isSinglePage:function(){return!!this.singlePage},locale:function(){return u},notifyText:function(){return this.getNotify(2)},notifyClass:function(){return this.getNotify(1).toLowerCase()},feedback:function(){return this.appData?this.appData.feedback:null},hasFeedback:function(){return this.appData&&this.appData.feedback},profileItems:function(){return this.appData?this.appData.profileMenu:null}},methods:{getNotify:function(n){var i=this.userState?this.userState.Notify:null,t;return i?(t=i.match(/\((.*)\)(.*)/),t&&t.length>n)?t[n]:"":""},root:function(){var n={title:null},i=this.$store.getters.url,t=this.isSinglePage?"/"+this.singlePage:e(this.menu,"/",n);i!==t&&this.$store.commit("navigate",{url:t,title:n.title})},doProfileMenu:function(n){i.commit("navigate",{url:n.url})}}},k={template:'\n<ul class="nav-bar">\n\t<li v-for="(item, index) in menu" :key="index" :class="{active : isActive(item)}">\n\t\t<a :href="itemHref(item)" tabindex="-1" v-text="item.Name" @click.prevent="navigate(item)"><\/a>\n\t<\/li>\n\t<li class="aligner"/>\n\t<div class="nav-global-period" v-if="hasPeriod">\n\t\t<a2-period-picker class="drop-bottom-right pp-hyperlink pp-navbar" \n\t\t\tdisplay="namedate" :callback="periodChanged" prop="period" :item="that"/>\n\t<\/div>\n\t<li v-if="hasHelp()" :title="locale.$Help"><a :href="helpHref()" class="btn-help" rel="help" aria-label="Help" @click.prevent="showHelp()"><i class="ico ico-help"><\/i><\/a><\/li>\n<\/ul>\n',props:{menu:Array,period:o.constructor},computed:{seg0:function(){return i.getters.seg0},seg1:function(){return i.getters.seg1},locale:function(){return u},hasPeriod:function(){return!!this.period},that:function(){return this}},methods:{isActive:function(n){return this.seg0===n.Url},isActive2:function(n){return this.seg1===n.Url},itemHref:function(n){return"/"+n.Url},navigate:function(n){var f,i,u,o;this.isActive(n)||(f="menu:"+t.combine(window.$$rootUrl,n.Url),i=localStorage.getItem(f)||"",i&&!r(n.Menu,function(n){return n.Url===i})&&(i=""),u={title:null,seg2:i},o=e(this.menu,n.Url,u),this.$store.commit("navigate",{url:o,title:u.title}))},showHelp:function(){window.open(this.helpHref(),"_blank")},helpHref:function(){var r=this,n=this.menu.find(function(n){return r.isActive(n)}),i;return n&&n.Menu&&(i=n.Menu.find(function(n){return r.isActive2(n)}),i&&i.Help)?t.helpHref(i.Help):n&&n.Help?t.helpHref(n.Help):t.helpHref("")},hasHelp:function(){var t=this,n;return this.menu?(n=this.menu.find(function(n){return t.isActive(n)}),n&&n.Help):!1},periodChanged:function(t){w.post("/_application/setperiod",t.toJson()).then(function(){n.$emit("globalPeriodChanged",t)})["catch"](function(n){alert(n)})}}},d={props:{menu:Array,compact:Boolean},computed:{seg0:function(){return i.getters.seg0},seg1:function(){return i.getters.seg1},cssClass:function(){var n="side-bar";return this.compact&&(n+="-compact"),n+(this.$parent.sideBarCollapsed?" collapsed":" expanded")},sideMenu:function(){var n=this.topMenu;return n?n.Menu:null},topMenu:function(){var n=this.seg0;return r(this.menu,function(t){return t.Url===n})}},methods:{isActive:function(n){var t=this.seg1===n.Url;return t&&p.updateDocTitle(n.Name),t},isGroup:function(n){if(!n.Params)return!1;try{return JSON.parse(n.Params).group||!1}catch(t){return!1}},navigate:function(n){var i,r;if(!this.isActive(n))if(i=this.topMenu,i){if(r=t.combine(i.Url,n.Url),n.Url.indexOf("/")===-1)try{localStorage.setItem("menu:"+t.combine(window.$$rootUrl,i.Url),n.Url)}catch(u){}this.$store.commit("navigate",{url:r,title:n.Name})}else console.error("no top menu found")},itemHref:function(n){var i=this.topMenu;return i?t.combine(i.Url,n.Url):undefined},toggle:function(){this.$parent.sideBarCollapsed=!this.$parent.sideBarCollapsed;try{localStorage.setItem("sideBarCollapsed",this.$parent.sideBarCollapsed)}catch(n){}}}},g={template:'\n<div :class="cssClass">\n\t<a href role="button" class="ico collapse-handle" @click.prevent="toggle"><\/a>\n\t<div class="side-bar-body" v-if="bodyIsVisible">\n\t\t<tree-view :items="sideMenu" :is-active="isActive" :is-group="isGroup" :click="navigate" :get-href="itemHref"\n\t\t\t:options="{folderSelect: folderSelect, label: \'Name\', title: \'Description\',\n\t\t\tsubitems: \'Menu\', expandAll:true,\n\t\t\ticon:\'Icon\', wrapLabel: true, hasIcon: true}">\n\t\t<\/tree-view>\n\t<\/div>\n\t<div v-else class="side-bar-title" @click.prevent="toggle">\n\t\t<span class="side-bar-label" v-text="title"><\/span>\n\t<\/div>\n<\/div>\n',mixins:[d],computed:{bodyIsVisible:function(){return!this.$parent.sideBarCollapsed||this.compact},title:function(){var t=this.sideMenu,i,n;return t?(i=this.seg1,n=r(t,function(n){return n.Url===i}),n)?n.Name||s:s:s}},methods:{folderSelect:function(n){return!!n.Url}}},nt={render:function(n){return n("div",{attrs:{"class":"content-view "+this.cssClass}},[n("include",{props:{src:this.currentView,needReload:this.needReload}})])},computed:{currentView:function(){var u=window.$$rootUrl,n=i.getters.url,r;if(n!=="/")return r=i.getters.len,(r===2||r===3)&&(n+="/index/0"),t.combine(u,"/_page",n)+i.getters.search},cssClass:function(){var n=this.$store.getters.route;return n.seg0==="app"?"full-view":f(this.pages,n.seg0)?"full-view":n.len===3?"partial-page":n.len===2?"full-page":"full-view"}},props:{pages:String},data:function(){return{needReload:!1}},created:function(){var t=this;n.$on("requery",function(){t.needReload=!0;Vue.nextTick(function(){return t.needReload=!1})})}},tt={store:i,template:'\n<div :class="cssClass" class="main-view">\n\t<a2-nav-bar :menu="menu" v-show="navBarVisible" :period="period"><\/a2-nav-bar>\n\t<a2-side-bar :menu="menu" v-show="sideBarVisible" :compact=\'isSideBarCompact\'><\/a2-side-bar>\n\t<a2-content-view :pages="pages"><\/a2-content-view>\n\t<div class="load-indicator" v-show="pendingRequest"><\/div>\n\t<div class="modal-stack" v-if="hasModals">\n\t\t<div class="modal-wrapper modal-animation-frame" v-for="dlg in modals" :class="{show: dlg.wrap}">\n\t\t\t<a2-modal :dialog="dlg"><\/a2-modal>\n\t\t<\/div>\n\t<\/div>\n\t<a2-toastr><\/a2-toastr>\n<\/div>',components:{"a2-nav-bar":k,"a2-side-bar":g,"a2-content-view":nt,"a2-modal":a,"a2-toastr":v},props:{menu:Array,sideBarMode:String,period:o.constructor,pages:String},data:function(){return{sideBarCollapsed:!1,requestsCount:0,modals:[],modalRequeryUrl:""}},computed:{route:function(){return this.$store.getters.route},isSideBarCompact:function(){return this.sideBarMode==="Compact"},sideBarInitialCollapsed:function(){var n=localStorage.getItem("sideBarCollapsed");return n==="true"?!0:window.matchMedia("(min-width:1025px)").matches?!1:!0},navBarVisible:function(){var n=this.route;return f(this.pages,n.seg0)?!1:n.seg0!=="app"&&(n.len===2||n.len===3)},sideBarVisible:function(){var n=this.route;return n.seg0!=="app"&&n.len===3},cssClass:function(){var n=this.isSideBarCompact?"side-bar-compact-":"side-bar-";return n+(this.sideBarCollapsed?"collapsed":"expanded")},pendingRequest:function(){return!this.hasModals&&this.requestsCount>0},hasModals:function(){return this.modals.length>0}},methods:{setupWrapper:function(n){this.modalRequeryUrl="";setTimeout(function(){n.wrap=!0},50)}},created:function(){function o(){for(var t,n=r.modals.length-1;n>=0;--n)if(t=r.modals[n],t.rd)return t;return null}function v(n){var t,e,i;if(n){var r=!0,u=!1,f=undefined;try{for(t=n[Symbol.iterator]();!(r=(e=t.next()).done);r=!0)i=e.value,"Menu"in i&&(l.set(i,"$expanded",!0),v(i.Menu))}catch(o){u=!0;f=o}finally{try{!r&&t["return"]&&t["return"]()}finally{if(u)throw f;}}}}var r=this,a,f,s,h,c;if(n.$on("beginRequest",function(){r.requestsCount+=1}),n.$on("endRequest",function(){r.requestsCount-=1}),n.$on("modal",function(n,u){var o=y.getStringId(u?u.data:null),h=u&&u.raw,s=window.$$rootUrl,e=t.combine(s,"/_dialog",n,o),f;h&&(e=t.combine(s,n,o));e=i.replaceUrlQuery(e,u.query);f={title:"dialog",url:e,prms:u.data,wrap:!1,rd:u.rd};f.promise=new Promise(function(n){f.resolve=n});u.promise=f.promise;r.modals.push(f);r.setupWrapper(f)}),n.$on("modaldirect",function(n,i){var f=window.$$rootUrl,e=t.combine(f,"/_dialog",n),u={title:"dialog",url:e,prms:i.data,wrap:!1};u.promise=new Promise(function(n){u.resolve=n});i.promise=u.promise;r.modals.push(u);r.setupWrapper(u)}),n.$on("modalSetAttribites",function(n,t){if(n&&t){var i=o();i&&(i.attrs=t.__parseControllerAttributes(n))}}),n.$on("modalCreated",function(n){var t=o();t&&(t.instance=n)}),n.$on("isModalRequery",function(n){n.url&&r.modalRequeryUrl&&r.modalRequeryUrl===n.url&&(n.result=!0)}),n.$on("modalRequery",function(n){var t=o(),i;t&&(i=t.instance,i&&i.modalRequery&&(n&&(t.url=n),r.modalRequeryUrl=t.url,i.modalRequery()))}),n.$on("modalSetBase",function(n){var t=o();t&&(t.url=n)}),n.$on("modalClose",function(n){function t(n){var t=r.modals.pop();n&&t.resolve(n)}var i,u;if(r.modals.length){if(i=r.modals[r.modals.length-1],!i.attrs){t(n);return}i.attrs.alwaysOk&&(n=!0);i.attrs.canClose?(u=i.attrs.canClose(),u===!0?t(n):u.then?n.then(function(i){i===!0?t(n):i&&t(i)}):u&&t(u)):t(n)}}),n.$on("modalCloseAll",function(){while(r.modals.length){var n=r.modals.pop();n.resolve(!1)}}),n.$on("confirm",function(n){var t=n.data;t.wrap=!1;t.promise=new Promise(function(n){t.resolve=n});n.promise=t.promise;r.modals.push(t);r.setupWrapper(t)}),!this.menu){a={promise:null,data:{message:u.$AccessDenied,title:u.$Error,style:"alert"}};n.$emit("confirm",a);a.promise.then(function(){var n=window.$$rootUrl,i=t.combine(n,"/account/login");window.location.assign(i)});return}this.sideBarCollapsed=this.sideBarInitialCollapsed;f={title:null,pages:this.pages};s=t.normalizeRoot(window.location.pathname);s==="/home"&&this.menu&&!this.menu.find(function(n){return n.Url.toLowerCase()==="home"})&&(s="/");h=e(this.menu,s,f);h=h+window.location.search;this.$store.commit("setstate",{url:h,title:f.title});c={url:"",title:""};c.url=e(this.menu,"/",f);c.title=f.title;t.firstUrl=c;v(this.menu)}},it=Vue.extend({components:{"a2-main-view":tt,"a2-app-header":b},store:i,data:function(){return{requestsCount:0,loadsCount:0,debugShowTrace:!1,debugShowModel:!1,feedbackVisible:!1,globalPeriod:null,dataCounter:0,traceEnabled:c.traceEnabled()}},computed:{processing:function(){return!this.hasModals&&this.requestsCount>0},modelStack:function(){return this.__dataStack__},singlePage:function(){var n=this.$store.getters.seg0;return f(this.pages,n)?n:undefined}},watch:{traceEnabled:function(n){c.enableTrace(n)}},methods:{about:function(){this.$store.commit("navigate",{url:"/app/about"})},appLink:function(n){this.$store.commit("navigate",{url:n.url})},navigate:function(n){this.$store.commit("navigate",{url:n})},debugOptions:function(){alert("debug options")},debugTrace:function(){window.$$debug&&(this.debugShowModel=!1,this.feedbackVisible=!1,this.debugShowTrace=!this.debugShowTrace)},debugModel:function(){window.$$debug&&(this.debugShowTrace=!1,this.feedbackVisible=!1,this.debugShowModel=!this.debugShowModel)},debugClose:function(){this.debugShowModel=!1;this.debugShowTrace=!1;this.feedbackVisible=!1},showFeedback:function(){this.debugShowModel=!1;this.debugShowTrace=!1;this.feedbackVisible=!this.feedbackVisible},feedbackClose:function(){this.feedbackVisible=!1},profile:function(){alert("user profile")},changeUser:function(){alert("change user")},changePassword:function(){if(window.cefHost){this.$alert(u.$DesktopNotSupported);return}var t={promise:null,data:{Id:-1}};n.$emit("modal","/app/changePassword",t);t.promise.then(function(t){t!==!1&&n.$emit("toast",{text:u.$ChangePasswordSuccess,style:"success"})})},$alert:function(t,i,r){var u={promise:null,data:{message:t,title:i,style:"alert",list:r}};return n.$emit("confirm",u),u.promise}},created:function(){var t=this;this.initialPeriod&&(this.globalPeriod=new o.constructor(this.initialPeriod));t.__dataStack__=[];window.addEventListener("popstate",function(i){if(n.$emit("modalCloseAll"),t.__dataStack__.length>0){var u=t.__dataStack__[0],r=i.state;if(!u.$saveModified()){r=u.$data.__baseUrl__.replace("/_page","");window.history.pushState(r,null,r);return}}t.$store.commit("popstate")});n.$on("registerData",function(n,i){t.dataCounter+=1;n?(t.__dataStack__.length>0&&(i.caller=t.__dataStack__[0]),t.__dataStack__.unshift(n)):t.__dataStack__.shift(n)});h.startService();n.$on("beginRequest",function(){t.requestsCount+=1;window.__requestsCount__=t.requestsCount});n.$on("endRequest",function(){t.requestsCount-=1;window.__requestsCount__=t.requestsCount});n.$on("beginLoad",function(){window.__loadsCount__===undefined&&(window.__loadsCount__=0);t.loadsCount+=1;window.__loadsCount__=t.loadsCount});n.$on("endLoad",function(){t.loadsCount-=1;window.__loadsCount__=t.loadsCount});n.$on("closeAllPopups",h.closeAll)}});app.components["std:shellController"]=it}(),function(){function r(n){t.commit("navigate",{url:n})}function u(t){n=undefined;var i=require("std:http"),r=window.$$rootUrl,u=require("std:routing"),f=r+"/"+u.dataUrl()+"/invoke",e={cmd:t.cmd,baseUrl:"/_page"+t.path+"/index/"+t.id,data:null};i.post(f,JSON.stringify(e)).then(function(i){t.result="success:"+i;n=t.result})["catch"](function(i){t.result="error:"+i;n=t.result})}var t=component("std:store"),i=require("std:eventBus"),n=undefined;window.__tests__={$navigate:r,$isReady:function(){return document.readyState==="complete"&&window.__requestsCount__+window.__loadsCount__===0},$invoke:function(n){return n.target==="shell"?u(n):i.$emit("invokeTest",n),n.result},$lastResult:function(){return n}}}();