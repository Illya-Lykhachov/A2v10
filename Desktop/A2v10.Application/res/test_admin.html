<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A2:Web" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="rootUrl" content="/admin" />
    <title></title>
    <link href="/css/site.min.css" rel="stylesheet" />
</head>
<body>
    <!-- TODO: REPLACE WITH NEW SHELL -->
    <div id="shell" class="shell">
        <header class="header">
            <div class="h-block">
                <i class="ico ico-dashboard"></i>
                <a class="app-title" href='/admin' v-text="title" @click.prevent="root"></a>
            </div>
            <div class="aligner"></div>
            <a class="nav-admin" href="/"><i class="ico ico-gear-outline"></i></a>
            <div class="dropdown dir-down" v-dropdown>
                <button class="btn" toggle><i class="ico ico-user"></i> Администратор системы <span class="caret"></span></button>
                <div class="dropdown-menu menu down-right">
                    <a @click.prevent="profile" class="dropdown-item"><i class="ico ico-user"></i> Профиль</a>
                    <div class="divider"></div>
                    <a @click.prevent="changeUser" class="dropdown-item"><i class="ico ico-switch"></i> Сменить пользователя</a>
                    <div class="divider"></div>
                    <form id="logoutForm" method="post" action="Account/LogOff">
                        <a href="javascript:document.getElementById('logoutForm').submit()" class="dropdown-item"><i class="ico ico-exit"></i> Выход</a>
                    </form>
                </div>
            </div>
        </header>
        <footer class="footer">
            <div :class="{spinner: true, active:processing}"></div>
            <a href="/app/about" @click.prevent="about">about</a>
            version: <span v-text="version"></span>
            <div class="right-part">
                <div class="dropdown dir-up" v-dropdown>
                    <button class="btn btn-debug" toggle>Debug<span class="caret up"></span></button>
                    <div class="dropdown-menu menu up-right">
                        <a @click.prevent="debugModel" class="dropdown-item"><i class="ico ico-database"></i> Модель данных</a>
                        <a @click.prevent="debugTrace" class="dropdown-item"><i class="ico ico-log"></i> Трассировка</a>
                        <div class="divider"></div>
                        <a @click.prevent="debugOptions" class="dropdown-item"><i class="ico ico-wrench"></i> Настройка</a>
                    </div>
                </div>
            </div>
        </footer>
        <a2-main-view :menu="menu"></a2-main-view>
    </div>
    <script type="text/javascript" src="/scripts/vue.js"></script>
    <script type="text/javascript" src="/scripts/main.js"></script>
    <script type="text/javascript">
        (function () {

            const Shell = component('std:shellController');

    const menu = [
        {
            type: 'tree', Name: 'Администратор', Url: 'identity', Menu: [
                { Name: "Пользователи", Url: 'user', Icon: 'user' },
                { Name: "Группы", Url: 'group', Icon: 'users' },
                { Name: "Роли", Url: 'role', Icon: 'users' }
            ]
        },
        {
            Name: "Бизнес процессы", Url: 'workflow', Icon: 'folder', Menu: [
                { Name: "Выполняемые", Url: 'executing', Icon: 'save' },
                { Name: "Аварийные", Url: 'failed', Icon: 'dot' }
            ]
        }
    ];



    // main VIEW SHELL

    const shell = new Shell({
        el: '#shell',
        data: {
            title: 'application title (admin)',
            version: '10.0.70xx (admin)',
            menu: menu
        }
    });

        window.$rootUrl = '';

        })();
    </script>
</body>
</html>